(window["__load"]=window["__load"]||[]).push([["PEkQ-03"],{ABLw:function(a,b,c){"use strict";c.d(b,"a",function(){return useTaskTaskUpdateServiceMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation TaskTaskUpdateServiceMutation($input:OpenapiPutAjaxTaskIdInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"499ad0dd9b"){result:putAjaxTaskId(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:[]fragments:[]nodeLookupMap:[]predicates:{})@rest(type:"OpenapiEmptyManage" method:"PUT" pathBuilder:$pathBuilder runtimePath:"/ajax/task/:id" queryName:"result" bodyBuilder:$bodyBuilder){__typename}}
          `,g=f,h={expectedErrors:["multi_region_routing_target_not_found"],onError(a){throw a}};function useTaskTaskUpdateServiceMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},CxMG:function(a,b,c){"use strict";c.d(b,"a",function(){return useIndexOpenReviewsRetrieveQuery});var d=c("qCo4"),e=c("bPOr");const f=e.a`
            query IndexOpenReviewsRetrieveQuery($input:OpenapiGetAjaxTaskOpenReviewsInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"fabc47698e"){result:ajaxTaskOpenReviews(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["dismissed_at" "id" "new_count" "total_count" "visited_at"]fragments:[]nodeLookupMap:[{nodes:["dismissed_at" "id" "new_count" "total_count" "visited_at"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiTask" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/task/open_reviews" queryName:"result"){dismissed_at id new_count total_count visited_at}}
          `,g=f,h={expectedErrors:["multi_region_routing_target_not_found"]};function useIndexOpenReviewsRetrieveQuery(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},DCsq:function(a,b,c){"use strict";var d=c("8OBj"),e=c.n(d),f=c("QbI9"),g=c.n(f),h=c("TfDI"),i=c.n(h),j=c("0qsp"),k=c("xLaQ"),l=c.n(k),m=c("plqV"),n=c("K+RN"),o=c("kIsX"),p=c("xGRT"),q=c("TB5T"),r=c("bHWS"),s=c("Al4q"),t=c("T6JN"),u=c("U/5g"),v=c("szBP"),w=c("09jD"),x=c("zKUY"),y=c("idxj"),z=c("D4GZ"),A=c("cnxD"),B=c("ABLw"),C=c("fisF"),D=c("Ib3m");class Task extends j.Component{constructor(){super(...arguments),i()(this,"renderTaskTitle",(a,b)=>{const{intl:c,data:d}=this.props;return j.createElement(s.default,{direction:"horizontal",spacing:8},j.createElement(m.a,g()({},a,{values:{count:d.total_count,formattedCount:c.formatNumber(d.total_count),TaskLink:a=>j.createElement(C.c,{display:"inline-flex",label:a,href:b,onClick:this.handleTaskLinkClick})}})),j.createElement(q.a,{reference:r.BodyTextProps},d.new_count>0?j.createElement(u.default,{color:"blue",label:j.createElement(n.a,g()({},x.a.newBadge,{values:{formattedCount:j.createElement(o.a,{value:d.new_count})}}))}):null))}),i()(this,"handleTaskLinkClick",a=>{const{taskUpdateService:b,data:c,name:d,globals:e}=this.props;b.isLoading||(b.action({id:c.id,visited_at:l()().unix()}).then(this.reportTaskUpdateError),Object(y.c)({analytics:e.analytics,name:y.a[d]}))}),i()(this,"getConfigForName",()=>{const a={merchant_scoring_fraud_tier:["elevated","high"]},{name:b}=this.props;switch(b){case"potentially_fraudulent_accounts":const c=Object(D.a)({name:"CONNECT_ACCOUNTS_OVERVIEW",search:{connected_merchant:a}});return{titleMsg:x.a.potentiallyFraudulentAccountsTitle,linkMsg:x.a.potentiallyFraudulentAccountsLink,icon:"review",url:c};case"open_reviews":const d=Object(D.a)({name:"RADAR_REVIEWS"});return{titleMsg:x.a.openReviewsTitle,linkMsg:x.a.openReviewsLink,icon:"review",url:d};case"failed_invoices":const e=Object(D.a)({name:"INVOICES",search:{past_due:"true",attempted:"true"}});return{titleMsg:x.a.failedInvoicesTitle,linkMsg:x.a.failedInvoicesLink,icon:"invoice",url:e};case"unanswered_disputes":const f=Object(D.a)({name:"DISPUTES",search:{statuses:["needs_response","warning_needs_response"],evidence_due_by:{gt:`${Object(z.a)()}`},sort:"evidence_due_by",order:"asc"}});return{titleMsg:x.a.unansweredDisputesTitle,linkMsg:x.a.unansweredDisputesLink,icon:"dispute",url:f};default:return Object(v.s)(b)}}),i()(this,"reportTaskUpdateError",a=>{if(a.isErrored){const b={taskId:this.props.data.id,error_msg:a.error.message};if("service_error"===a.error.type){const c=a.error.http_status&&a.error.http_status<500;Object(v.S)(!!c,"Updating task failed","dashboard_discovery",{extra:e()(e()({},b),{},{http_status:a.error.http_status})})}else Object(v.T)("Updating task failed","dashboard_discovery",{extra:b})}}),i()(this,"handleTaskDismiss",a=>{a.stopPropagation(),a.preventDefault();const{taskUpdateService:b,data:c,globals:d,name:e,onTaskDismiss:f}=this.props;b.isLoading||(b.action({id:c.id,dismissed_at:l()().unix()}).then(this.reportTaskUpdateError),Object(y.d)({analytics:d.analytics,name:y.a[e]}),f(e))}),i()(this,"render",()=>{const{intl:a}=this.props,{titleMsg:b,icon:c,url:d}=this.getConfigForName();return j.createElement(C.d,{background:"offset",start:j.createElement(t.default,{icon:c,color:"gray"}),description:this.renderTaskTitle(b,d),end:j.createElement(C.c,{color:"gray",icon:"delete",onClick:this.handleTaskDismiss,label:a.formatMessage(x.a.dismiss),hideLabel:!0})})})}componentDidMount(){const{name:a,globals:b}=this.props;Object(y.e)({analytics:b.analytics,name:y.a[a]})}}const TaskExport=a=>{const b=Object(w.j)(),c=Object(p.a)(),d=Object(A.c)(B.a,{componentName:"Task",owner:"dashboard_discovery",serviceName:"taskUpdateService"});return j.createElement(Task,g()({},a,{globals:b,intl:c,taskUpdateService:d}))};b.a=TaskExport},NPHr:function(a,b,c){var d=c("3714"),e=c("c1py"),f=c("scCu");function max(a){return a&&a.length?d(a,f,e):void 0}a.exports=max},PZio:function(a,b,c){"use strict";var d=c("8OBj"),e=c.n(d),f=c("TfDI"),g=c.n(f),h=c("+Qml"),i=c.n(h),j=c("NPHr"),k=c.n(j),l=c("TgZK"),m=c.n(l),n=c("Fced"),o=c.n(n),p=c("7pk5"),q=c.n(p),r=c("0qsp"),s=c("viqS"),t=c("M5MA"),u=c("szBP"),v=c("09jD"),w=c("FLYH"),x=c("I/MV"),y=c("DCsq"),z=c("CxMG"),A=c("pQNH"),B=c("m3fZ");const getMostRecentInteractionDate=a=>{let{dismissed_at:b,visited_at:c}=a;return k()(i()([b,c],m.a))};class Tasks extends r.Component{constructor(){super(...arguments),g()(this,"state",{openReviewsDismissed:!1,unansweredDisputesDismissed:!1,potentiallyFraudulentAccountsDismissed:!1}),g()(this,"handleTaskDismiss",a=>{this.setState(b=>e()(e()({},b),{},{[`${q()(a)}Dismissed`]:!0}))}),g()(this,"shouldRenderTask",(a,b)=>{var c;const d=null===(c=a.data)|| void 0===c?void 0:c.result;return!!d&&(d.new_count<0?(Object(u.T)("New task count should not be negative","dashboard_discovery",{extra:{name:b}}),!1):d.total_count<0?(Object(u.T)("Total task count should not be negative","dashboard_discovery",{extra:{name:b}}),!1):0!==d.total_count&&(0!==d.new_count||!d.dismissed_at||getMostRecentInteractionDate(d)!==d.dismissed_at)&&!this.state[`${q()(b)}Dismissed`])}),g()(this,"renderTasks",a=>{const b=a.map(a=>{var b;let{name:c,retrieve:d}=a;return null!==(b=d.data)&& void 0!==b&&b.result&&this.shouldRenderTask(d,c)?{data:d.data.result,name:c}:null}),c=o()(b);return c.map(a=>{let{name:b,data:c}=a;return r.createElement(y.a,{data:c,name:b,key:b,onTaskDismiss:this.handleTaskDismiss})})}),g()(this,"getConfig",()=>{const{openReviewsRetrieve:a,unansweredDisputesRetrieve:b,potentiallyFraudulentAccountsRetrieve:c}=this.props;return[{name:"open_reviews",retrieve:a},{name:"unanswered_disputes",retrieve:b},{name:"potentially_fraudulent_accounts",retrieve:c}]}),g()(this,"render",()=>{const a=this.getConfig(),b=this.renderTasks(a);return b.length?r.createElement(t.a,{margin:{top:20}},r.createElement(s.c,{size:"large",radius:!1},b)):null})}}const TasksExport=()=>{const a=Object(v.l)(),b=Object(v.D)(),c=Object(x.a)(["show_fraud_analysis_section_in_cad","hide_radar_for_connected_accounts"]),d=c.show_fraud_analysis_section_in_cad&&a(w.a.merchant_risk_score_connect_read),e=!b&&c.hide_radar_for_connected_accounts,f=Object(z.a)({skip:!!b||!a(w.a.review_read)||e}),g=Object(A.a)({skip:!!b||!a(w.a.dispute_read),fetchPolicy:"network-only"}),h=Object(B.a)({skip:!d||!!b||!a(w.a.merchant_risk_score_connect_read)});return r.createElement(Tasks,{openReviewsRetrieve:f,unansweredDisputesRetrieve:g,potentiallyFraudulentAccountsRetrieve:h})};b.a=TasksExport},avV8:function(a,b,c){"use strict";c.d(b,"a",function(){return useSampleChartsLazyQuery});var d=c("81gb"),e=c("bPOr");const f=e.a`
            query SampleChartsQuery($v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"d2c93f2b0b"){sampleCharts:ajaxLegacyGraphqlHomeSampleCharts(v1Context:$v1Context)@params(expand:[]includeOnly:["disabled"]fragments:[]nodeLookupMap:[{nodes:["disabled"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiHomeSampleChartsHomeSampleCharts" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/legacy_graphql/home_sample_charts" queryName:"sampleCharts"){disabled}}
          `,g=f,h={};function useSampleChartsLazyQuery(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},c1py:function(a,b){function baseGt(a,b){return a>b}a.exports=baseGt},idxj:function(a,b,c){"use strict";c.d(b,"b",function(){return trackTaskAction}),c.d(b,"c",function(){return trackTaskClick}),c.d(b,"d",function(){return trackTaskDismiss}),c.d(b,"e",function(){return trackTaskImpression}),c.d(b,"a",function(){return e});var d=c("szBP");const e={tax_documentation_needed:"tax_documentation_needed",tax_verification_needed:"tax_verification_needed",domain_verification_needed:"domain_verification_needed",payouts_paused:"paused_payouts",documents_requested:"documentRequests",connected_account_verifications:"connected_account_verifications",open_reviews:"reviewPayments",unanswered_disputes:"answerDisputes",manual_payouts:"balance",automatic_payouts:"payout",radar_sca_fraud:"radar_sca_fraud",radar_sca_merchant_rft_upsell_notice:"radar_sca_merchant_rft_upsell_notice",missing_website_checklist_items:"missing_website_checklist_items",verification_documents_needed:"verification_documents_needed",potentially_fraudulent_accounts:"potentially_fraudulent_accounts"},isCritical=a=>"domain_verification_needed"===a||"paused_payouts"===a||"documentRequests"===a||"missing_website_checklist_items"===a,trackTaskAction=a=>{let{analytics:b,name:c,action:e}=a;const f=d.N.get("stripe.uuid.dashboard.home.tasks");f&&f.length&&b.action("dashboard.home.tasks.action",{uuid:f,identifier:c,critical:isCritical(c),action:e})},trackTaskClick=a=>{let{analytics:b,name:c}=a;const e=d.N.get("stripe.uuid.dashboard.home.tasks");e&&e.length&&b.action("dashboard.home.tasks.click",{uuid:e,identifier:c,critical:isCritical(c)})},trackTaskDismiss=a=>{let{analytics:b,name:c}=a;const e=d.N.get("stripe.uuid.dashboard.home.tasks");e&&e.length&&b.action("dashboard.home.tasks.dismiss",{uuid:e,identifier:c,critical:isCritical(c)})},trackTaskImpression=a=>{let{analytics:b,name:c}=a;const e=d.N.get("stripe.uuid.dashboard.home.tasks");e&&e.length&&b._deprecated_track("dashboard.home.tasks.impression",{uuid:e,identifier:c,critical:isCritical(c)})}},m0R2:function(a,b,c){"use strict";var d=c("0qsp"),e=c("8pk8"),f=c("avV8");const useSampleChartsState=()=>{const[a]=Object(f.a)({fetchPolicy:"no-cache"}),b=!Object(e.a)("dashboard_home_sample_charts_disabled"),[c,g]=d.useState(b);return d.useEffect(()=>{const checkSampleChartsState=async()=>{if(b){var c;const d=await a(),{data:e}=d,f=!(null!=e&&null!==(c=e.sampleCharts)&& void 0!==c&&c.disabled);g(f)}else g(!1)};checkSampleChartsState()},[b,a]),[c,g]};b.a=useSampleChartsState},m3fZ:function(a,b,c){"use strict";c.d(b,"a",function(){return useIndexPotentiallyFraudulentAccountsRetrieveQuery});var d=c("qCo4"),e=c("bPOr");const f=e.a`
            query IndexPotentiallyFraudulentAccountsRetrieveQuery($input:OpenapiGetAjaxTaskPotentiallyFraudulentAccountsInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"d5eace89cd"){result:ajaxTaskPotentiallyFraudulentAccounts(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["dismissed_at" "id" "new_count" "total_count" "visited_at"]fragments:[]nodeLookupMap:[{nodes:["dismissed_at" "id" "new_count" "total_count" "visited_at"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiTask" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/task/potentially_fraudulent_accounts" queryName:"result"){dismissed_at id new_count total_count visited_at}}
          `,g=f,h={expectedErrors:["multi_region_routing_target_not_found"]};function useIndexPotentiallyFraudulentAccountsRetrieveQuery(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},oYnE:function(a,b,c){"use strict";c.r(b),c.d(b,"default",function(){return DashboardBentoHomeTasks});var d=c("0qsp"),e=c("PZio"),f=c("m0R2"),g=c("K0c4");function DashboardBentoHomeTasks(){const[a]=Object(f.a)();return d.createElement(g.a,{project:"dashboard_discovery"},a?null:d.createElement(e.a,null))}},pQNH:function(a,b,c){"use strict";c.d(b,"a",function(){return useIndexUnansweredDisputesRetrieveQuery});var d=c("qCo4"),e=c("bPOr");const f=e.a`
            query IndexUnansweredDisputesRetrieveQuery($input:OpenapiGetAjaxTaskUnansweredDisputesInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"65cf43ff82"){result:ajaxTaskUnansweredDisputes(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["dismissed_at" "id" "new_count" "total_count" "visited_at"]fragments:[]nodeLookupMap:[{nodes:["dismissed_at" "id" "new_count" "total_count" "visited_at"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiTask" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/task/unanswered_disputes" queryName:"result"){dismissed_at id new_count total_count visited_at}}
          `,g=f,h={expectedErrors:["multi_region_routing_target_not_found"]};function useIndexUnansweredDisputesRetrieveQuery(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},zKUY:function(a,b,c){"use strict";var d=c("Vavk");b.a=Object(d.a)({openReviewsLink:{id:"home.tasks.task.openReviews.link",defaultMessage:"View open reviews"},openReviewsTitle:{id:"home.tasks.task.openReviews.title",defaultMessage:"{count, plural, one {[{formattedCount} payment](<TaskLink>) has not been reviewed} other {[{formattedCount} payments](<TaskLink>) have not been reviewed}}."},failedInvoicesLink:{id:"home.tasks.task.failedInvoices.link",defaultMessage:"View failed invoices"},failedInvoicesTitle:{id:"home.tasks.task.failedInvoices.title",defaultMessage:"{count, plural, one {[{formattedCount} invoice](<TaskLink>) has failed} other {[{formattedCount} invoices](<TaskLink>) have failed}}."},unansweredDisputesLink:{id:"home.tasks.task.unansweredDisputes.link",defaultMessage:"View unanswered disputes"},unansweredDisputesTitle:{id:"home.tasks.task.unansweredDisputes.title",defaultMessage:"{count, plural, one {[{formattedCount} dispute](<TaskLink>) has not been answered} other {[{formattedCount} disputes](<TaskLink>) have not been answered}}."},potentiallyFraudulentAccountsLink:{id:"home.tasks.task.potentiallyFraudulentAccounts.link",defaultMessage:"View accounts"},potentiallyFraudulentAccountsTitle:{id:"home.tasks.task.potentiallyFraudulentAccounts.title",defaultMessage:"{count, plural, one {<TaskLink>{formattedCount} account</TaskLink> flagged as potentially fraudulent} other {<TaskLink>{formattedCount} accounts</TaskLink> flagged as potentially fraudulent}}."},newBadge:{id:"home.tasks.badge.new",defaultMessage:"{formattedCount} new"},dismiss:{id:"home.tasks.task.dismiss",defaultMessage:"Dismiss"}})}}])
//# sourceMappingURL=https://sourcemaps.corp.stripe.com/dashboard-fe-statics-srv/dashboard.PEkQ-03.87364d3743.min.js.map