(window["__load"]=window["__load"]||[]).push([["I-Cx-01"],{"+uY4":function(a,b,c){"use strict";c.d(b,"e",function(){return stripeServiceAgreement}),c.d(b,"b",function(){return connectPlatformAgreement}),c.d(b,"a",function(){return e}),c.d(b,"c",function(){return connectedAccountAgreementFullTos}),c.d(b,"d",function(){return connectedAccountAgreementRecipientTos});const d="https://stripe.com",stripeServiceAgreement=a=>{switch(a){case"AU":case"BE":case"BR":case"CA":case"CH":case"DE":case"ES":case"FR":case"GB":case"HK":case"IE":case"IT":case"JP":case"MX":case"NZ":case"SG":case"TH":case"US":return new URL(`/${a}/legal/ssa`,d);default:return new URL(`/legal/ssa/${a}`,d)}},connectPlatformAgreement=a=>{switch(a){case"AE":case"AU":case"AT":case"CA":case"CH":case"DE":case"ES":case"FR":case"ID":case"IN":case"IT":case"JP":case"MY":case"MX":case"TH":case"US":return new URL(`/${a}/legal/connect`,d);default:return new URL(`/legal/connect/${a}`,d)}},e={TERMS_LINK:"https://www.squarespace.com/payments-terms",PRIVACY_LINK:"https://www.squarespace.com/privacy"},connectedAccountAgreementFullTos=a=>"ID"===a?new URL(`/${a.toLowerCase()}/connect-account/legal`,d):new URL(`/${a}/legal/connect-account`,d),connectedAccountAgreementRecipientTos=a=>new URL("/connect-account/legal/recipient",d)},"/qwz":function(a,b,c){"use strict";const d={dataConnector:{aws:{account_id:"030465607062",role_name:"stripe-data-management-s3-connector-role-qa",regions:[{name:"us-west-1",description:"US West (N. California)"},{name:"us-west-2",description:"US West (Oregon)"},{name:"us-east-1",description:"US East (N. Virginia)"},{name:"us-east-2",description:"US East (Ohio)"},{name:"ca-central-1",description:"Canada (Central)"},{name:"eu-west-1",description:"Europe (Ireland)"},{name:"eu-west-2",description:"Europe (London)"},{name:"eu-west-3",description:"Europe (Paris)"},{name:"eu-south-1",description:"Europe (Milan)"},{name:"eu-south-2",description:"Europe (Spain)"},{name:"eu-central-1",description:"Europe (Frankfurt)"},{name:"eu-central-2",description:"Europe (Zurich)"},{name:"eu-north-1",description:"Europe (Stockholm)"},{name:"ap-southeast-1",description:"Asia Pacific (Singapore)"},{name:"ap-southeast-2",description:"Asia Pacific (Sydney)"},{name:"ap-southeast-3",description:"Asia Pacific (Jakarta)"},{name:"ap-southeast-4",description:"Asia Pacific (Melbourne)"},{name:"ap-northeast-1",description:"Asia Pacific (Tokyo)"},{name:"ap-northeast-2",description:"Asia Pacific (Seoul)"},{name:"ap-northeast-3",description:"Asia Pacific (Osaka)"},{name:"ap-south-1",description:"Asia Pacific (Mumbai)"},{name:"ap-south-2",description:"Asia Pacific (Hyderabad)"},{name:"ap-east-1",description:"Asia Pacific (Hong Kong)"},{name:"me-central-1",description:"Middle East (UAE)"},{name:"me-south-1",description:"Middle East (Bahrain)"},{name:"sa-east-1",description:"South America (S\xe3o Paulo)"},{name:"af-south-1",description:"Africa (Cape Town)"}]}}};b.a=d},"06N+":function(a,b,c){"use strict";c.d(b,"a",function(){return useValidateName});var d=c("FCV6"),e=c.n(d),f=c("7PNT"),g=c("M+ja"),h=c("Q+yi");const i="Could not retrieve query.",j="Connector name already exists.",getOptions=a=>({variables:{input:{name:a},v1Context:{betaHeaders:{udap_dc_beta:"v1"}}}}),nameAlreadyExists=a=>0!==a.ajaxDataManagementDataConnections.data.length,handleError=(a,b)=>{const{state:c,dispatch:d}=b,isAlreadyExistsError=a=>a.includes(j);return d(isAlreadyExistsError(a.message)?{type:"SET_ERROR",payload:{id:f.a.DATA_CONNECTION_NAME,message:"Connector name already exists."}}:{type:"SET_NOTICE",payload:{type:"critical",description:"Something went wrong, try again.",step:c.step}}),!1},useValidateName=()=>{const[a]=Object(g.a)();return async b=>{try{const{configuration:c,values:d}=b.state,g=Object(h.a)(c),k=e()(d,g),l=k[f.a.DATA_CONNECTION_NAME];if(l){const m=getOptions(l),{data:n,error:o}=await a(m);if(o||!n)throw new Error(i);if(nameAlreadyExists(n))throw new Error(j)}return!0}catch(p){return handleError(p,b)}}}},"1XXN":function(a,b,c){"use strict";c.d(b,"a",function(){return useGenPresignedUrlMutation});var d=c("bPOr"),e=c("GhF0");const f=d.a`
            mutation GenPresignedUrlMutation($input:OpenapiPostAjaxDataManagementDataConnectionsGenPresignedUrlInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"6f1942f908"){presigned:ajaxDataManagementDataConnectionsGenPresignedUrl(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["url" "upload_path"]fragments:[]nodeLookupMap:[{nodes:["url" "upload_path"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiUserDataAcquisitionPlatformDashboardUploadGenS3PresignedUrl" method:"POST" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections/gen_presigned_url" queryName:"presigned" bodyBuilder:$bodyBuilder){url upload_path}}
          `,g=f,h={onError(a){throw a}};function useGenPresignedUrlMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(e.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},"2gaA":function(a,b,c){"use strict";c.d(b,"a",function(){return getAuthenticationConfig}),c.d(b,"c",function(){return getValuesFromAuthentication}),c.d(b,"b",function(){return getAuthenticationInputFromDrawerState});var d=c("i3qh"),e=c.n(d),f=c("FCV6"),g=c.n(f),h=c("7PNT"),i=c("lKFT"),j=c("wlYy");const isAwsS3AuthData=a=>null!=a&&"external_id"in a&&"account_id"in a,isAppleAppStoreAuthData=a=>null!=a&&"issuer_id"in a&&"key_id"in a&&"vendor_number"in a,isGooglePlayStoreAuthData=a=>null!=a&&"project_id"in a&&"private_key_id"in a&&"client_email"in a&&"client_id"in a&&"app_package_name"in a&&"bucket_name"in a,getAuthenticationConfig=a=>{switch(a.platform){case"aws_s3":return a.aws_s3_auth_data;case"apple_app_store":return a.apple_app_store_auth_data;case"google_play_store":return a.google_play_store_auth_data;default:return}},getValuesFromAppleAppStoreAuthData=a=>{const{issuer_id:b,key_id:c,vendor_number:d}=a;return{[h.a.APP_STORE_ISSUER_ID]:b,[h.a.APP_STORE_KEY_ID]:c,[h.a.APP_STORE_VENDOR_NUMBER]:d}},getValuesFromAwsS3AuthData=a=>{const{account_id:b}=a;return{[h.a.AWS_ACCOUNT_ID]:b?Object(i.b)(b):void 0}},getValuesFromGooglePlayStoreAuthData=a=>{const{project_id:b,private_key_id:c,client_email:d,client_id:e,app_package_name:f,bucket_name:g}=a;return{[h.a.PLAY_STORE_PROJECT_ID]:b,[h.a.PLAY_STORE_PRIVATE_KEY_ID]:c,[h.a.PLAY_STORE_CLIENT_EMAIL]:d,[h.a.PLAY_STORE_CLIENT_ID]:e,[h.a.PLAY_STORE_APP_PACKAGE_NAME]:f,[h.a.PLAY_STORE_BUCKET_NAME]:g}},getValuesFromAuthenticationConfig=a=>{const b=getAuthenticationConfig(a);return isAwsS3AuthData(b)?getValuesFromAwsS3AuthData(b):isAppleAppStoreAuthData(b)?getValuesFromAppleAppStoreAuthData(b):isGooglePlayStoreAuthData(b)?getValuesFromGooglePlayStoreAuthData(b):{}},getValuesFromAuthentication=a=>Object.assign({},getValuesFromAuthenticationConfig(a)),getConfiguredFields=a=>{const fieldsFromStep=a=>a.fields.map(a=>a.id);return(null==a?void 0:a.map(fieldsFromStep).flat())||[]},getAppStoreCredentialsFromFieldValues=a=>{const b=a[h.a.APP_STORE_PRIVATE_KEY],c=a[h.a.APP_STORE_PRIVATE_KEY_FILENAME],d=Object.assign({},b&&{private_key:b},c&&{private_key_filename:c});return e()(d)?{}:{apple_app_store_credential:d}},getGooglePlayStoreCredentialsFromFieldValues=a=>{const b=a[h.a.PLAY_STORE_PRIVATE_KEY],c=Object.assign({},b&&{service_account_private_key:b});return e()(c)?{}:{google_play_store_credential:c}},getAppleAppStoreAuthDataFromFieldValues=a=>{const b=a[h.a.APP_STORE_ISSUER_ID],c=a[h.a.APP_STORE_KEY_ID],d=a[h.a.APP_STORE_VENDOR_NUMBER],f=Object.assign({},b&&{issuer_id:b},c&&{key_id:c},d&&{vendor_number:d});return e()(f)?void 0:f},getGooglePlayStoreAuthDataFromFieldValues=a=>{const b=a[h.a.PLAY_STORE_PROJECT_ID],c=a[h.a.PLAY_STORE_PRIVATE_KEY_ID],d=a[h.a.PLAY_STORE_CLIENT_EMAIL],f=a[h.a.PLAY_STORE_CLIENT_ID],g=a[h.a.PLAY_STORE_APP_PACKAGE_NAME],i=a[h.a.PLAY_STORE_BUCKET_NAME],j=Object.assign({},b&&{project_id:b},c&&{private_key_id:c},d&&{client_email:d},f&&{client_id:f},g&&{app_package_name:g},i&&{bucket_name:i});return e()(j)?void 0:j},getAwsS3AuthDataFromFieldValues=a=>{const b=a[h.a.AWS_ACCOUNT_ID],c=Object.assign({},b&&{account_id:Object(i.a)(b)});return e()(c)?void 0:c},getAuthData=(a,b)=>{switch(a){case"aws_s3":return getAwsS3AuthDataFromFieldValues(b);case"apple_app_store":return getAppleAppStoreAuthDataFromFieldValues(b);case"google_play_store":return getGooglePlayStoreAuthDataFromFieldValues(b);default:return{}}},getCredentials=(a,b)=>{switch(a){case"apple_app_store":return getAppStoreCredentialsFromFieldValues(b);case"google_play_store":return getGooglePlayStoreCredentialsFromFieldValues(b);default:return{}}},getAuthenticationConfigInput=a=>{const{configuration:b,platform:c,values:d}=a,e=getConfiguredFields(b),f=g()(d,e),h={},i=getAuthData(c,f);if(i){const j=`${c}_auth_data`,k=getAuthData(c,d);h[j]=Object.assign({},k,i)}return h},getCredentialsInput=a=>{const{configuration:b,platform:c,values:d}=a;if(c!==j.c.APPLE_APP_STORE&&c!==j.c.GOOGLE_PLAY_STORE)return;const e=getConfiguredFields(b),f=g()(d,e),h=getCredentials(c,f);if(h){const i=getCredentials(c,d);return Object.assign({},i,h)}},isUpdateState=a=>!!a.authenticationId,isUpdateInput=a=>"id"in a,getAuthenticationInputFromDrawerState=a=>{const b={},{authenticationId:c,configuration:d,platform:f,values:i}=a,j=getConfiguredFields(d),k=g()(i,j),l=getAuthenticationConfigInput(a),m=getCredentialsInput(a),n=isUpdateState(a)?k[h.a.DATA_CONNECTION_NAME]:i[h.a.DATA_CONNECTION_NAME],o=Object.assign(b,isUpdateState(a)?{id:c}:{platform:f},n&&{name:n},l,m);return isUpdateInput(o)&&!e()(l)&&(o.status="valid"),o}},"4/db":function(a,b,c){"use strict";var d=c("0qsp");const e=d.createContext({state:null,dispatch:null});b.a=e},"43FE":function(a,b,c){"use strict";var d=c("ss+H");b.a=d.a},"4AQB":function(a,b,c){"use strict";var d=c("0qsp"),e=c("szBP"),f=c("5qGg"),g=c("43FE"),h=c("wlYy");const PermissionsSection=a=>{let{platform:b}=a;switch(b){case h.c.AWS_S3:return d.createElement(f.a,null);case h.c.GOOGLE_PLAY_STORE:return d.createElement(g.a,null);case h.c.APPLE_APP_STORE:case h.c.ADYEN:case h.c.PAYPAL:return d.createElement(d.Fragment,null);default:Object(e.s)(b)}};b.a=PermissionsSection},"5+jI":function(a,b,c){"use strict";c.d(b,"a",function(){return useExternalIdGenMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation ExternalIdGenMutation($input:OpenapiPostAjaxDataManagementDataConnectionsExternalIdGenInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"59f8cd4a85"){external:ajaxDataManagementDataConnectionsExternalIdGen(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["id"]fragments:[]nodeLookupMap:[{nodes:["id"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiExternalIdGen" method:"POST" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections/external_id_gen" queryName:"external" bodyBuilder:$bodyBuilder){id}}
          `,g=f,h={variables:{v1Context:{betaHeaders:{udap_dc_beta:"v1"}}},onError(a){throw a}};function useExternalIdGenMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a,{variables:Object.assign({},h.variables,a.variables)}))}const i={};f.permissions=i},"5qGg":function(a,b,c){"use strict";var d=c("gxAE");b.a=d.a},"6Yd5":function(a,b,c){"use strict";c.d(b,"b",function(){return getAwsRegions}),c.d(b,"a",function(){return getAWSTrustPolicy});var d=c("/qwz"),e=c("HsXN");const getAwsRegions=()=>d.a.dataConnector.aws.regions,getDataConnectorARN=a=>{const{account_id:b}=d.a.dataConnector.aws;return`arn:aws:iam::${b}:role/${a}`},getAWSTrustPolicy=(a,b)=>{const c=getDataConnectorARN(b);return e.c.replace(e.g,c).replace(e.e,a)}},"7PNT":function(a,b,c){"use strict";c.d(b,"a",function(){return d});let d;!function(a){a.APP_STORE_PRIVATE_KEY="app_store_private_key",a.APP_STORE_PRIVATE_KEY_FILENAME="app_store_private_key_filename",a.APP_STORE_KEY_ID="app_store_key_id",a.APP_STORE_ISSUER_ID="app_store_issuer_id",a.APP_STORE_VENDOR_NUMBER="app_store_vendor_number",a.AWS_ACCOUNT_ID="aws_account_id",a.AWS_S3_BUCKET="aws_s3_bucket",a.AWS_S3_PREFIX="aws_s3_prefix",a.AWS_S3_REGION="aws_s3_region",a.DATA_CONNECTION_NAME="data_connection_name",a.DATA_TEMPLATE="data_template",a.PLAY_STORE_CREDENTIALS_STRING="play_store_credentials_string",a.PLAY_STORE_CREDENTIALS_FILENAME="play_store_credentials_filename",a.PLAY_STORE_PROJECT_ID="play_store_project_id",a.PLAY_STORE_PRIVATE_KEY="play_store_private_key",a.PLAY_STORE_PRIVATE_KEY_ID="play_store_private_key_id",a.PLAY_STORE_CLIENT_EMAIL="play_store_client_email",a.PLAY_STORE_CLIENT_ID="play_store_client_id",a.PLAY_STORE_APP_PACKAGE_NAME="play_store_app_package_name",a.PLAY_STORE_BUCKET_NAME="play_store_bucket_name"}(d||(d={}))},"92bx":function(a,b,c){"use strict";c.d(b,"a",function(){return j});var d=c("Vavk"),e=c("wlYy"),f=c("7PNT");const g=Object(d.a)({editDataConnectionNameDrawerTitleRequirements:{id:"udap.dataConnector.googlePlayStore.editDataConnectionName.drawer.title.requirements",defaultMessage:"Edit name"},editDataConnectionNameDrawerSubtitlePlayStore:{id:"udap.dataConnector.googlePlayStore.editDataConnectionName.drawer.subtitle.playStore",defaultMessage:"Set up Stripe Connector for Google Play Store"},buttonLabelBack:{id:"udap.dataConnector.googlePlayStore.button.label.previous",defaultMessage:"Back"},saveChanges:{id:"udap.dataConnector.googlePlayStore.button.label.saveChanges",defaultMessage:"Save changes"}}),h=e.c.GOOGLE_PLAY_STORE,i={header:{title:g.editDataConnectionNameDrawerTitleRequirements,subtitle:g.editDataConnectionNameDrawerSubtitlePlayStore},footer:{primaryLabel:g.saveChanges,secondaryLabel:g.buttonLabelBack},body:[{component:e.b.PlatformIconsCard,props:{platform:h}},{component:e.b.FormFieldsSection,props:{fields:[f.a.DATA_CONNECTION_NAME]}}],fields:[{id:f.a.DATA_CONNECTION_NAME,required:!0}],actions:{onExit:[e.a.ValidateDataConnectionName,e.a.UpdateDataConnection]}},j=[i]},"9gDP":function(a,b,c){"use strict";c.d(b,"a",function(){return i});var d=c("m72O"),e=c("wlYy"),f=c("7PNT");const g=e.c.AWS_S3,h={header:{title:d.a.updateDrawerTitleDataTemplate,subtitle:d.a.updateDrawerSubtitleS3},footer:{primaryLabel:d.a.buttonLabelSave,secondaryLabel:d.a.buttonLabelBack},body:[{component:e.b.FilePreviewSection,props:{platform:g}},{component:e.b.Divider},{component:e.b.ContentSection,props:{heading:d.a.dataTemplateSelectHeading}},{component:e.b.FormFieldsSection,props:{fields:[f.a.DATA_TEMPLATE]}}],fields:[{id:f.a.DATA_TEMPLATE,required:!0}],actions:{onEnter:[e.a.CreateFilePreview],onExit:[e.a.UpdateDataConnection]}},i=[h]},A1M3:function(a,b,c){"use strict";c.d(b,"a",function(){return i});var d=c("m72O"),e=c("wlYy"),f=c("7PNT");const g=e.c.AWS_S3,h={header:{title:d.a.updateDrawerTitleViewPermissions,subtitle:d.a.updateDrawerSubtitleS3},footer:{primaryLabel:d.a.closeButtonLabel,secondaryLabel:d.a.closeButtonLabel,primaryButtonType:"secondary"},body:[{component:e.b.PermissionsSection,props:{platform:g}}],fields:[{id:f.a.DATA_TEMPLATE,required:!0}],actions:{}},i=[h]},Ae60:function(a,b,c){"use strict";var d=c("aJyS");b.a=d.a},AhHR:function(a,b,c){"use strict";var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("xGRT"),h=c("K+RN"),i=c("nPYo"),j=c("a/jI");const FormattedMessageDescriptor=a=>{let{input:b}=a;const c=Object(g.a)();if(Array.isArray(b)){const[d,j]=b,k="regular"===b[2]?"label.medium":"label.medium.emphasized",l=j.map(a=>{let[b,d]=a;return"string"==typeof d?[b,f.createElement(i.a.span,null,d)]:"function"==typeof d?[b,d]:[b,f.createElement(i.a.span,{css:{font:k}},c.formatMessage(d))]});return f.createElement(h.a,e()({},d,{values:Object.fromEntries(l)}))}return"string"!=typeof b?f.createElement(h.a,b):f.createElement(f.Fragment,null,b)},ListComponent=a=>{let{list:b,listStyleType:c="decimal",inline:d=!1}=a;const e=d?"0px":"medium";return f.createElement(i.a.div,{css:{marginX:"medium",marginY:"small",marginBottom:e,fontSize:"label.medium"}},f.createElement("ol",{style:{listStyleType:c}},b.map((a,c)=>{const d={listStyle:"inherit",marginBottom:c<b.length-1?"4px":"0"};return f.createElement("li",{key:`content-module-element-${c}`,style:d},f.createElement(FormattedMessageDescriptor,{input:a}))})))},ContentSection=a=>{let{heading:b,label:c,body:d,list:e,listStyleType:g,inline:h=!1}=a;const marginBottom=(a,b)=>a?"space.0":b?"medium":"xsmall",k=marginBottom(h,d);return f.createElement(i.a.div,{css:{marginBottom:k,lineHeight:1.65}},b&&f.createElement(i.a.div,{css:{marginBottom:"xsmall",font:"label.medium.emphasized"}},f.createElement(i.a.span,null,f.createElement(FormattedMessageDescriptor,{input:b}))),c&&f.createElement(i.a.div,{css:{marginBottom:"xsmall"}},f.createElement(j.a,null,f.createElement(FormattedMessageDescriptor,{input:c}))),d&&f.createElement(i.a.div,{css:{marginBottom:"xsmall",font:"label.medium"}},f.createElement(i.a.span,null,f.createElement(FormattedMessageDescriptor,{input:d}))),e&&f.createElement(ListComponent,{list:e,listStyleType:g,inline:h}))};b.a=ContentSection},B7dD:function(a,b,c){"use strict";c.d(b,"a",function(){return LegalDisclaimerSection});var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("Vavk"),h=c("K+RN"),i=c("nPYo"),j=c("FfI9"),k=c("09jD"),l=c("wlYy"),m=c("+uY4");const n=Object(g.a)({appStoreCredentialDisclaimer:{id:"udap.dataConnector.dataConnection.appStoreCredentialDisclaimer",defaultMessage:"Apple and App Store are trademarks of Apple Inc., registered in the U.S. and other countries and regions."},appStoreAuthDisclaimer:{id:"udap.dataConnector.dataConnection.appStoreAuthDisclaimer",defaultMessage:"By clicking “Authenticate” you agree that you've obtained the necessary permissions to do so."},genericDisclaimer:{id:"udap.dataConnector.dataConnection.genericDisclaimer",defaultMessage:"By clicking “Authenticate” you agree that you've obtained the necessary permissions to grant Stripe access to your accounts and data."},legalDisclaimer:{id:"udap.dataConnector.dataConnection.legalDisclaimer",defaultMessage:"Stripe will use and store this data in accordance with {termsOfService} and {privacyPolicy}."},playStoreCredentialDisclaimer:{id:"udap.dataConnector.dataConnection.playStoreCredentialDisclaimer",defaultMessage:"Google Play Store is a trademark of {hyperlink} or its affiliates."},termsOfService:{id:"udap.dataConnector.dataConnection.termsOfService",defaultMessage:"terms of service"},privacyPolicy:{id:"udap.dataConnector.dataConnection.privacyPolicy",defaultMessage:"privacy policy"}}),o="https://policies.google.com/",PlatformDisclaimer=a=>{let{platform:b,step:c}=a;const d=Object(k.x)(),g=Object(k.g)(),p=g.site(m.e(d.country).pathname),q=g.site("/privacy");return f.createElement(f.Fragment,null,b===l.c.APPLE_APP_STORE&&f.createElement(f.Fragment,null,"auth"===c&&f.createElement(i.a.div,{css:{font:"label.small"}},f.createElement(h.a,n.appStoreAuthDisclaimer)),f.createElement(i.a.div,{css:{font:"label.small"}},f.createElement(h.a,n.appStoreCredentialDisclaimer))),b===l.c.GOOGLE_PLAY_STORE&&f.createElement(i.a.div,{css:{font:"label.small"}},f.createElement(h.a,e()({},n.playStoreCredentialDisclaimer,{values:{hyperlink:f.createElement(j.a,{href:o,target:"_blank",type:"secondary"},"Google Inc")}}))),"auth"!==c&&f.createElement(i.a.div,{css:{font:"label.small"}},f.createElement(h.a,e()({},n.legalDisclaimer,{values:{termsOfService:f.createElement(j.a,{href:p,target:"_blank",type:"secondary"},f.createElement(h.a,n.termsOfService)),privacyPolicy:f.createElement(j.a,{href:q,target:"_blank",type:"secondary"},f.createElement(h.a,n.privacyPolicy))}}))))},GenericDisclaimer=()=>f.createElement(h.a,n.genericDisclaimer),LegalDisclaimerSection=a=>{let{platform:b,step:c}=a;return f.createElement(i.a.div,{css:{gap:"small",height:"fill",maxHeight:"fit",padding:"space.0",marginTop:"medium",stack:"y",alignY:"bottom",textColor:"subdued",font:"label.small"}},b?f.createElement(PlatformDisclaimer,{platform:b,step:c}):f.createElement(GenericDisclaimer,null))}},BVEF:function(a,b,c){"use strict";c.d(b,"a",function(){return useCreateFilePreviewMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation CreateFilePreviewMutation($input:OpenapiPostAjaxDataManagementDataConnectionsPreviewInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"66423adec6"){file_preview:ajaxDataManagementDataConnectionsPreview(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["file_count" "files"]fragments:[]nodeLookupMap:[{nodes:["file_count" "files"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiPreviewDataConnectionStripeType" method:"POST" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections/preview" queryName:"file_preview" bodyBuilder:$bodyBuilder){file_count files}}
          `,g=f,h={variables:{v1Context:{betaHeaders:{udap_dc_beta:"v1"}}},fetchPolicy:"no-cache",expectedErrors:["STS: Access Denied","The specified bucket does not exist"],onError(a){throw a}};function useCreateFilePreviewMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a,{variables:Object.assign({},h.variables,a.variables)}))}const i={};f.permissions=i},D9qh:function(a,b,c){"use strict";c.d(b,"a",function(){return i});var d=c("m72O"),e=c("wlYy"),f=c("7PNT");const g=e.c.AWS_S3,h={header:{title:d.a.updateDrawerTitleEditName,subtitle:d.a.updateDrawerSubtitleS3},footer:{primaryLabel:d.a.buttonLabelSave,secondaryLabel:d.a.buttonLabelBack},body:[{component:e.b.PlatformIconsCard,props:{platform:g}},{component:e.b.FormFieldsSection,props:{fields:[f.a.DATA_CONNECTION_NAME]}}],fields:[{id:f.a.DATA_CONNECTION_NAME,required:!0}],actions:{onExit:[e.a.ValidateDataConnectionName,e.a.UpdateDataConnection]}},i=[h]},Djp2:function(a,b,c){"use strict";var d=c("0qsp"),e=c("szBP"),f=c("wi2u"),g=c("nPYo"),h=c("Olvt"),i=c("wlYy"),j=c("xHh/"),k=c("PAOL"),l=c("UtHm"),m=c("HIH1"),n=c("HQu2"),o=c("Ae60"),p=c("phkg"),q=c("Snwq");const getComponentFromDefinition=a=>{const{component:b}=a;switch(b){case i.b.ContentSection:return d.createElement(j.a,a.props);case i.b.CopyPasteableTextArea:return d.createElement(k.a,a.props);case i.b.Divider:return d.createElement(f.a,{css:{marginBottom:"large"}});case i.b.FilePreviewSection:return d.createElement(l.a,a.props);case i.b.FormFieldsSection:return d.createElement(m.a,a.props);case i.b.LegalDisclaimerSection:return d.createElement(n.a,a.props);case i.b.PlatformIconsCard:return d.createElement(o.a,a.props);case i.b.PermissionsSection:return d.createElement(q.a,a.props);default:Object(e.s)(b)}},DataConnectionDrawerBody=a=>{let{body:b,hasSteps:c}=a;return d.createElement(g.a.div,{uses:[Object(h.b)({position:"relative",padding:"medium",height:"fill",stack:"y",alignY:"top",overflowY:"scroll"}),Object(h.b)({height:`calc(100% - ${c?"152px":"130px"})`})]},d.createElement(p.a,null),b.length&&b.map((a,b)=>d.createElement(d.Fragment,{key:`data-connection-drawer-component-${a.component}-${b}`},getComponentFromDefinition(a))))};b.a=DataConnectionDrawerBody},HIH1:function(a,b,c){"use strict";var d=c("aGws");b.a=d.a},HQu2:function(a,b,c){"use strict";var d=c("B7dD");b.a=d.a},HsXN:function(a,b,c){"use strict";c.d(b,"b",function(){return d}),c.d(b,"d",function(){return e}),c.d(b,"g",function(){return f}),c.d(b,"e",function(){return g}),c.d(b,"c",function(){return h}),c.d(b,"a",function(){return i}),c.d(b,"f",function(){return j});const d=String.raw`stripe-data-management-read-role`,e=String.raw`USER_TARGET_BUCKET`,f=String.raw`<STRIPE_ARN_PLACEHOLDER>`,g=String.raw`<EXTERNAL_ID_PLACEHOLDER>`,h=String.raw`{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": "<STRIPE_ARN_PLACEHOLDER>"
      },
      "Action": "sts:AssumeRole",
      "Condition": {
        "StringEquals": {
          "sts:ExternalId": "<EXTERNAL_ID_PLACEHOLDER>"
        }
      }
    }
  ]
}`,i=String.raw`{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::USER_TARGET_BUCKET/*",
        "arn:aws:s3:::USER_TARGET_BUCKET"
      ]
    }
  ]
}`,j=String.raw`resource.name.startsWith("projects/_/buckets/<cloud-storage-uri>") && (
  resource.type == "storage.googleapis.com/Bucket" ||
  resource.type == "storage.googleapis.com/Object")`},Huhf:function(a,b,c){"use strict";var d=c("TSQu"),e=c("wlYy");c.d(b,"a",function(){return e.c}),b.b=d.a},IjuE:function(a,b,c){"use strict";var d=c("0qsp"),e=c("xGRT"),f=c("pA0n");const useMessage=a=>({getDescriptor:b=>"function"==typeof b?b(a):a.formatMessage(b)}),DataConnectionDrawerHeader=a=>{let{header:{title:b,subtitle:c},step:g,totalSteps:h}=a;const i=Object(e.a)(),j=useMessage(i),k=h>1;return d.createElement(f.e,{title:j.getDescriptor(b),subtitle:k?j.getDescriptor(c):void 0,currentStep:k?g:void 0,totalSteps:k?h:void 0})};b.a=DataConnectionDrawerHeader},JTBd:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("K+RN"),h=c("Au6I"),i=c("ZgPq"),j=c("nPYo"),k=c("a/jI"),l=c("ySIj");const m=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.appleAppStorePrivateKey.label",defaultMessage:"Upload private key"},suffix:{id:"udap.dataConnector.dataConnection.field.appleAppStorePrivateKey.suffix",defaultMessage:"or drag the file here"},fieldLabel:{id:"udap.dataConnector.dataConnection.field.appleAppStorePrivateKey.fieldLabel",defaultMessage:"Private key"},required:{id:"udap.dataConnector.dataConnection.field.appleAppStorePrivateKey.validation.required",defaultMessage:"{field} is required"},mimeType:{id:"udap.dataConnector.dataConnection.field.appleAppStorePrivateKey.validation.mimeType",defaultMessage:"Correct file format {format}"}}),validateMimeType=a=>new Promise(b=>{b(!!a&&a.name.endsWith(".p8"))}),toFile=(a,b)=>new File([a],b,{type:""}),AppleAppStorePrivateKeyDropzoneField=a=>{let{field:b,onChange:c,onBlur:e}=a;const n=Object(f.a)(),o=d.useRef("private_key.p8"),[p,q]=d.useState(b.value),[r,s]=d.useState(p?toFile(p,o.current):null),t=d.useMemo(()=>[{valid:validateMimeType(r),label:n.formatMessage(m.mimeType,{format:"(.p8)"})}],[r,n]),u=d.useMemo(()=>[{pattern:".p8$",message:n.formatMessage(m.required,{field:n.formatMessage(m.label)})}],[n]),handleFile=function(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:null;s(a)},v=d.useCallback(()=>{e(u,null==r?void 0:r.name)},[u,e,null==r?void 0:r.name]),w=d.useCallback(()=>{s(null),q(""),c(""),v()},[v,c]);d.useEffect(()=>{const a=setTimeout(()=>{e(u,null==r?void 0:r.name)},1e3);if(b.value===p)return()=>clearTimeout(a)},[b.value,u,e,null==r?void 0:r.name,p]),d.useEffect(()=>{var a;if(r){const b=new FileReader;b.onload=a=>{var b,d;q(null===(b=a.target)|| void 0===b?void 0:b.result),c(null===(d=a.target)|| void 0===d?void 0:d.result),v()},b.readAsText(r)}o.current=null!==(a=null==r?void 0:r.name)&& void 0!==a?a:"private_key.p8"},[r,v,c]);const x=Object(i.b)();return d.createElement(j.a.div,{css:{stack:"y",gap:"small",paddingBottom:"large"}},d.createElement(j.a.div,{css:{stack:"y",gap:"space.0"}},d.createElement(k.a,{id:x,css:{display:"none",width:"fit"}},d.createElement(g.a,m.fieldLabel))),d.createElement(h.a,{"data-db-analytics-name":"dataConnectionDrawerFileUploader",className:"db-FileUploadWrapper-droparea db-AppleAppStorePrivateKeyDropzoneField-droparea",name:"dataConnectionDrawerFileUploader",label:d.createElement(g.a,m.label),suffix:d.createElement(g.a,m.suffix),file:r,onFileClear:w,onFileSelection:handleFile,required:!0}),d.createElement(l.a,{items:t}))};b.a=AppleAppStorePrivateKeyDropzoneField},Jlag:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("AZzO"),h=c("zw7C");const i=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.appleAppStoreVendorNumber.label",defaultMessage:"Vendor number"},placeholder:{id:"udap.dataConnector.dataConnection.field.appleAppStoreVendorNumber.placeholder",defaultMessage:"Paste vendor number"},required:{id:"udap.dataConnector.dataConnection.field.appleAppStoreVendorNumber.validation.required",defaultMessage:"{field} is required"}}),AppleAppStoreVendorNumberField=a=>{let{field:b,onChange:c,onBlur:e}=a;const j=Object(f.a)(),[k,l]=d.useState(b.value),m=d.useMemo(()=>[{pattern:"^.",message:j.formatMessage(i.required,{field:j.formatMessage(i.label)})}],[j]);d.useEffect(()=>{const a=setTimeout(()=>e(m,k),1e3);if(b.value===k)return()=>clearTimeout(a)},[b.value,e,m,k]);const handleChange=a=>{l(a.target.value),c(a.target.value)},handleBlur=()=>{e(m,k)};return d.createElement(h.a,null,d.createElement(g.c,{required:!0,css:{marginBottom:"xlarge"},value:k||"",label:j.formatMessage(i.label),hiddenElements:["label"],placeholder:j.formatMessage(i.placeholder),error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur}))};b.a=AppleAppStoreVendorNumberField},"Ku+c":function(a,b,c){"use strict";var d=c("Vavk");const e=Object(d.a)({create:{id:"udap.components.connectors.dataConnectionButton.create",defaultMessage:"Add connector"},edit:{id:"udap.components.connectors.dataConnectionButton.edit",defaultMessage:"Edit"},editAuthentication:{id:"udap.components.connectors.dataConnectionButton.editAuthentication",defaultMessage:"Re-authenticate"},editName:{id:"udap.components.connectors.dataConnectionButton.editName",defaultMessage:"Edit name"},showPolicies:{id:"udap.components.connectors.dataConnectionButton.showPolicies",defaultMessage:"View policies"}});b.a=e},LG4H:function(a,b,c){"use strict";var d=c("0qsp"),e=c("4/db"),f=c("xUCD");const g={errors:{},isLoading:!0,isOpen:!1,step:1,values:{}},DataConnectionDrawerProvider=a=>{let{children:b}=a;const[c,h]=d.useReducer(f.a,g);return d.useEffect(()=>{c.isOpen||h({type:"SET_STATE",payload:g})},[c.isOpen]),d.createElement(e.a.Provider,{value:{state:c,dispatch:h}},b)};b.a=DataConnectionDrawerProvider},LTch:function(a,b,c){"use strict";c.d(b,"a",function(){return useGeneratePresignedUrl});var d=c("0qsp"),e=c("1XXN");const getOptions=a=>({variables:{input:{filename:a}}});function useGeneratePresignedUrl(){const[a]=Object(e.a)(),b=d.useCallback(b=>{const c=getOptions(b);return a(c)},[a]);return async a=>{var c,d;const{data:e,errors:f}=await b(a);return{data:{url:null==e?void 0:null===(c=e.presigned)|| void 0===c?void 0:c.url,upload_path:null==e?void 0:null===(d=e.presigned)|| void 0===d?void 0:d.upload_path},errors:f}}}},"M+ja":function(a,b,c){"use strict";c.d(b,"a",function(){return useGetAllDataConnectionsLazyQuery});var d=c("81gb"),e=c("bPOr");const f=e.a`
            query GetAllDataConnectionsQuery($input:OpenapiGetAjaxDataManagementDataConnectionsInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"1420ab9675"){ajaxDataManagementDataConnections(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["data.authentication_id" "data.authentication_platform" "data.aws_s3_config.bucket_name" "data.aws_s3_config.path" "data.aws_s3_config.region" "data.aws_s3_config.source_data_format" "data.created" "data.description" "data.file_last_sync.synced_at" "data.file_last_sync.filename" "data.last_synced_at" "data.id" "data.livemode" "data.merchant" "data.metadata" "data.name" "data.status" "data.error" "has_more"]fragments:[]nodeLookupMap:[{nodes:["authentication_id" "authentication_platform" "created" "description" "last_synced_at" "id" "livemode" "merchant" "metadata" "name" "status" "error"]parentPath:"data"}{nodes:["bucket_name" "path" "region" "source_data_format"]parentPath:"data.aws_s3_config"}{nodes:["synced_at" "filename"]parentPath:"data.file_last_sync"}{nodes:["has_more"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiGetAjaxDataManagementDataConnections" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections" queryName:"ajaxDataManagementDataConnections"){data@type(name:"OpenapiDataConnectionStripeType"){authentication_id authentication_platform aws_s3_config@type(name:"OpenapiDataConnectionApiResourceAwss3ConfigField"){bucket_name path region source_data_format}created description file_last_sync@type(name:"OpenapiDataConnectionApiResourceFileBasedLastSyncField"){synced_at filename}last_synced_at id livemode merchant metadata name status error}has_more}}
          `,g=f,h={};function useGetAllDataConnectionsLazyQuery(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},MANHQ:function(a,b,c){"use strict";c.d(b,"a",function(){return useExternalId});var d=c("0qsp"),e=c("5+jI");const getOptions=a=>({variables:{input:{authentication_platform:a}}});function useExternalId(a){var b;const[c,{loading:f,error:g,data:h}]=Object(e.a)(),i=d.useMemo(()=>getOptions(a),[a]),j=d.useCallback(()=>{c(i)},[c,i]);return d.useEffect(()=>j(),[j]),{loading:f,error:g,data:null==h?void 0:null===(b=h.external)|| void 0===b?void 0:b.id,refetch:j}}},N0Eb:function(a,b,c){"use strict";var d=c("Vavk");const e=Object(d.a)({consumerDescriptionRecon:{id:"dataManagement.userconsent.consumer.description.recon",defaultMessage:"Stripe Reconciliation aligns your transactions with charges and refunds. It needs your financial data to ensure accurate and reliable verification, providing a comprehensive reconciliation process."},consumerDescriptionTax:{id:"dataManagement.userconsent.consumer.description.tax",defaultMessage:"Stripe Tax enables tax calculation on one-time and recurring payments made via Checkout. It requires your financial data to ensure precise taxation, streamlining your payment procedures."},consumerDescriptionRevRec:{id:"dataManagement.userconsent.consumer.description.revrec",defaultMessage:"Revenue Recognition lets you set custom rules for handling revenue treatments tailored to your business needs. To achieve this, it requires your financial data to create accurate and specific revenue management strategies."},consumerDescriptionBilling:{id:"dataManagement.userconsent.consumer.description.billing",defaultMessage:"Stripe Billing helps you send invoices, with inherent support for credit and debit card payments. It uses your financial data to ensure seamless and precise invoicing, facilitating smoother transactions."},sharedPlatformUapHeading1:{id:"dataManagement.userconsent.sharedPlatorm.uap.heading",defaultMessage:"Products sharing the same internal system"}});b.a=e},"NA+O":function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("AZzO"),h=c("zw7C");const i=3,j=63,k="^([a-z0-9.-]+)$",l=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.awsS3Bucket.label",defaultMessage:"Bucket name"},description:{id:"udap.dataConnector.dataConnection.field.awsS3Bucket.description",defaultMessage:"Specify the bucket — we'll fetch data from here."},placeholder:{id:"udap.dataConnector.dataConnection.field.awsS3Bucket.placeholder",defaultMessage:"stripe-example-bucket-name"},required:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.required",defaultMessage:"{field} is required"},minLength:{id:"udap.dataConnector.dataConnection.field.awsS3Bucket.validation.minLength",defaultMessage:"{field} must contain at least {count} characters"},maxLength:{id:"udap.dataConnector.dataConnection.field.awsS3Bucket.validation.maxLength",defaultMessage:"{field} cannot contain more than {count} characters"},allowedCharacters:{id:"udap.dataConnector.dataConnection.field.awsS3Bucket.validation.allowedCharacters",defaultMessage:"{field} can consist only of lowercase letters, numbers, dots (.), and hyphens (-)"}}),AwsS3BucketField=a=>{let{field:b,onChange:c,onBlur:e}=a;const m=Object(f.a)(),n=d.useRef(!1),[o,p]=d.useState(b.value),q=d.useMemo(()=>[{pattern:"^.",message:m.formatMessage(l.required,{field:m.formatMessage(l.label)})},{pattern:`^(.{${i},})$`,message:m.formatMessage(l.minLength,{field:m.formatMessage(l.label),count:m.formatNumber(i)})},{pattern:`^(.{0,${j}})$`,message:m.formatMessage(l.maxLength,{field:m.formatMessage(l.label),count:m.formatNumber(j)})},{pattern:k,message:m.formatMessage(l.allowedCharacters,{field:m.formatMessage(l.label)})}],[m]);d.useEffect(()=>{const a=setTimeout(()=>e(q,o),1e3);if(n.current){if(b.value===o)return()=>clearTimeout(a)}else n.current=!0},[b.value,e,q,o]);const handleChange=a=>{p(a.target.value),c(a.target.value)},handleBlur=()=>{e(q,o)};return d.createElement(h.a,null,d.createElement(g.c,{required:!0,css:{marginBottom:"xlarge"},value:o||"",label:m.formatMessage(l.label),description:m.formatMessage(l.description),placeholder:m.formatMessage(l.placeholder),error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur}))};b.a=AwsS3BucketField},NS1T:function(a,b,c){"use strict";c.d(b,"a",function(){return useCreateConnector});var d=c("8OBj"),e=c.n(d),f=c("SyLY"),g=c("siLG"),h=c("tCiI"),i=c("2gaA"),j=c("qx3r");const k="Could not retrieve query.",handleSpecificErrorMessages=(a,b)=>"apple_app_store"===b.state.platform||"google_play_store"===b.state.platform?a:"Something went wrong. Click on 'Done' again.",handleError=(a,b)=>{const{state:c,dispatch:d}=b;return d({type:"SET_NOTICE",payload:{type:"critical",description:handleSpecificErrorMessages(a.message,b),step:c.step}}),!1},createAuthentication=async(a,b)=>{const{state:c,dispatch:d}=a,e=Object(i.b)(c),f={variables:{input:e,v1Context:{betaHeaders:{udap_dc_beta:"v1"}}}},{data:g,error:h}=await b(f);if(h||!(null!=g&&g.ajaxDataManagementAuthentications))throw h;return d({type:"SET_AUTHENTICATION_ID",payload:g.ajaxDataManagementAuthentications.id}),g.ajaxDataManagementAuthentications.id},createDataConnection=async(a,b,c)=>{const{state:d}=b,f=Object(j.a)(d),g={variables:{input:e()(e()({},f),{},{authentication_id:a}),v1Context:{betaHeaders:{udap_dc_beta:"v1"}}}},{data:i,error:l}=await c(e()(e()({},g),{},{fetchPolicy:"network-only",refetchQueries:[h.b]}));if(l||!(null!=i&&i.ajaxDataManagementDataConnections))throw new Error(k);return i.ajaxDataManagementDataConnections.id},useCreateConnector=()=>{const[a]=Object(f.a)(),[b]=Object(g.a)();return async c=>{try{var d;const e=null!==(d=c.state.authenticationId)&& void 0!==d?d:await createAuthentication(c,a),f=await createDataConnection(e,c,b);return!!f}catch(g){return handleError(g,c)}}}},PQiB:function(a,b,c){"use strict";c.d(b,"a",function(){return PermissionPolicyContent});var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("Vavk"),h=c("K+RN"),i=c("nPYo"),j=c("wz/5"),k=c("HsXN");const l=Object(g.a)({heading:{id:"udap.dataConnector.drawer.permission.aws_s3.permissionPolicy.heading",defaultMessage:"Permission policy"},beforeContentOne:{id:"udap.dataConnector.drawer.permission.aws_s3.permissionPolicy.beforeContentOne",defaultMessage:"In your AWS IAM dashboard, navigate to {location}."},beforeContentTwo:{id:"udap.dataConnector.drawer.permission.aws_s3.permissionPolicy.beforeContentTwo",defaultMessage:"Select {option}."},afterContent:{id:"udap.dataConnector.drawer.permission.aws_s3.permissionPolicy.afterContent",defaultMessage:"Copy this code block and replace the existing code. Replace the {placeholder} placeholder with your intended bucket name. Add {tags}, a {name}, and then {action}."}}),boldText=a=>f.createElement(i.a.span,{css:{fontWeight:"bold"}},a),PermissionPolicyContent=a=>{let{testId:b}=a;const c=f.createElement(h.a,l.heading),d=f.createElement(i.a.div,{css:{stack:"y",gap:"xsmall"}},f.createElement(h.a,e()({},l.beforeContentOne,{values:{location:boldText("Policies > Create policy")}})));return f.createElement(j.a,{"data-testid":b,content:k.a,heading:c,beforeContent:d,afterContent:f.createElement(f.Fragment,null,f.createElement(h.a,e()({},l.beforeContentTwo,{values:{option:boldText("JSON")}})),f.createElement(h.a,e()({},l.afterContent,{values:{placeholder:boldText(k.d),tags:boldText("tags"),name:boldText("name"),action:boldText("create the policy")}})))})}},"Q+yi":function(a,b,c){"use strict";c.d(b,"a",function(){return getConfiguredFields});const getConfiguredFields=a=>{const fieldsFromStep=a=>a.fields.map(a=>a.id);return(null==a?void 0:a.map(fieldsFromStep).flat())||[]}},QjSg:function(a,b,c){"use strict";c.d(b,"a",function(){return l});var d=c("m72O"),e=c("wlYy"),f=c("7PNT");const g=e.c.AWS_S3,h={header:{title:d.a.createDrawerTitleRequirements,subtitle:d.a.createDrawerSubtitleS3},footer:{primaryLabel:d.a.buttonLabelNext,secondaryLabel:d.a.buttonLabelBack},body:[{component:e.b.PlatformIconsCard,props:{platform:g}},{component:e.b.ContentSection,props:{heading:d.a.createS3SetupHeading,list:[d.a.createS3SetupStepOne,d.a.createS3SetupStepTwo,d.a.createS3SetupStepThree]}},{component:e.b.FormFieldsSection,props:{fields:[f.a.DATA_CONNECTION_NAME]}},{component:e.b.LegalDisclaimerSection,props:{platform:g}}],fields:[{id:f.a.DATA_CONNECTION_NAME,required:!0}],actions:{onExit:[e.a.ValidateDataConnectionName]}},i={header:{title:d.a.createDrawerTitlePermissions,subtitle:d.a.createDrawerSubtitleS3},footer:{primaryLabel:d.a.buttonLabelNext,secondaryLabel:d.a.buttonLabelBack},body:[{component:e.b.PermissionsSection,props:{platform:g}}],fields:[],actions:{}},j={header:{title:d.a.createDrawerTitleAuthentication,subtitle:d.a.createDrawerSubtitleS3},footer:{primaryLabel:d.a.buttonLabelNext,secondaryLabel:d.a.buttonLabelBack},body:[{component:e.b.FormFieldsSection,props:{fields:[f.a.AWS_ACCOUNT_ID,f.a.AWS_S3_BUCKET,f.a.AWS_S3_REGION,f.a.AWS_S3_PREFIX]}},{component:e.b.Divider},{component:e.b.ContentSection,props:{body:d.a.s3SyncInitialDescription}}],fields:[{id:f.a.AWS_ACCOUNT_ID,required:!0},{id:f.a.AWS_S3_BUCKET,required:!0},{id:f.a.AWS_S3_REGION,required:!0},{id:f.a.AWS_S3_PREFIX,required:!1}],actions:{onExit:[e.a.CreateFilePreview]}},k={header:{title:d.a.createDrawerTitleDataTemplate,subtitle:d.a.createDrawerSubtitleS3},footer:{primaryLabel:d.a.buttonLabelDone,secondaryLabel:d.a.buttonLabelBack},body:[{component:e.b.FilePreviewSection,props:{platform:g}},{component:e.b.Divider},{component:e.b.ContentSection,props:{heading:d.a.dataTemplateSelectHeading}},{component:e.b.FormFieldsSection,props:{fields:[f.a.DATA_TEMPLATE]}}],fields:[{id:f.a.DATA_TEMPLATE,required:!0}],actions:{onExit:[e.a.CreateDataConnection]}},l=[h,i,j,k]},S51U:function(a,b,c){"use strict";c.d(b,"a",function(){return useFilePreview});var d=c("7PNT"),e=c("BVEF"),f=c("lKFT");const handleError=(a,b)=>{const{state:c,dispatch:e}=b,isSTSError=a=>a.includes("STS: Access Denied"),isInvalidBucketName=a=>a.includes("The specified bucket does not exist"),isInvalidRegion=a=>a.includes("Incorrect Region"),isInvalidPermissionPolicy=a=>!a.startsWith("STS:")&&a.includes("Access Denied");e({type:"SET_NOTICE",payload:void 0});const{message:f}=a;if(isSTSError(f))e({type:"SET_NOTICE",payload:{type:"critical",description:"Verify the Account ID and IAM trust policy configuration.",step:c.step}}),e({type:"SET_ERROR",payload:{id:d.a.AWS_ACCOUNT_ID,message:"Account ID could not be found. Verify the account ID and try again."}});else if(isInvalidBucketName(f))e({type:"SET_ERROR",payload:{id:d.a.AWS_S3_BUCKET,message:"Bucket could not be found. Verify the bucket name and try again."}});else if(isInvalidRegion(f)){var g;const h=null===(g=f.split(":").pop())|| void 0===g?void 0:g.trim(),i=h?`Bucket not found in region - did you mean ${h}?`:"Bucket could not be located in the provided region";e({type:"SET_ERROR",payload:{id:d.a.AWS_S3_REGION,message:i}})}else e(isInvalidPermissionPolicy(f)?{type:"SET_NOTICE",payload:{type:"critical",description:"Verify the S3 permission policy configuration.",step:c.step}}:{type:"SET_NOTICE",payload:{type:"critical",description:"Something went wrong. Try again.",step:c.step}});return!1},getFilePreviewOptions=a=>{const{platform:b,values:c}=a,e=c[d.a.AWS_ACCOUNT_ID],g=c[d.a.AWS_S3_BUCKET],h=c[d.a.AWS_S3_REGION],i=c[d.a.AWS_S3_PREFIX];return{variables:{input:Object.assign({platform:b},e&&{account_id:Object(f.a)(e)},g&&{bucket_name:g},h&&{region:h},i&&{path:i}),v1Context:{betaHeaders:{udap_dc_beta:"v1"}}}}},useFilePreview=()=>{const[a]=Object(e.a)();return async b=>{const{state:c,dispatch:d}=b;try{const e=getFilePreviewOptions(c),{data:f,error:g}=await a(e);if(g||!(null!=f&&f.file_preview))throw new Error((null==g?void 0:g.message)||"Missing file preview");return d({type:"SET_FILE_PREVIEW",payload:f.file_preview}),!0}catch(h){return handleError(h,b)}}}},SOov:function(a,b,c){"use strict";c.d(b,"a",function(){return useUpdateDataConnectionMutation});var d=c("8OBj"),e=c.n(d),f=c("9u8d"),g=c.n(f),h=c("GhF0"),i=c("bPOr"),j=c("d5OU");const k=["aws_s3_config"],l=i.a`
            mutation UpdateDataConnectionMutation($input:OpenapiPutAjaxDataManagementDataConnectionsIdInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"b51f6ce56e"){putAjaxDataManagementDataConnectionsId(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["authentication_id" "authentication_platform" "aws_s3_config.source_data_format" "aws_s3_config.bucket_name" "aws_s3_config.region" "aws_s3_config.path" "created" "description" "file_last_sync.synced_at" "file_last_sync.filename" "last_synced_at" "id" "livemode" "merchant" "metadata" "name" "status"]fragments:[]nodeLookupMap:[{nodes:["authentication_id" "authentication_platform" "created" "description" "last_synced_at" "id" "livemode" "merchant" "metadata" "name" "status"]parentPath:"ROOT"}{nodes:["source_data_format" "bucket_name" "region" "path"]parentPath:"aws_s3_config"}{nodes:["synced_at" "filename"]parentPath:"file_last_sync"}]predicates:{})@rest(type:"OpenapiDataConnectionStripeType" method:"PUT" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections/:id" queryName:"putAjaxDataManagementDataConnectionsId" bodyBuilder:$bodyBuilder){authentication_id authentication_platform aws_s3_config@type(name:"OpenapiDataConnectionApiResourceAwss3ConfigField"){source_data_format bucket_name region path}created description file_last_sync@type(name:"OpenapiDataConnectionApiResourceFileBasedLastSyncField"){synced_at filename}last_synced_at id livemode merchant metadata name status}}
          `,m=l,n={update(a,b){let{data:c}=b;const d=null==c?void 0:c.putAjaxDataManagementDataConnectionsId,f={query:j.b,variables:{v1Context:{betaHeaders:{udap_dc_beta:"v1"}}}},h=a.readQuery(f);if(null!=h&&h.ajaxDataManagementDataConnectionsId&&d){const{ajaxDataManagementDataConnectionsId:i}=h,{aws_s3_config:l}=d,m=g()(d,k);a.writeQuery(e()(e()({},f),{},{data:e()(e()({},h),{},{ajaxDataManagementDataConnectionsId:e()(e()(e()({},i),m),{},{aws_s3_config:l})})}))}}};function useUpdateDataConnectionMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(m,Object.assign({},n,a))}const o={};l.permissions=o},Shir:function(a,b,c){"use strict";c.d(b,"a",function(){return useDrawerConfiguration});var d=c("cFme");const useDrawerConfiguration=()=>{const getPlatformConfig=a=>d.a[a],getDrawerConfiguration=(a,b)=>a&&a[b],get=(a,b)=>{const c=getPlatformConfig(a);return getDrawerConfiguration(c,b)};return{get}}},Snwq:function(a,b,c){"use strict";var d=c("4AQB");b.a=d.a},SyLY:function(a,b,c){"use strict";c.d(b,"a",function(){return useCreateAuthenticationMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation CreateAuthenticationMutation($input:OpenapiPostAjaxDataManagementAuthenticationsInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"f7c75d5ea5"){ajaxDataManagementAuthentications(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["id"]fragments:[]nodeLookupMap:[{nodes:["id"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiAuthenticationApi" method:"POST" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/authentications" queryName:"ajaxDataManagementAuthentications" bodyBuilder:$bodyBuilder){id}}
          `,g=f,h={};function useCreateAuthenticationMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},TSQu:function(a,b,c){"use strict";var d=c("0qsp"),e=c("zw7C"),f=c("nPYo"),g=c("01k4"),h=c("Jo2p"),i=c("Djp2"),j=c("uZ4b"),k=c("IjuE"),l=c("YFgZ"),m=c("rR/e");const handleActions=async(a,b,c)=>{for(const d of b){const e=await a.getAction(d)(c);if(!e)throw new Error(d.toString())}return!0},n={body:void 0,header:void 0,fields:[],footer:void 0},DataConnectionDrawerContent=()=>{const a=Object(l.a)(),b=Object(m.a)(),{state:c,dispatch:e}=b,{configuration:h,errors:o,isLoading:p,step:q,values:r}=c,[s,t]=d.useState(!0),u=d.useMemo(()=>q<=1,[q]),v=d.useMemo(()=>{var a;return h&&(null===(a=h[q-1].actions)|| void 0===a?void 0:a.onExit)||[]},[h,q]),{body:w,header:x,fields:y,footer:z}=d.useMemo(()=>h?h[q-1]:n,[h,q]);d.useEffect(()=>{const requiredFieldMissing=a=>a.required&&!r[a.id],fieldHasError=a=>void 0!==o[a.id];t(p||y.some(requiredFieldMissing)||y.some(fieldHasError))},[o,y,p,r]);const A=d.useCallback(async()=>{if(c.configuration){e({type:"SET_LOADING",payload:!0});try{await handleActions(a,v,{state:c,dispatch:e})}catch(b){return e({type:"SET_LOADING",payload:!1})}c.step<c.configuration.length?(e({type:"NEXT_STEP"}),e({type:"SET_LOADING",payload:!1})):(c.onDone&&c.onDone(),e({type:"SET_OPEN",payload:!1}))}},[c,e,a,v]),handleSecondary=()=>{q>1&&e({type:"PREV_STEP"})},B=(null==h?void 0:h.length)||1;return h&&x&&w&&z?d.createElement(d.Fragment,null,d.createElement(k.a,{header:x,step:q,totalSteps:B}),d.createElement(i.a,{body:w,hasSteps:B>q}),d.createElement(j.a,{footer:z,primaryDisabled:s,secondaryDisabled:u,handlePrimary:A,handleSecondary:handleSecondary})):d.createElement(f.a.div,{css:{stack:"y",width:"fill",height:"fill",alignY:"center",alignX:"center"}},d.createElement(g.a,null))},DataConnectionDrawer=()=>{const a=Object(m.a)(),b=Object(l.a)(),{state:c,dispatch:i}=a,{configuration:j,isOpen:k,isLoading:n,step:o}=c,[p,q]=d.useState(0),r=d.useMemo(()=>{var a;return j&&(null===(a=j[o-1].actions)|| void 0===a?void 0:a.onEnter)||[]},[j,o]),s=d.useCallback(async()=>{try{await handleActions(b,r,a)}catch(c){window.console.error(c)}},[a,b,r]);d.useEffect(()=>{k||q(0)},[k]),d.useEffect(()=>{k&&c.step!==p&&(q(c.step),i({type:"SET_LOADING",payload:!0}),s().finally(()=>{setTimeout(()=>i({type:"SET_LOADING",payload:!1}),300)}))},[i,s,k,c.step,p]);const onClose=()=>{i({type:"SET_LOADING",payload:!0}),setTimeout(()=>i({type:"SET_OPEN",payload:!1}),300)};return d.createElement(e.a,null,k&&d.createElement(h.a,{size:"medium",onClose:onClose,confirmCloseMessages:null===c.values.data_connection_name?void 0:{title:"Your progress will be lost",description:"Are you sure you want to exit? Your progress will not be saved.",cancelAction:"Cancel",exitAction:"Exit"}},n&&d.createElement(f.a.div,{css:{position:"absolute",backgroundColor:"white",height:"fill",width:"fill",zIndex:100}},d.createElement(f.a.div,{css:{stack:"y",width:"fill",height:"fill",alignY:"center",alignX:"center"}},d.createElement(g.a,null))),d.createElement(DataConnectionDrawerContent,null)))};b.a=DataConnectionDrawer},TVHr:function(a,b,c){"use strict";c.d(b,"a",function(){return h});var d=c("8OBj"),e=c.n(d),f=c("0qsp");const g=f.forwardRef(function(a,b){return f.createElement("svg",e()(e()({},a),{},{ref:b}),f.createElement("rect",{width:"32",height:"32",fill:"#045AD0"}),f.createElement("path",{fill:"white",d:"M16.4016 24.3297C11.6875 24.3297 8.79999 21.2562 8.79999 16.1156V16.1047C8.79999 11.0516 11.6984 8 16.325 8C20.1203 8 22.7016 10.2094 23.2266 13.1734L23.2594 13.3266H19.9453L19.9016 13.2172C19.3766 11.6859 18.1187 10.8 16.3359 10.8C13.7328 10.8 12.1687 12.725 12.1687 16.0719V16.0828C12.1687 19.5062 13.8312 21.5297 16.4562 21.5297C18.6109 21.5297 20.0875 20.25 20.175 18.3031L20.1859 18.0734H16.7516V15.6125H23.4016V17.4281C23.4016 21.7266 20.7984 24.3297 16.4016 24.3297Z"}))});g.defaultProps={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};const h={category:"brand",colorable:!1,name:"googleplaystore",svg:g}},UtHm:function(a,b,c){"use strict";var d=c("f+Pg");b.a=d.a},VqUc:function(a,b,c){"use strict";var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("xGRT"),h=c("K+RN"),i=c("Olvt"),j=c("nPYo"),k=c("HOsA"),l=c("n2FO"),m=c("AlkZ"),n=c("DH5F"),o=c("hIgl"),p=c("rR/e"),q=c("m72O");const r=5,s=40,t=15,u=Object(i.b)({font:"label.medium",fontFamily:"monospace",color:"subdued"}),trimFilenameFromMid=a=>a.length>s?`${a.substring(0,t)}...${a.substring(a.length-t,a.length)}`:a,AwsS3FilePreview=()=>{const a=Object(g.a)(),{state:b}=Object(p.a)();if(b.filePreview){const{files:c,file_count:d}=b.filePreview;return c.length?f.createElement(j.a.div,{css:{textColor:"subdued"}},c.map(a=>f.createElement(j.a.div,{key:`data-connection-source-file-preview-${a}`,css:{stack:"x",gap:"small",alignX:"start",alignY:"top",paddingBottom:"medium"}},f.createElement(k.c,{size:"small",icon:n.a,css:{fill:"onFeedback.neutral.subdued"}}),a.length>s?f.createElement(l.a,{trigger:f.createElement("div",null,f.createElement(j.a.div,{uses:[u]},trimFilenameFromMid(a)))},a):f.createElement("div",null,f.createElement(j.a.div,{uses:[u]},a)))),d>r&&f.createElement(j.a.div,{key:"data-connection-source-file-preview-additional-files-length",css:{stack:"x",gap:"small",alignX:"start",alignY:"top",paddingBottom:"medium"}},f.createElement(j.a.div,{uses:[u]},f.createElement(h.a,e()({},q.a.s3FilePreviewHasMore,{values:{count:a.formatNumber(d-r)}}))))):f.createElement(j.a.div,{css:{textAlign:"center",marginBottom:"xlarge",padding:"xxlarge",borderRadius:"medium",minHeight:"200px",backgroundColor:"offset"},uses:[Object(i.b)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"})]},f.createElement(k.c,{icon:m.a,size:"medium"}),f.createElement(j.a.div,{css:{font:"label.medium",color:"subdued"}},f.createElement(h.a,q.a.s3FilePreviewEmpty)))}return f.createElement(j.a.div,{css:{textAlign:"center",marginBottom:"xlarge",padding:"xxlarge",borderRadius:"medium",minHeight:"200px",backgroundColor:"offset"},uses:[Object(i.b)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"})]},f.createElement(k.c,{icon:o.a,size:"medium"}),f.createElement(j.a.div,{css:{font:"label.medium"}},f.createElement(h.a,q.a.s3FilePreviewFailed)))};b.a=AwsS3FilePreview},WPym:function(a,b,c){"use strict";var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("6Yd5"),h=c("At0j"),i=c("YDvS"),j=c("nPYo"),k=c("a/jI"),l=c("ZgPq"),m=c("Vavk"),n=c("xGRT"),o=c("K+RN");const p=Object(m.a)({label:{id:"udap.dataConnector.dataConnection.field.awsS3Region.label",defaultMessage:"Bucket region"},placeholder:{id:"udap.dataConnector.dataConnection.field.awsS3Region.placeholder",defaultMessage:"Search…"},error:{id:"udap.dataConnector.dataConnection.field.awsS3Region.error",defaultMessage:"Error!"},notFound:{id:"udap.dataConnector.dataConnection.field.awsS3Region.notFound",defaultMessage:"No results found"}}),getSearchableText=a=>a.name,q=Object(h.h)(getSearchableText,Object(g.b)()),AwsRegionsSelect=a=>{let{field:b,onChange:c,onBlur:d}=a;const m=Object(n.a)(),[r,s]=f.useState(b.value),[t,u]=f.useState(r?Object(g.b)().find(a=>a.name===b.value):null),v=Object(h.i)(q),w=Object(l.b)(),x=Object(l.b)(),renderItem=a=>`${a.entry.name} - ${a.entry.description}`,renderEmpty=()=>f.createElement(h.e,null,f.createElement(o.a,p.notFound)),renderError=()=>f.createElement(j.a.div,{css:{padding:"small"}},f.createElement(j.a.span,{css:{color:"error"}},f.createElement(o.a,p.error))),getButtonLabel=a=>`${a.name} - ${a.description}`,getFormValue=a=>`${a.name} - ${a.description}`,y=f.useCallback(a=>{u(a),s(null==a?void 0:a.name),c(null==a?void 0:a.name),d([],null==a?void 0:a.name)},[c,d]);return f.createElement(j.a.div,{css:{marginBottom:"xlarge",stack:"y",gap:"xsmall"}},f.createElement(j.a.div,{css:{stack:"y",gap:"space.0"}},f.createElement(k.a,{id:x,css:{width:"fit"}},f.createElement(o.a,p.label))),f.createElement(j.a.div,{className:"db-AwsS3RegionField-selectfield"},f.createElement(h.d,e()({},v,{inputPlaceholder:m.formatMessage(p.placeholder),getSearchableText:getSearchableText,onChange:y,value:t,width:"maximized",renderItem:renderItem,renderEmpty:renderEmpty,renderError:renderError,getButtonLabel:getButtonLabel,getFormValue:getFormValue}))),b.error&&f.createElement(i.a,{type:"error",id:w},b.error))};b.a=AwsRegionsSelect},"WY/Y":function(a,b,c){"use strict";c.d(b,"u",function(){return triggerDownload}),c.d(b,"f",function(){return s}),c.d(b,"c",function(){return t}),c.d(b,"b",function(){return u}),c.d(b,"e",function(){return v}),c.d(b,"a",function(){return w}),c.d(b,"g",function(){return x}),c.d(b,"h",function(){return y}),c.d(b,"i",function(){return z}),c.d(b,"d",function(){return A}),c.d(b,"j",function(){return B}),c.d(b,"q",function(){return parseGoogleServiceAccountCredentials}),c.d(b,"m",function(){return getPlatformIcon}),c.d(b,"l",function(){return getPlatformFromAuthenticationPlatform}),c.d(b,"s",function(){return C}),c.d(b,"w",function(){return D}),c.d(b,"t",function(){return toStripeCase}),c.d(b,"k",function(){return getErrorMessage}),c.d(b,"v",function(){return E}),c.d(b,"p",function(){return getUdsProductName}),c.d(b,"n",function(){return getUdsIdListWithDashboardSurfaceShortName}),c.d(b,"o",function(){return getUdsProductLabelsByUdsIds}),c.d(b,"r",function(){return parseImportSetFailedReason});var d=c("szBP"),e=c("Xu3X"),f=c("OVyg"),g=c("wlYy"),h=c("wIG7"),i=c("TVHr"),j=c("hW6j"),k=c("93sy"),l=c("jboe"),m=c("qeFg"),n=c("K+RN"),o=c("0qsp"),p=c.n(o),q=c("uxAo"),r=c("N0Eb");const triggerDownload=a=>{a&&window.open(a,"_blank")},isGoogleServiceAccountCredentialsObject=a=>a.hasOwnProperty("type")&&a.hasOwnProperty("project_id")&&a.hasOwnProperty("private_key_id")&&a.hasOwnProperty("private_key")&&a.hasOwnProperty("client_email")&&a.hasOwnProperty("client_id")&&"service_account"===a.type,s="pending",t="completed_with_errors",u="completed",v="failed",w="archived",x="pending_archive",y="succeeded",z="succeeded_with_errors",A="creating_records",B="validating_records",parseGoogleServiceAccountCredentials=a=>{const b=JSON.parse(a);if(!isGoogleServiceAccountCredentialsObject(b))throw new Error("Invalid Google service account credentials JSON");return b},getPlatformIcon=a=>{switch(a){case g.c.APPLE_APP_STORE:return h.a;case g.c.AWS_S3:return e.a;case g.c.GOOGLE_PLAY_STORE:return i.a;case g.c.ADYEN:case g.c.PAYPAL:return f.a;default:Object(d.s)(a)}},getPlatformFromAuthenticationPlatform=a=>{switch(a){case"APPLE_APP_STORE":return g.c.APPLE_APP_STORE;case"ADYEN":return g.c.ADYEN;case"GOOGLE_PLAY_STORE":return g.c.GOOGLE_PLAY_STORE;case"PAYPAL":return g.c.PAYPAL;default:return g.c.AWS_S3}},C={UAP:{heading:p.a.createElement(n.a,r.a.sharedPlatformUapHeading1)}},D=[{id:"udscon_1",name:"Reconciliation",sharedPlatform:"UAP",description:p.a.createElement(n.a,r.a.consumerDescriptionRecon),icon:j.a},{id:"udscon_2",name:"Tax Reporting",description:p.a.createElement(n.a,r.a.consumerDescriptionTax),icon:k.a},{id:"udscon_3",name:"Revenue Recognition",sharedPlatform:"UAP",description:p.a.createElement(n.a,r.a.consumerDescriptionRevRec),icon:l.a},{id:"udscon_4",name:"Billing",description:p.a.createElement(n.a,r.a.consumerDescriptionBilling),icon:m.a}],toStripeCase=a=>{const b=a.toLowerCase().replace(/_/g," ");return b.charAt(0).toUpperCase()+b.slice(1)};function getErrorMessage(a){return"string"==typeof a?a:a instanceof Error||a instanceof q.a||a&&"object"==typeof a&&"message"in a&&"string"==typeof a.message?a.message:"Unexpected error occurred."}const E=[{label:"Reconciliation",value:"recon"},{label:"Revenue Recognition",value:"revrec"},{label:"Billing",value:"billing"},{label:"Tax Reporting",value:"tax"}],getUdsProductName=a=>{var b;return"udap"===a?"Data Management":null===(b=E.find(b=>b.value===a))|| void 0===b?void 0:b.label},F={recon:{uds_id:["ALPHA_RECON_PAYMENT_EXPECTATIONS","BANK_TRANSACTION_SCHEMA"]},revrec:{uds_id:["GOOGLE_EARNINGS_REPORT_SCHEMA","GOOGLE_ESTIMATED_SALES_REPORT_SCHEMA","GOOGLE_SUBSCRIPTIONS_SCHEMA","REVREC_DATA_IMPORT","APPLE_FINANCIAL_REPORT_SCHEMA","APPLE_SUBSCRIBER_REPORT_SCHEMA"]},billing:{uds_id:["BILLING_MIGRATION_SCHEMA_POC","METER_EVENT"]},tax:{uds_id:["INDIRECT_TAX_TRANSACTION","INDIRECT_TAX_TRANSACTION_TEST"]}},getUdsIdListWithDashboardSurfaceShortName=a=>{var b;if("udap"!==a)return null===(b=F[a])|| void 0===b?void 0:b.uds_id};function getUdsProductLabelsByUdsIds(a){const b=[];for(const c of a)for(const[d,e]of Object.entries(F))if(e.uds_id.includes(c)){var f;const g=null===(f=E.find(a=>a.value===d))|| void 0===f?void 0:f.label;g&&!b.includes(g)&&b.push(g);break}return b}function parseImportSetFailedReason(a){const b=/Missing required headers - \[(.*?)\]/,c=a.match(b);return c?{isMissingRequiredHeadersError:!0,missingHeaders:c[1].split(", ").map(a=>a.trim())}:{isMissingRequiredHeadersError:!1,missingHeaders:[]}}},Y57I:function(a,b,c){"use strict";c.d(b,"a",function(){return useDrawerActions});var d=c("0qsp"),e=c("szBP"),f=c("wlYy"),g=c("k16x");function useDrawerActions(){const a=Object(g.a)(),b=Object(g.b)(),c=Object(g.c)(),h=Object(g.d)(),i=d.useCallback(d=>{switch(d){case f.a.CreateDataConnection:return b=>a(b);case f.a.CreateFilePreview:return a=>b(a);case f.a.UpdateDataConnection:return a=>c(a);case f.a.ValidateDataConnectionName:return a=>h(a);default:Object(e.s)(d)}},[a,b,c,h]);return{getAction:i}}},YFgZ:function(a,b,c){"use strict";var d=c("Y57I");c.d(b,"a",function(){return d.a});var e=c("Shir");c.d(b,"b",function(){return e.a});var f=c("MANHQ");c.d(b,"c",function(){return f.a}),c("LTch")},aGws:function(a,b,c){"use strict";var d=c("0qsp"),e=c("szBP"),f=c("7PNT"),g=c("xfnT"),h=c("lVxb"),i=c("JTBd"),j=c("Jlag"),k=c("wbB0"),l=c("WPym"),m=c("NA+O"),n=c("ioHi"),o=c("lRNi"),p=c("xmgQ"),q=c("ml5T"),r=c("jZkL"),s=c("g7gc"),t=c("rR/e");const stringValidation=(a,b)=>{let c;for(const d of b){const e=new RegExp(d.pattern);if(!e.test(a)){c=d.message;break}}return c},FormField=a=>{let{field:b}=a;const{state:c,dispatch:u}=Object(t.a)(),{errors:v,values:w}=c,x=d.useCallback(a=>{u({type:"SET_VALUE",payload:{id:b,value:a}})},[u,b]),y=d.useCallback((a,c)=>{if(null!==c){let d;"string"==typeof c&&(d=stringValidation(c,a)),u({type:"SET_ERROR",payload:{id:b,message:d}})}},[u,b]),z=d.useCallback(a=>({field:{id:a,error:v[a],value:w[a]},onChange:x,onBlur:y}),[v,y,x,w]),A=d.useMemo(()=>z(b),[b,z]);switch(b){case f.a.APP_STORE_ISSUER_ID:return d.createElement(g.a,A);case f.a.APP_STORE_KEY_ID:return d.createElement(h.a,A);case f.a.APP_STORE_PRIVATE_KEY:return d.createElement(i.a,A);case f.a.APP_STORE_VENDOR_NUMBER:return d.createElement(j.a,A);case f.a.AWS_ACCOUNT_ID:return d.createElement(k.a,A);case f.a.AWS_S3_BUCKET:return d.createElement(m.a,A);case f.a.AWS_S3_PREFIX:return d.createElement(n.a,A);case f.a.AWS_S3_REGION:return d.createElement(l.a,A);case f.a.DATA_CONNECTION_NAME:return d.createElement(o.a,A);case f.a.DATA_TEMPLATE:return d.createElement(p.a,A);case f.a.PLAY_STORE_APP_PACKAGE_NAME:return d.createElement(q.a,A);case f.a.PLAY_STORE_BUCKET_NAME:return d.createElement(r.a,A);case f.a.PLAY_STORE_CREDENTIALS_STRING:return d.createElement(s.a,A);case f.a.APP_STORE_PRIVATE_KEY_FILENAME:case f.a.PLAY_STORE_CLIENT_EMAIL:case f.a.PLAY_STORE_CLIENT_ID:case f.a.PLAY_STORE_CREDENTIALS_FILENAME:case f.a.PLAY_STORE_PRIVATE_KEY:case f.a.PLAY_STORE_PRIVATE_KEY_ID:case f.a.PLAY_STORE_PROJECT_ID:return d.createElement(d.Fragment,null);default:Object(e.s)(b)}},FormFieldsSection=a=>{let{fields:b}=a;return d.createElement(d.Fragment,null,b.map((a,b)=>d.createElement(d.Fragment,{key:`data-connection-form-field-${a}-${b}`},d.createElement(FormField,{field:a}))))};b.a=FormFieldsSection},aJyS:function(a,b,c){"use strict";var d=c("0qsp"),e=c("nPYo"),f=c("HOsA"),g=c("KCUd"),h=c("dTIh"),i=c("WY/Y");const PlatformIconsCard=a=>{let{platform:b}=a;const c=Object(i.m)(b);return d.createElement(e.a.div,{css:{marginBottom:"space.250"}},d.createElement(e.a.div,{css:{backgroundColor:"offset",borderRadius:"medium",padding:"xsmall"}},d.createElement(e.a.div,{css:{stack:"x",padding:"large",gap:"space.150",alignX:"center",alignY:"center",backgroundColor:"surface",borderRadius:"small",minHeight:"fit",border:"1px solid",borderColor:"border"}},d.createElement(e.a.div,{css:{transform:"scale(1.25)",borderRadius:"small",stack:"x",alignX:"center",alignY:"center",overflow:"hidden"}},d.createElement(f.c,{icon:c,size:"large"})),d.createElement(h.a,{platform:b}),d.createElement(e.a.div,{css:{transform:"scale(1.25)",borderRadius:"small",stack:"x",alignX:"center",alignY:"center",overflow:"hidden"}},d.createElement(f.c,{icon:g.a,size:"large"})))))};b.a=PlatformIconsCard},aPAe:function(a,b,c){"use strict";var d=c("bE8N");c.d(b,"a",function(){return d.a})},bE8N:function(a,b,c){"use strict";c.d(b,"a",function(){return useConnectorDrawer});var d=c("0qsp"),e=c("Huhf"),f=c("rR/e"),g=c("YFgZ");const useConnectorDrawer=()=>{const{state:a,dispatch:b}=Object(f.a)(),c=Object(g.b)(),h=d.useCallback(d=>{const{platform:f,mode:g,overrides:h}=Object.assign({platform:e.a.AWS_S3,mode:"create",overrides:{}},d),i=c.get(f,g);i&&(b({type:"SET_PLATFORM",payload:f}),b({type:"SET_CONFIGURATION",payload:i}),b({type:"SET_OVERRIDES",payload:h}),b({type:"SET_OPEN",payload:!a.isOpen}))},[b,c,a.isOpen]);return{open:h}}},cFme:function(a,b,c){"use strict";c.d(b,"a",function(){return h});var d=c("wlYy"),e=c("lxK/"),f=c("v/vJ"),g=c("p1wI");const h={[d.c.AWS_S3]:{create:f.a,"edit-authentication":f.b,"edit-data-connection-name":f.c,"edit-data-template":f.d,"show-policies":f.e},[d.c.APPLE_APP_STORE]:{create:e.a,"edit-authentication":e.b,"edit-data-connection-name":e.c},[d.c.GOOGLE_PLAY_STORE]:{create:g.a,"edit-authentication":g.b,"edit-data-connection-name":g.c}}},d5OU:function(a,b,c){"use strict";c.d(b,"b",function(){return g}),c.d(b,"a",function(){return useGetDataConnectionQuery});var d=c("qCo4"),e=c("bPOr");const f=e.a`
            query GetDataConnectionQuery($input:OpenapiGetAjaxDataManagementDataConnectionsIdInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"4cadcb2815"){ajaxDataManagementDataConnectionsId(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["authentication_id" "authentication_platform" "aws_s3_config.bucket_name" "aws_s3_config.path" "aws_s3_config.region" "aws_s3_config.source_data_format" "created" "description" "file_last_sync.synced_at" "file_last_sync.filename" "google_play_store_config.app_package_name" "google_play_store_config.bucket_name" "last_synced_at" "id" "livemode" "merchant" "metadata" "name" "status" "error"]fragments:[]nodeLookupMap:[{nodes:["authentication_id" "authentication_platform" "created" "description" "last_synced_at" "id" "livemode" "merchant" "metadata" "name" "status" "error"]parentPath:"ROOT"}{nodes:["bucket_name" "path" "region" "source_data_format"]parentPath:"aws_s3_config"}{nodes:["synced_at" "filename"]parentPath:"file_last_sync"}{nodes:["app_package_name" "bucket_name"]parentPath:"google_play_store_config"}]predicates:{})@rest(type:"OpenapiDataConnectionStripeType" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections/:id" queryName:"ajaxDataManagementDataConnectionsId"){authentication_id authentication_platform aws_s3_config@type(name:"OpenapiDataConnectionApiResourceAwss3ConfigField"){bucket_name path region source_data_format}created description file_last_sync@type(name:"OpenapiDataConnectionApiResourceFileBasedLastSyncField"){synced_at filename}google_play_store_config@type(name:"OpenapiDataConnectionApiResourceGooglePlayStoreConfigField"){app_package_name bucket_name}last_synced_at id livemode merchant metadata name status error}}
          `,g=f,h={};function useGetDataConnectionQuery(a){return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},dTIh:function(a,b,c){"use strict";var d=c("0qsp"),e=c("wlYy");const DashedLine=a=>a.platform===e.c.AWS_S3?d.createElement("svg",{width:"113",height:"8",viewBox:"0 0 113 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[...Array(13)].map((a,b)=>d.createElement("path",{key:b,fillRule:"evenodd",clipRule:"evenodd",d:`M${9*b+.20851} 0.606072C${9*b+.495107} 0.307015 ${9*b+.969873} 0.296913 ${9*b+1.26893} 0.58351L${9*b+4.26893} 3.45851C${9*b+4.41646} 3.59989 ${9*b+4.49992} 3.79535 ${9*b+4.5} 3.99969C${9*b+4.50009} 4.20403 ${9*b+4.41679} 4.39955 ${9*b+4.26938} 4.54106L${9*b+1.27438} 7.41606C${9*b+.975563} 7.70291 ${9*b+.500788} 7.6932 ${9*b+.213943} 7.39438C${9*b-.0729032} 7.09556 ${9*b-.0631974} 6.62079 ${9*b+.235621} 6.33394L${9*b+2.66651} 4.00045L${9*b+.231072} 1.66649C${9*b-.0679853} 1.3799 ${9*b-.0780867} 0.905129 ${9*b+.20851} 0.606072Z`,fill:`url(#paint${b}_linear_180_22161)`})),d.createElement("defs",null,[...Array(13)].map((a,b)=>d.createElement("linearGradient",{key:b,id:`paint${b}_linear_180_22161`,x1:"0",y1:"4",x2:"112.5",y2:"4",gradientUnits:"userSpaceOnUse"},d.createElement("stop",{stopColor:"#4E932D"}),d.createElement("stop",{offset:"1",stopColor:"#6772E5"}))))):d.createElement("svg",{width:"113",height:"8",viewBox:"0 0 113 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[...Array(13)].map((a,b)=>d.createElement("path",{key:b,fillRule:"evenodd",clipRule:"evenodd",d:`M${9*b+.20851} 0.606072C${9*b+.495107} 0.307015 ${9*b+.969873} 0.296913 ${9*b+1.26893} 0.58351L${9*b+4.26893} 3.45851C${9*b+4.41646} 3.59989 ${9*b+4.49992} 3.79535 ${9*b+4.5} 3.99969C${9*b+4.50009} 4.20403 ${9*b+4.41679} 4.39955 ${9*b+4.26938} 4.54106L${9*b+1.27438} 7.41606C${9*b+.975563} 7.70291 ${9*b+.500788} 7.6932 ${9*b+.213943} 7.39438C${9*b-.0729032} 7.09556 ${9*b-.0631974} 6.62079 ${9*b+.235621} 6.33394L${9*b+2.66651} 4.00045L${9*b+.231072} 1.66649C${9*b-.0679853} 1.3799 ${9*b-.0780867} 0.905129 ${9*b+.20851} 0.606072Z`,fill:`url(#paint${b}_linear_180_22059)`})),d.createElement("defs",null,[...Array(13)].map((a,b)=>d.createElement("linearGradient",{key:b,id:`paint${b}_linear_180_22059`,x1:"0",y1:"4",x2:"112.5",y2:"4",gradientUnits:"userSpaceOnUse"},d.createElement("stop",{stopColor:"#045AD0"}),d.createElement("stop",{offset:"1",stopColor:"#6772E5"})))));b.a=DashedLine},dWDZ:function(a,b,c){"use strict";c.d(b,"a",function(){return n});var d=c("Vavk"),e=c("0qsp"),f=c("wlYy"),g=c("7PNT"),h=c("qQpw"),i=c("FfI9");const j=Object(d.a)({createDrawerTitleRequirements:{id:"udap.dataConnector.appStoreConnect.create.drawer.title.requirements",defaultMessage:"Requirements"},createDrawerSubtitleAppStore:{id:"udap.dataConnector.appStoreConnect.create.drawer.subtitle.appStore",defaultMessage:"Set up Stripe Connector for {platform}"},buttonLabelNext:{id:"udap.dataConnector.appStoreConnect.button.label.next",defaultMessage:"Next"},buttonLabelBack:{id:"udap.dataConnector.appStoreConnect.button.label.previous",defaultMessage:"Back"},createAppStoreSetupHeading:{id:"udap.dataConnector.appStoreConnect.create.appStoreSetup.heading",defaultMessage:"What you'll need:"},createAppStoreSetupStepOne:{id:"udap.dataConnector.appStoreConnect.create.appStoreSetup.stepOne",defaultMessage:"Admin access to your App Store\xae Connect account."},createAppStoreSetupStepTwo:{id:"udap.dataConnector.appStoreConnect.create.appStoreSetup.stepTwo",defaultMessage:"Vendor ID, Private key, Key ID and Issuer ID."},createDrawerTitleAuthentication:{id:"udap.dataConnector.appStoreConnect.create.drawer.title.authentication",defaultMessage:"Authentication"},buttonLabelAuthenticate:{id:"udap.dataConnector.appStoreConnect.button.label.authenticate",defaultMessage:"Authenticate"},appStoreAuthDescHeading:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDesc.heading",defaultMessage:"Generate an API key"},appStoreAuthDescBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDescBody",defaultMessage:"In your <link>App Store Connect dashboard</link>, navigate to {action1}. Click the {action2} (plus icon) next to the heading of active keys table. Add a {action3}, and select {action4} under the access menu."},appStoreAuthDescBodyAction1:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDescBody.action1",defaultMessage:"Users and Access > Integrations"},appStoreAuthDescBodyAction2:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDescBody.action2",defaultMessage:'"+"'},appStoreAuthDescBodyAction3:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDescBody.action3",defaultMessage:"name"},appStoreAuthDescBodyAction4:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDescBody.action4",defaultMessage:"Finance role"},appStoreAuthCredsHeading:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.heading",defaultMessage:"Enter credentials"},appStoreAuthCredsPrivateKeyLabel:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.privateKey.label",defaultMessage:"Private Key"},appStoreAuthCredsPrivateKeyBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.privateKey.body",defaultMessage:"Hover on the newly generated API key, click on {action}."},appStoreAuthCredsPrivateKeyAction:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.privateKey.action",defaultMessage:"Download API Key"},appStoreAuthCredsKeyIdLabel:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.keyId.label",defaultMessage:"Key ID"},appStoreAuthCredsKeyIdBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.keyId.body",defaultMessage:"Key ID is visible in the third column of the Active keys table."},appStoreAuthCredsIssuerIdLabel:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.issuerId.label",defaultMessage:"Issuer ID"},appStoreAuthCredsIssuerIdBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.issuerId.body",defaultMessage:"The Issuer ID is visible just above the Active keys table."},appStoreAuthCredsVendorNumberLabel:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.vendorNumber.label",defaultMessage:"Vendor number"},appStoreAuthCredsVendorNumberBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.vendorNumber.body",defaultMessage:"Go back to App Store Connect dashboard page, navigate to {action}. The Vendor number is in the top-left-corner under the Legal entity name."},appStoreAuthCredsVendorNumberAction:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.vendorNumber.action",defaultMessage:"Payments and Financial Reports"},authNote:{id:"udap.dataConnector.appStoreConnect.authNote",defaultMessage:"Note:"},authNoteOne:{id:"udap.dataConnector.appStoreConnect.authNoteOne",defaultMessage:"Stripe will fetch all data for the last {duration}."},authNoteOneDuration:{id:"udap.dataConnector.appStoreConnect.authNoteOneDuration",defaultMessage:"12 months"},authNoteTwo:{id:"udap.dataConnector.appStoreConnect.authNoteTwo",defaultMessage:"Subsequently, data is fetched once daily."}}),k=f.c.APPLE_APP_STORE,l={header:{title:j.createDrawerTitleRequirements,subtitle:a=>a.formatMessage(j.createDrawerSubtitleAppStore,{platform:`Apple App Store${h.a}`})},footer:{primaryLabel:j.buttonLabelNext,secondaryLabel:j.buttonLabelBack},body:[{component:f.b.PlatformIconsCard,props:{platform:k}},{component:f.b.ContentSection,props:{heading:j.createAppStoreSetupHeading,list:[j.createAppStoreSetupStepOne,j.createAppStoreSetupStepTwo]}},{component:f.b.FormFieldsSection,props:{fields:[g.a.DATA_CONNECTION_NAME]}},{component:f.b.LegalDisclaimerSection,props:{platform:k}}],fields:[{id:g.a.DATA_CONNECTION_NAME,required:!0}],actions:{onExit:[f.a.ValidateDataConnectionName]}},m={header:{title:j.createDrawerTitleAuthentication,subtitle:a=>a.formatMessage(j.createDrawerSubtitleAppStore,{platform:`Apple App Store${h.a}`})},footer:{primaryLabel:j.buttonLabelAuthenticate,secondaryLabel:j.buttonLabelBack},body:[{component:f.b.ContentSection,props:{heading:j.appStoreAuthDescHeading,body:[j.appStoreAuthDescBody,[["link",a=>e.createElement(i.a,{type:"secondary",href:"https://appstoreconnect.apple.com/",target:"_blank",rel:"noopener noreferrer"},a)],["action1",j.appStoreAuthDescBodyAction1],["action2",j.appStoreAuthDescBodyAction2],["action3",j.appStoreAuthDescBodyAction3],["action4",j.appStoreAuthDescBodyAction4]]]}},{component:f.b.ContentSection,props:{heading:j.appStoreAuthCredsHeading}},{component:f.b.ContentSection,props:{label:j.appStoreAuthCredsPrivateKeyLabel,body:[j.appStoreAuthCredsPrivateKeyBody,[["action",j.appStoreAuthCredsPrivateKeyAction]]],inline:!0}},{component:f.b.FormFieldsSection,props:{fields:[g.a.APP_STORE_PRIVATE_KEY]}},{component:f.b.ContentSection,props:{label:j.appStoreAuthCredsKeyIdLabel,body:j.appStoreAuthCredsKeyIdBody,inline:!0}},{component:f.b.FormFieldsSection,props:{fields:[g.a.APP_STORE_KEY_ID]}},{component:f.b.ContentSection,props:{label:j.appStoreAuthCredsIssuerIdLabel,body:j.appStoreAuthCredsIssuerIdBody,inline:!0}},{component:f.b.FormFieldsSection,props:{fields:[g.a.APP_STORE_ISSUER_ID]}},{component:f.b.ContentSection,props:{inline:!0,label:j.appStoreAuthCredsVendorNumberLabel,body:[j.appStoreAuthCredsVendorNumberBody,[["action",j.appStoreAuthCredsVendorNumberAction]]]}},{component:f.b.FormFieldsSection,props:{fields:[g.a.APP_STORE_VENDOR_NUMBER]}},{component:f.b.Divider},{component:f.b.ContentSection,props:{label:j.authNote,list:[[j.authNoteOne,[["duration",j.authNoteOneDuration]]],j.authNoteTwo]}},{component:f.b.LegalDisclaimerSection,props:{platform:k,step:"auth"}}],fields:[{id:g.a.APP_STORE_PRIVATE_KEY,required:!0},{id:g.a.APP_STORE_PRIVATE_KEY_FILENAME,required:!0},{id:g.a.APP_STORE_KEY_ID,required:!0},{id:g.a.APP_STORE_ISSUER_ID,required:!0},{id:g.a.APP_STORE_VENDOR_NUMBER,required:!0}],actions:{onExit:[f.a.CreateDataConnection]}},n=[l,m]},e5Z9:function(a,b,c){"use strict";c.d(b,"a",function(){return k});var d=c("Vavk"),e=c("wlYy"),f=c("7PNT");const g=Object(d.a)({editAuthDrawerTitlePermissions:{id:"udap.dataConnector.googlePlayStore.editAuth.drawer.title.permissions",defaultMessage:"Permissions"},editAuthDrawerTitleAuthentication:{id:"udap.dataConnector.googlePlayStore.editAuth.drawer.title.authentication",defaultMessage:"Authentication"},editAuthDrawerSubtitlePlayStore:{id:"udap.dataConnector.googlePlayStore.editAuth.drawer.subtitle.playStore",defaultMessage:"Set up Stripe Connector for Google Play Store"},buttonLabelNext:{id:"udap.dataConnector.googlePlayStore.button.label.next",defaultMessage:"Next"},buttonLabelBack:{id:"udap.dataConnector.googlePlayStore.button.label.previous",defaultMessage:"Back"},buttonLabelAuthenticate:{id:"udap.dataConnector.googlePlayStore.button.label.authenticate",defaultMessage:"Authenticate"},playStoreAuthDescHeading:{id:"udap.dataConnector.googlePlayStore.playStoreAuthDesc.heading",defaultMessage:"Enter credentials"},playStoreAuthCredsPrivateKeyLabel:{id:"udap.dataConnector.googlePlayStore.playStoreAuthCreds.privateKey.label",defaultMessage:"Private key"},playStoreAuthCredsAppPackageNameLabel:{id:"udap.dataConnector.googlePlayStore.playStoreAuthCreds.appPackageName.label",defaultMessage:"App package name"},playStoreAuthCredsAppPackageNameBody:{id:"udap.dataConnector.googlePlayStore.playStoreAuthCreds.appPackageName.body",defaultMessage:"In the Play Console dashboard, the app package name is the URL displayed below the app name."},authNote:{id:"udap.dataConnector.googlePlayStore.authNote",defaultMessage:"Note:"},authNoteOne:{id:"udap.dataConnector.googlePlayStore.authNoteOne",defaultMessage:"Stripe will fetch all data from the last {duration}."},authNoteOneDuration:{id:"udap.dataConnector.googlePlayStore.authNoteOneDuration",defaultMessage:"12 months"},authNoteTwo:{id:"udap.dataConnector.googlePlayStore.authNoteTwo",defaultMessage:"Subsequently, data is fetched once daily."}}),h=e.c.GOOGLE_PLAY_STORE,i={header:{title:g.editAuthDrawerTitlePermissions,subtitle:g.editAuthDrawerSubtitlePlayStore},footer:{primaryLabel:g.buttonLabelNext,secondaryLabel:g.buttonLabelBack},body:[{component:e.b.PermissionsSection,props:{platform:h}}],fields:[],actions:{}},j={header:{title:g.editAuthDrawerTitleAuthentication,subtitle:g.editAuthDrawerSubtitlePlayStore},footer:{primaryLabel:g.buttonLabelAuthenticate,secondaryLabel:g.buttonLabelBack},body:[{component:e.b.ContentSection,props:{heading:g.playStoreAuthDescHeading}},{component:e.b.ContentSection,props:{label:g.playStoreAuthCredsPrivateKeyLabel,inline:!0}},{component:e.b.FormFieldsSection,props:{fields:[f.a.PLAY_STORE_CREDENTIALS_STRING]}},{component:e.b.ContentSection,props:{label:g.playStoreAuthCredsAppPackageNameLabel,body:g.playStoreAuthCredsAppPackageNameBody,inline:!0}},{component:e.b.FormFieldsSection,props:{fields:[f.a.PLAY_STORE_APP_PACKAGE_NAME]}},{component:e.b.FormFieldsSection,props:{fields:[f.a.PLAY_STORE_BUCKET_NAME]}},{component:e.b.Divider},{component:e.b.ContentSection,props:{label:g.authNote,list:[[g.authNoteOne,[["duration",g.authNoteOneDuration]]],g.authNoteTwo]}},{component:e.b.LegalDisclaimerSection,props:{platform:void 0}}],fields:[{id:f.a.PLAY_STORE_CREDENTIALS_STRING,required:!0},{id:f.a.PLAY_STORE_PROJECT_ID,required:!0},{id:f.a.PLAY_STORE_PRIVATE_KEY,required:!0},{id:f.a.PLAY_STORE_PRIVATE_KEY_ID,required:!0},{id:f.a.PLAY_STORE_CLIENT_EMAIL,required:!0},{id:f.a.PLAY_STORE_CLIENT_ID,required:!0},{id:f.a.PLAY_STORE_APP_PACKAGE_NAME,required:!0},{id:f.a.PLAY_STORE_BUCKET_NAME,required:!0}],actions:{onExit:[e.a.UpdateDataConnection]}},k=[i,j]},"f+Pg":function(a,b,c){"use strict";var d=c("0qsp"),e=c("K+RN"),f=c("szBP"),g=c("nPYo"),h=c("VqUc"),i=c("m72O"),j=c("wlYy");const getFilePreviewContent=a=>{switch(a){case j.c.AWS_S3:return d.createElement(h.a,null);case j.c.APPLE_APP_STORE:case j.c.ADYEN:case j.c.GOOGLE_PLAY_STORE:case j.c.PAYPAL:return d.createElement(d.Fragment,null);default:Object(f.s)(a)}},FilePreviewSection=a=>{let{platform:b}=a;const c=getFilePreviewContent(b);return d.createElement(d.Fragment,null,d.createElement(g.a.div,{css:{marginBottom:"medium",font:"label.medium.emphasized"}},d.createElement(e.a,i.a.s3FilePreviewHeading)),d.createElement(g.a.div,{css:{marginBottom:"medium"}},c))};b.a=FilePreviewSection},g7gc:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("K+RN"),h=c("Au6I"),i=c("ZgPq"),j=c("nPYo"),k=c("a/jI"),l=c("ySIj"),m=c("WY/Y");const n=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.googlePlayStorePrivateKey.label",defaultMessage:"Upload private key"},suffix:{id:"udap.dataConnector.dataConnection.field.googlePlayStorePrivateKey.suffix",defaultMessage:"or drag the private key here"},fieldLabel:{id:"udap.dataConnector.dataConnection.field.googlePlayStorePrivateKey.fieldLabel",defaultMessage:"Private key"},required:{id:"udap.dataConnector.dataConnection.field.googlePlayStorePrivateKey.validation.required",defaultMessage:"{field} is required"},mimeType:{id:"udap.dataConnector.dataConnection.field.googlePlayStorePrivateKey.validation.mimeType",defaultMessage:"Correct file format {format}"},fileContent:{id:"udap.dataConnector.dataConnection.field.googlePlayStorePrivateKey.validation.fileContent",defaultMessage:"Valid service account credentials"}}),getFile=a=>new Promise((b,c)=>{a?b(a):c()}),validateMimeType=async a=>{let b;try{b=await getFile(a)}catch(c){return}return b.name.endsWith(".json")},validateFileContent=async a=>{let b;try{b=await getFile(a)}catch(c){return}try{const d=await b.text();return!!Object(m.q)(d)}catch(e){return!1}},toFile=(a,b)=>new File([a],b,{type:"application/json"}),GooglePlayStoreCredentialDropzoneField=a=>{let{field:b,onChange:c,onBlur:e}=a;const m=Object(f.a)(),o=d.useRef("credentials.json"),[p,q]=d.useState(b.value),[r,s]=d.useState(p?toFile(p,o.current):null),t=d.useMemo(()=>{const a=[{valid:validateMimeType(r),label:m.formatMessage(n.mimeType,{format:"(JSON)"})}];return r&&a.push({valid:validateFileContent(r),label:m.formatMessage(n.fileContent),type:"error"}),a},[r,m]),u=d.useMemo(()=>[{pattern:"^.",message:m.formatMessage(n.required,{field:m.formatMessage(n.label)})},{pattern:'"type"\\s*:\\s*"[^"]*"\\s*,\\s*"project_id"\\s*:\\s*"[^"]*"\\s*,\\s*"private_key_id"\\s*:\\s*"[^"]*"\\s*,\\s*"private_key"\\s*:\\s*"[^"]*"\\s*,\\s*"client_email"\\s*:\\s*"[^"]*"\\s*,\\s*"client_id"\\s*:\\s*"[^"]*"',message:m.formatMessage(n.fileContent)}],[m]),handleFile=function(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:null;s(a)},v=d.useCallback(()=>{e(u,p)},[u,e,p]);d.useEffect(()=>{const a=setTimeout(()=>{e(u,p)},1e3);if(b.value===p)return()=>clearTimeout(a)},[b.value,u,e,p]),d.useEffect(()=>{var a;if(r){const b=new FileReader;b.onload=a=>{var b;const d=null===(b=a.target)|| void 0===b?void 0:b.result;q(d),c(d),v()},b.readAsText(r)}else q(""),c(""),v();o.current=null!==(a=null==r?void 0:r.name)&& void 0!==a?a:"credentials.json"},[r,v,c]);const w=Object(i.b)();return d.createElement(j.a.div,{css:{stack:"y",gap:"small",paddingBottom:"large"}},d.createElement(j.a.div,{css:{stack:"y",gap:"space.0"}},d.createElement(k.a,{id:w,css:{display:"none",width:"fit"}},d.createElement(g.a,n.fieldLabel))),d.createElement(h.a,{"data-db-analytics-name":"dataConnectionDrawerFileUploader",className:"db-FileUploadWrapper-droparea",name:"dataConnectionDrawerFileUploader",label:d.createElement(g.a,n.label),suffix:d.createElement(g.a,n.suffix),file:r,onFileClear:handleFile,onFileSelection:handleFile,required:!0}),d.createElement(l.a,{items:t}))};b.a=GooglePlayStoreCredentialDropzoneField},gJSr:function(a,b,c){"use strict";c.d(b,"a",function(){return j});var d=c("m72O"),e=c("wlYy"),f=c("7PNT");const g=e.c.AWS_S3,h={header:{title:d.a.updateDrawerTitleVerifyPermissions,subtitle:d.a.updateDrawerSubtitleS3Reauthenticate},footer:{primaryLabel:d.a.buttonLabelNext,secondaryLabel:d.a.buttonLabelBack},body:[{component:e.b.PermissionsSection,props:{platform:g}}],fields:[],actions:{}},i={header:{title:d.a.updateDrawerTitleAuthentication,subtitle:d.a.updateDrawerSubtitleS3Reauthenticate},footer:{primaryLabel:d.a.buttonLabelSave,secondaryLabel:d.a.buttonLabelBack},body:[{component:e.b.FormFieldsSection,props:{fields:[f.a.AWS_ACCOUNT_ID,f.a.AWS_S3_BUCKET,f.a.AWS_S3_REGION,f.a.AWS_S3_PREFIX]}},{component:e.b.Divider}],fields:[{id:f.a.AWS_ACCOUNT_ID,required:!0},{id:f.a.AWS_S3_BUCKET,required:!0},{id:f.a.AWS_S3_REGION,required:!0},{id:f.a.AWS_S3_PREFIX,required:!1}],actions:{onExit:[e.a.CreateFilePreview,e.a.UpdateDataConnection]}},j=[h,i]},glBQ:function(a,b,c){"use strict";c.d(b,"a",function(){return TrustPolicyContent});var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("Vavk"),h=c("K+RN"),i=c("nPYo"),j=c("6Yd5"),k=c("wz/5");const l=Object(g.a)({heading:{id:"udap.dataConnector.drawer.permission.aws_s3.trustPolicy.heading",defaultMessage:"Trust policy"},beforeContent:{id:"udap.dataConnector.drawer.permission.aws_s3.trustPolicy.beforeContent",defaultMessage:"In your AWS IAM dashboard, navigate to {location}."},afterContent:{id:"udap.dataConnector.drawer.permission.aws_s3.trustPolicy.afterContent",defaultMessage:"Copy this code block and then select {button}."}}),boldText=a=>f.createElement(i.a.span,{css:{fontWeight:"bold"}},a),TrustPolicyContent=a=>{let{externalId:b,roleName:c,testId:d}=a;const g=Object(j.a)(b,c),m=f.createElement(h.a,l.heading),n=f.createElement(i.a.div,{css:{stack:"y",gap:"xsmall"}},f.createElement(h.a,e()({},l.beforeContent,{values:{location:boldText("Roles > Create role > Custom trust policy")}})));return f.createElement(k.a,{"data-testid":d,content:g,heading:m,beforeContent:n,afterContent:f.createElement(h.a,e()({},l.afterContent,{values:{button:boldText("Next")}}))})}},gxAE:function(a,b,c){"use strict";c.d(b,"a",function(){return PermissionsSection});var d=c("0qsp"),e=c("Vavk"),f=c("K+RN"),g=c("nPYo"),h=c("01k4"),i=c("hjpb"),j=c("PQiB"),k=c("qvCP"),l=c("glBQ"),m=c("wlYy"),n=c("tdYj"),o=c("YFgZ");const p=Object(e.a)({description:{id:"udap.dataConnector.drawer.permission.aws_s3.description",defaultMessage:"Complete these steps in order to configure accurate permissions for this connector."}}),PermissionsSection=a=>{var b,c;let{testId:e}=a;const q=Object(o.c)(m.c.AWS_S3),r=Object(n.a)(),getTestId=a=>e?`${e}.${a}`:void 0;return q.loading||r.loading?d.createElement(g.a.div,{css:{stack:"y",width:"fill",height:"fill",alignY:"center"}},d.createElement(h.a,{"data-testid":"udap.common.drawerLoadingState"})):q.error||!q.data?d.createElement(i.a,{action:q.refetch}):r.error||!(null!==(b=r.data)&& void 0!==b&&null!==(c=b.role)&& void 0!==c&&c.name)?d.createElement(i.a,{action:r.refetch}):d.createElement(g.a.div,{css:{stack:"y",gap:"medium",lineHeight:"20px"}},d.createElement(f.a,p.description),d.createElement(j.a,{testId:getTestId("s3PermissionPolicy")}),d.createElement(l.a,{externalId:q.data,roleName:r.data.role.name,testId:getTestId("s3TrustPolicy")}),d.createElement(k.a,{testId:getTestId("s3Role")}))}},hjpb:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("K+RN"),g=c("nPYo"),h=c("7Hnw"),i=c("HOsA"),j=c("AlkZ"),k=c("wmBx"),l=c("E3BQ");const m=Object(e.a)({title:{id:"udap.common.drawerErrorState.title",defaultMessage:"Sorry, something went wrong."},retry:{id:"udap.common.drawerErrorState.retryButton",defaultMessage:"Retry"}}),DrawerErrorState=a=>{let{action:b,title:c,size:e="medium",testId:n="udap.common.drawerErrorState"}=a;return d.createElement(g.a.div,{css:{stack:"y",width:"fill",height:"fill",alignY:"center"}},d.createElement(l.a,{icon:j.a,"data-testid":n,size:e,title:c||d.createElement(f.a,m.title),actions:!!b&&d.createElement(h.a,{onPress:()=>b()},d.createElement(i.c,{icon:k.a}),d.createElement(f.a,m.retry))}))};b.a=DrawerErrorState},ioHi:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("K+RN"),h=c("nPYo"),i=c("a/jI"),j=c("jOHC"),k=c("qiw5"),l=c("AZzO"),m=c("zw7C"),n=c("ZgPq");const o="^.{0}$",p=2,q=255,r="^(([^\\/\\s]+\\/{1})+)$|^$",s=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.awsS3Prefix.label",defaultMessage:"Folder"},description:{id:"udap.dataConnector.dataConnection.field.awsS3Prefix.description",defaultMessage:"Fetch data from a folder within the bucket."},placeholder:{id:"udap.dataConnector.dataConnection.field.awsS3Prefix.placeholder",defaultMessage:"path/to/files/"},minLength:{id:"udap.dataConnector.dataConnection.field.awsS3Prefix.validation.minLength",defaultMessage:"{field} must contain at least {count} characters"},maxLength:{id:"udap.dataConnector.dataConnection.field.awsS3Prefix.validation.maxLength",defaultMessage:"{field} cannot contain more than {count} characters"},allowedCharacters:{id:"udap.dataConnector.dataConnection.field.awsS3Prefix.validation.allowedCharacters",defaultMessage:'{field} should end with "/" and cannot contain spaces'}}),AwsS3BucketField=a=>{let{field:b,onChange:c,onBlur:e}=a;const t=Object(f.a)(),[u,v]=d.useState(b.value),w=d.useMemo(()=>[{pattern:`^(.{${p},})$|${o}`,message:t.formatMessage(s.minLength,{field:t.formatMessage(s.label),count:t.formatNumber(p)})},{pattern:`^(.{0,${q}})$`,message:t.formatMessage(s.maxLength,{field:t.formatMessage(s.label),count:t.formatNumber(q)})},{pattern:r,message:t.formatMessage(s.allowedCharacters,{field:t.formatMessage(s.label)})}],[t]),x=Object(n.b)(),y=Object(n.b)();d.useEffect(()=>{const a=setTimeout(()=>e(w,u),1e3);if(b.value===u)return()=>clearTimeout(a)},[b.value,e,w,u]);const handleChange=a=>{v(a.target.value),c(a.target.value)},handleBlur=()=>{e(w,u)};return d.createElement(m.a,null,d.createElement(h.a.div,{css:{stack:"y",gap:"xsmall"}},d.createElement(h.a.div,{css:{stack:"y",gap:"space.0"}},d.createElement(h.a.div,null,d.createElement(i.a,{id:y,css:{width:"fit"}},d.createElement(g.a,s.label)),d.createElement(j.a,{css:{marginLeft:"xsmall"}},"Optional")),d.createElement(k.c,{css:{color:"subdued",fontSize:"label.small"},id:x},d.createElement(g.a,s.description))),d.createElement(l.c,{css:{marginBottom:"xlarge"},required:!1,value:u||"",label:void 0,placeholder:t.formatMessage(s.placeholder),error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur})))};b.a=AwsS3BucketField},jZkL:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("AZzO"),h=c("zw7C");const i=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.googlePlayStoreBucket.label",defaultMessage:"Google Cloud Storage Bucket ID"},description:{id:"udap.dataConnector.dataConnection.field.googlePlayStoreBucket.description",defaultMessage:"Specify the bucket — we'll fetch data from here."},placeholder:{id:"udap.dataConnector.dataConnection.field.googlePlayStoreBucket.placeholder",defaultMessage:"pubsite_prod_rev_0123456789"},required:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.required",defaultMessage:"{field} is required"},prefix:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.prefix",defaultMessage:"{field} should start with {prefix}"}}),GooglePlayStoreBucketField=a=>{let{field:b,onChange:c,onBlur:e}=a;const j=Object(f.a)(),[k,l]=d.useState(b.value),m=d.useMemo(()=>[{pattern:"^.",message:j.formatMessage(i.required,{field:j.formatMessage(i.label)})},{pattern:"^pubsite_prod_",message:j.formatMessage(i.prefix,{field:j.formatMessage(i.label),prefix:"pubsite_prod_"})}],[j]);d.useEffect(()=>{const a=setTimeout(()=>e(m,k),1e3);if(b.value===k)return()=>clearTimeout(a)},[b.value,e,m,k]);const handleChange=a=>{l(a.target.value),c(a.target.value)},handleBlur=()=>{e(m,k)};return d.createElement(h.a,null,d.createElement(g.c,{required:!0,css:{marginBottom:"xlarge"},value:k||"",label:j.formatMessage(i.label),description:j.formatMessage(i.description),placeholder:j.formatMessage(i.placeholder),error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur}))};b.a=GooglePlayStoreBucketField},ju5j:function(a,b,c){"use strict";c.d(b,"a",function(){return useUpdateAuthenticationMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation UpdateAuthenticationMutation($input:OpenapiPutAjaxDataManagementAuthenticationsIdInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"9b5501a33d"){putAjaxDataManagementAuthenticationsId(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["apple_app_store_auth_data.key_id" "apple_app_store_auth_data.issuer_id" "apple_app_store_auth_data.vendor_number" "apple_app_store_credential_set.private_key_filename" "aws_s3_auth_data.account_id" "aws_s3_auth_data.external_id" "created" "id" "livemode" "merchant" "metadata" "name" "object" "platform" "status"]fragments:[]nodeLookupMap:[{nodes:["key_id" "issuer_id" "vendor_number"]parentPath:"apple_app_store_auth_data"}{nodes:["private_key_filename"]parentPath:"apple_app_store_credential_set"}{nodes:["account_id" "external_id"]parentPath:"aws_s3_auth_data"}{nodes:["created" "id" "livemode" "merchant" "metadata" "name" "object" "platform" "status"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiAuthenticationApi" method:"PUT" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/authentications/:id" queryName:"putAjaxDataManagementAuthenticationsId" bodyBuilder:$bodyBuilder){apple_app_store_auth_data@type(name:"OpenapiAuthenticationAppleAppStoreAuthDataField"){key_id issuer_id vendor_number}apple_app_store_credential_set@type(name:"OpenapiAuthenticationAppleAppStoreCredentialSetField"){private_key_filename}aws_s3_auth_data@type(name:"OpenapiAuthenticationAwsS3AuthDataFieldApi"){account_id external_id}created id livemode merchant metadata name object platform status}}
          `,g=f,h={};function useUpdateAuthenticationMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},k16x:function(a,b,c){"use strict";var d=c("NS1T");c.d(b,"a",function(){return d.a});var e=c("S51U");c.d(b,"b",function(){return e.a});var f=c("teAa");c.d(b,"c",function(){return f.a});var g=c("06N+");c.d(b,"d",function(){return g.a})},lKFT:function(a,b,c){"use strict";c.d(b,"b",function(){return toAwsAccountId}),c.d(b,"a",function(){return fromAwsAccountId});const toAwsAccountId=a=>{if(a&&12===a.length){const b=a.match(/.{1,4}/g);if((null==b?void 0:b.length)===3)return b.join("-")}return a},fromAwsAccountId=a=>a?a.replaceAll("-",""):a},lRNi:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("AZzO"),h=c("zw7C");const i=3,j=100,k="^\\w+(\\s+\\w+)*(\\s+|\\w+)*$",l=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.label",defaultMessage:"Connector name"},description:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.description",defaultMessage:"A unique name to help easily identify the purpose of this connector."},placeholder:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.placeholder",defaultMessage:"Enter connection name here..."},required:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.required",defaultMessage:"{field} is required"},minLength:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.minLength",defaultMessage:"{field} must contain at least {count} characters"},maxLength:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.maxLength",defaultMessage:"{field} cannot contain more than {count} characters"},allowedCharacters:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.allowedCharacters",defaultMessage:"{field} can only contain letters and numbers"}}),DataConnectionNameField=a=>{let{field:b,onChange:c,onBlur:e}=a;const m=Object(f.a)(),[n,o]=d.useState(b.value),p=d.useMemo(()=>[{pattern:"^.",message:m.formatMessage(l.required,{field:m.formatMessage(l.label)})},{pattern:`^(.{${i},})$`,message:m.formatMessage(l.minLength,{field:m.formatMessage(l.label),count:m.formatNumber(i)})},{pattern:`^(.{0,${j}})$`,message:m.formatMessage(l.maxLength,{field:m.formatMessage(l.label),count:m.formatNumber(j)})},{pattern:k,message:m.formatMessage(l.allowedCharacters,{field:m.formatMessage(l.label)})}],[m]);d.useEffect(()=>{const a=setTimeout(()=>e(p,n),1e3);if(b.value===n)return()=>clearTimeout(a)},[b.value,e,p,n]);const handleChange=a=>{o(a.target.value),c(a.target.value)},handleBlur=()=>{e(p,n)};return d.createElement(h.a,null,d.createElement(g.c,{required:!0,css:{marginBottom:"xlarge"},value:n||"",label:m.formatMessage(l.label),description:m.formatMessage(l.description),placeholder:m.formatMessage(l.placeholder),error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur}))};b.a=DataConnectionNameField},lVxb:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("AZzO"),h=c("zw7C");const i=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.appleAppStoreKeyId.label",defaultMessage:"Key ID"},placeholder:{id:"udap.dataConnector.dataConnection.field.appleAppStoreKeyId.placeholder",defaultMessage:"Paste key ID"},required:{id:"udap.dataConnector.dataConnection.field.appleAppStoreKeyId.validation.required",defaultMessage:"{field} is required"}}),AppleAppStoreKeyIdField=a=>{let{field:b,onChange:c,onBlur:e}=a;const j=Object(f.a)(),[k,l]=d.useState(b.value),m=d.useMemo(()=>[{pattern:"^.",message:j.formatMessage(i.required,{field:j.formatMessage(i.label)})}],[j]);d.useEffect(()=>{const a=setTimeout(()=>e(m,k),1e3);if(b.value===k)return()=>clearTimeout(a)},[b.value,e,m,k]);const handleChange=a=>{l(a.target.value),c(a.target.value)},handleBlur=()=>{e(m,k)};return d.createElement(h.a,null,d.createElement(g.c,{required:!0,css:{marginBottom:"xlarge"},value:k||"",label:j.formatMessage(i.label),hiddenElements:["label"],placeholder:j.formatMessage(i.placeholder),error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur}))};b.a=AppleAppStoreKeyIdField},"lxK/":function(a,b,c){"use strict";var d=c("dWDZ");c.d(b,"a",function(){return d.a});var e=c("tS6Y");c.d(b,"b",function(){return e.a});var f=c("u+e6");c.d(b,"c",function(){return f.a})},m72O:function(a,b,c){"use strict";var d=c("Vavk");const e=Object(d.a)({createDrawerTitleRequirements:{id:"udap.dataConnector.dataConnection.create.drawer.title.requirements",defaultMessage:"Requirements"},createDrawerTitlePermissions:{id:"udap.dataConnector.dataConnection.create.drawer.title.permissions",defaultMessage:"Permissions"},createDrawerTitleAuthentication:{id:"udap.dataConnector.dataConnection.create.drawer.title.authentication",defaultMessage:"Authentication"},createDrawerTitleDataTemplate:{id:"udap.dataConnector.dataConnection.create.drawer.title.dataTemplate",defaultMessage:"Data template"},updateDrawerTitleEditName:{id:"udap.dataConnector.dataConnection.update.drawer.title.editName",defaultMessage:"Edit name"},updateDrawerTitleVerifyPermissions:{id:"udap.dataConnector.dataConnection.update.drawer.title.verifyPermissions",defaultMessage:"Verify permissions"},updateDrawerTitleViewPermissions:{id:"udap.dataConnector.dataConnection.update.drawer.title.viewPermissions",defaultMessage:"Policies"},updateDrawerTitleAuthentication:{id:"udap.dataConnector.dataConnection.update.drawer.title.authentication",defaultMessage:"Authentication"},updateDrawerTitleDataTemplate:{id:"udap.dataConnector.dataConnection.update.drawer.title.dataTemplate",defaultMessage:"Edit data template"},createDrawerSubtitleS3:{id:"udap.dataConnector.dataConnection.create.drawer.subtitle.s3",defaultMessage:"Set up Amazon S3 connector"},updateDrawerSubtitleS3:{id:"udap.dataConnector.dataConnection.update.drawer.subtitle.s3",defaultMessage:"Amazon S3 connector"},updateDrawerSubtitleS3Reauthenticate:{id:"udap.dataConnector.dataConnection.update.drawer.subtitle.s3Reauthenticate",defaultMessage:"Reauthenticate Amazon S3 connector"},buttonLabelBack:{id:"udap.dataConnector.dataConnection.button.label.previous",defaultMessage:"Back"},buttonLabelCopy:{id:"udap.dataConnector.dataConnection.button.label.copy",defaultMessage:"Copy"},buttonLabelDone:{id:"udap.dataConnector.dataConnection.button.label.done",defaultMessage:"Done"},closeButtonLabel:{id:"udap.dataConnector.dataConnection.button.label.close",defaultMessage:"Close"},buttonLabelEdit:{id:"udap.dataConnector.dataConnection.button.label.edit",defaultMessage:"Edit"},buttonLabelEditName:{id:"udap.dataConnector.dataConnection.button.label.editName",defaultMessage:"Edit name"},buttonLabelLoading:{id:"udap.dataConnector.dataConnection.button.label.loading",defaultMessage:"Loading..."},buttonLabelNewConnector:{id:"udap.dataConnector.dataConnection.button.label.newConnector",defaultMessage:"Set up connector"},buttonLabelNext:{id:"udap.dataConnector.dataConnection.button.label.next",defaultMessage:"Next"},buttonLabelReauthenticate:{id:"udap.dataConnector.dataConnection.button.label.reauthenticate",defaultMessage:"Re-authenticate"},buttonLabelRetry:{id:"udap.dataConnector.dataConnection.button.label.retry",defaultMessage:"Retry"},buttonLabelSave:{id:"udap.dataConnector.dataConnection.button.label.save",defaultMessage:"Save changes"},buttonLabelViewPolicies:{id:"udap.dataConnector.dataConnection.button.label.viewPolicies",defaultMessage:"View policies"},buttonLabelDeleteConnector:{id:"udap.dataConnector.dataConnection.button.label.deleteConnector",defaultMessage:"Delete connector"},buttonLabelCancel:{id:"udap.dataConnector.dataConnection.button.label.cancel",defaultMessage:"Cancel"},badgeLabelOptional:{id:"udap.dataConnector.dataConnection.badge.label.optional",defaultMessage:"Optional"},badgeLabelInactive:{id:"udap.dataConnector.dataConnection.badge.label.inactive",defaultMessage:"Inactive"},badgeLabelActive:{id:"udap.dataConnector.dataConnection.badge.label.active",defaultMessage:"Active"},menuItemDeleteConnector:{id:"udap.dataConnector.dataConnection.menuItem.deleteConnector",defaultMessage:"Delete connector"},popoverClickToCopy:{id:"udap.dataConnector.dataConnection.popover.clickToCopy",defaultMessage:"Click to copy"},popoverCopied:{id:"udap.dataConnector.dataConnection.popover.copied",defaultMessage:"Copied"},toastConnectorDeleted:{id:"udap.dataConnector.dataConnection.toast.connectorDeleted",defaultMessage:"Connector successfully deleted"},createS3SetupHeading:{id:"udap.dataConnector.dataConnection.create.s3.setup.heading",defaultMessage:"What you'll need:"},createS3SetupStepOne:{id:"udap.dataConnector.dataConnection.create.s3.setup.stepOne",defaultMessage:"Access to AWS IAM dashboard"},createS3SetupStepTwo:{id:"udap.dataConnector.dataConnection.create.s3.setup.stepTwo",defaultMessage:"Account ID, bucket name, bucket region, and folder name"},createS3SetupStepThree:{id:"udap.dataConnector.dataConnection.create.s3.setup.stepThree",defaultMessage:"Data template to read files from this connector"},s3PermissionsDescription:{id:"udap.dataConnector.dataConnection.create.s3.permissions.body",defaultMessage:"Complete these steps in order to configure accurate permissions for this connector."},s3RoleHeading:{id:"udap.dataConnector.dataConnection.create.s3.role.heading",defaultMessage:"Role name"},s3RoleBody:{id:"udap.dataConnector.dataConnection.create.s3.role.body",defaultMessage:"Go back to the {page} page. Select the newly created policy."},s3RoleBodyCont:{id:"udap.dataConnector.dataConnection.create.s3.role.bodyCont",defaultMessage:"Copy this name into the {field} and create the role."},s3TrustPolicyHeading:{id:"udap.dataConnector.dataConnection.create.s3.trustPolicy.heading",defaultMessage:"Trust policy"},s3TrustPolicyBody:{id:"udap.dataConnector.dataConnection.create.s3.trustPolicy.body",defaultMessage:"In your AWS IAM dashboard, navigate to {location}."},s3TrustPolicyBodyCont:{id:"udap.dataConnector.dataConnection.create.s3.trustPolicy.bodyCont",defaultMessage:"Copy this code block and then select {button}."},s3PermissionPolicyHeading:{id:"udap.dataConnector.dataConnection.create.s3.permissionPolicy.heading",defaultMessage:"Permission policy"},s3PermissionPolicyBody:{id:"udap.dataConnector.dataConnection.create.s3.permissionPolicy.body",defaultMessage:"Click on {action}"},s3PermissionPolicyBodyCont:{id:"udap.dataConnector.dataConnection.create.s3.permissionPolicy.bodyCont",defaultMessage:"Copy this code block and replace the existing code. Replace the {placeholder} placeholder with your intended bucket name. Add {tags}, a {name}, and then {action}."},s3SyncInitialDescription:{id:"udap.dataConnector.dataConnection.create.s3.sync.initial.description",defaultMessage:"Stripe will initially fetch all data modified in the last 90 days."},s3FilePreviewHeading:{id:"udap.dataConnector.dataConnection.s3.filePreview.heading",defaultMessage:"File preview:"},s3FilePreviewHasMore:{id:"udap.dataConnector.dataConnection.s3.filePreview.hasMore",defaultMessage:"+{count} more"},s3FilePreviewEmpty:{id:"udap.dataConnector.dataConnection.s3.filePreview.empty",defaultMessage:"No files were found in the specified location. If this is not expected, you can return to the previous step and specify a different bucket and/or folder."},s3FilePreviewFailed:{id:"udap.dataConnector.dataConnection.s3.filePreview.failed",defaultMessage:"Failed to load file preview"},dataTemplateSelectHeading:{id:"udap.dataConnector.dataConnection.dataTemplate.select.heading",defaultMessage:"Select how Stripe should read this data:"},error:{id:"udap.dataConnector.dataConnection.error",defaultMessage:"Something went wrong"}});b.a=e},ml5T:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("AZzO"),h=c("zw7C");const i=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.googlePlayStoreAppPackage.label",defaultMessage:"App package name"},placeholder:{id:"udap.dataConnector.dataConnection.field.googlePlayStoreAppPackage.placeholder",defaultMessage:"com.example.app"},required:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.required",defaultMessage:"{field} is required"},format:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.format",defaultMessage:"{field} does not match expected format"}}),GooglePlayStoreAppPackageNameField=a=>{let{field:b,onChange:c,onBlur:e}=a;const j=Object(f.a)(),k=d.useRef(!1),[l,m]=d.useState(b.value),n=d.useMemo(()=>[{pattern:"^.",message:j.formatMessage(i.required,{field:j.formatMessage(i.label)})},{pattern:"^[a-z][a-z0-9_]*(\\.[a-z0-9_]+)+[0-9a-z_]$",message:j.formatMessage(i.format,{field:j.formatMessage(i.label)})}],[j]);d.useEffect(()=>{const a=setTimeout(()=>e(n,l),1e3);if(k.current){if(b.value===l)return()=>clearTimeout(a)}else k.current=!0},[b.value,e,n,l]);const handleChange=a=>{m(a.target.value),c(a.target.value)},handleBlur=()=>{e(n,l)};return d.createElement(h.a,null,d.createElement(g.c,{required:!0,css:{marginBottom:"xlarge"},value:l||"",label:j.formatMessage(i.label),hiddenElements:["label"],placeholder:j.formatMessage(i.placeholder),error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur}))};b.a=GooglePlayStoreAppPackageNameField},oAaa:function(a,b,c){"use strict";c.d(b,"a",function(){return l});var d=c("Vavk"),e=c("wlYy"),f=c("7PNT");const g=Object(d.a)({createDrawerTitleRequirements:{id:"udap.dataConnector.googlePlayStore.create.drawer.title.requirements",defaultMessage:"Requirements"},createDrawerSubtitlePlayStore:{id:"udap.dataConnector.googlePlayStore.create.drawer.subtitle.playStore",defaultMessage:"Set up Stripe Connector for Google Play Store"},buttonLabelNext:{id:"udap.dataConnector.googlePlayStore.button.label.next",defaultMessage:"Next"},buttonLabelBack:{id:"udap.dataConnector.googlePlayStore.button.label.previous",defaultMessage:"Back"},createPlayStoreSetupHeading:{id:"udap.dataConnector.googlePlayStore.create.playStoreSetup.heading",defaultMessage:"What you'll need:"},createPlayStoreSetupStepOne:{id:"udap.dataConnector.googlePlayStore.create.playStoreSetup.stepOne",defaultMessage:"Admin access to Google developers console"},createPlayStoreSetupStepTwo:{id:"udap.dataConnector.googlePlayStore.create.playStoreSetup.stepTwo",defaultMessage:"Admin access to Play console"},createPlayStoreSetupStepThree:{id:"udap.dataConnector.googlePlayStore.create.playStoreSetup.stepThree",defaultMessage:"App Package Name, Google Cloud Store Bucket ID, Service account credentials (we’ll set this up in the next step)"},createDrawerTitlePermissions:{id:"udap.dataConnector.googlePlayStore.create.drawer.title.permissions",defaultMessage:"Permissions"},createDrawerTitleAuthentication:{id:"udap.dataConnector.googlePlayStore.create.drawer.title.authentication",defaultMessage:"Authentication"},buttonLabelAuthenticate:{id:"udap.dataConnector.googlePlayStore.button.label.authenticate",defaultMessage:"Authenticate"},playStoreAuthDescHeading:{id:"udap.dataConnector.googlePlayStore.playStoreAuthDesc.heading",defaultMessage:"Enter credentials"},playStoreAuthCredsPrivateKeyLabel:{id:"udap.dataConnector.googlePlayStore.playStoreAuthCreds.privateKey.label",defaultMessage:"Private key"},playStoreAuthCredsAppPackageNameLabel:{id:"udap.dataConnector.googlePlayStore.playStoreAuthCreds.appPackageName.label",defaultMessage:"App package name"},playStoreAuthCredsAppPackageNameBody:{id:"udap.dataConnector.googlePlayStore.playStoreAuthCreds.appPackageName.body",defaultMessage:"In the Play Console dashboard, the app package name is the URL displayed below the app name."},authNote:{id:"udap.dataConnector.googlePlayStore.authNote",defaultMessage:"Note:"},authNoteOne:{id:"udap.dataConnector.googlePlayStore.authNoteOne",defaultMessage:"Stripe will fetch all data from the last {duration}."},authNoteOneDuration:{id:"udap.dataConnector.googlePlayStore.authNoteOneDuration",defaultMessage:"12 months"},authNoteTwo:{id:"udap.dataConnector.googlePlayStore.authNoteTwo",defaultMessage:"Subsequently, data is fetched once daily."}}),h=e.c.GOOGLE_PLAY_STORE,i={header:{title:g.createDrawerTitleRequirements,subtitle:g.createDrawerSubtitlePlayStore},footer:{primaryLabel:g.buttonLabelNext,secondaryLabel:g.buttonLabelBack},body:[{component:e.b.PlatformIconsCard,props:{platform:h}},{component:e.b.FormFieldsSection,props:{fields:[f.a.DATA_CONNECTION_NAME]}},{component:e.b.Divider},{component:e.b.ContentSection,props:{heading:g.createPlayStoreSetupHeading,list:[g.createPlayStoreSetupStepOne,g.createPlayStoreSetupStepTwo,g.createPlayStoreSetupStepThree]}},{component:e.b.LegalDisclaimerSection,props:{platform:h}}],fields:[{id:f.a.DATA_CONNECTION_NAME,required:!0}],actions:{onExit:[e.a.ValidateDataConnectionName]}},j={header:{title:g.createDrawerTitlePermissions,subtitle:g.createDrawerSubtitlePlayStore},footer:{primaryLabel:g.buttonLabelNext,secondaryLabel:g.buttonLabelBack},body:[{component:e.b.PermissionsSection,props:{platform:h}}],fields:[],actions:{}},k={header:{title:g.createDrawerTitleAuthentication,subtitle:g.createDrawerSubtitlePlayStore},footer:{primaryLabel:g.buttonLabelAuthenticate,secondaryLabel:g.buttonLabelBack},body:[{component:e.b.ContentSection,props:{heading:g.playStoreAuthDescHeading}},{component:e.b.ContentSection,props:{label:g.playStoreAuthCredsPrivateKeyLabel,inline:!0}},{component:e.b.FormFieldsSection,props:{fields:[f.a.PLAY_STORE_CREDENTIALS_STRING]}},{component:e.b.ContentSection,props:{label:g.playStoreAuthCredsAppPackageNameLabel,body:g.playStoreAuthCredsAppPackageNameBody,inline:!0}},{component:e.b.FormFieldsSection,props:{fields:[f.a.PLAY_STORE_APP_PACKAGE_NAME]}},{component:e.b.FormFieldsSection,props:{fields:[f.a.PLAY_STORE_BUCKET_NAME]}},{component:e.b.Divider},{component:e.b.ContentSection,props:{label:g.authNote,list:[[g.authNoteOne,[["duration",g.authNoteOneDuration]]],g.authNoteTwo]}},{component:e.b.LegalDisclaimerSection,props:{platform:void 0}}],fields:[{id:f.a.PLAY_STORE_CREDENTIALS_STRING,required:!0},{id:f.a.PLAY_STORE_PROJECT_ID,required:!0},{id:f.a.PLAY_STORE_PRIVATE_KEY,required:!0},{id:f.a.PLAY_STORE_PRIVATE_KEY_ID,required:!0},{id:f.a.PLAY_STORE_CLIENT_EMAIL,required:!0},{id:f.a.PLAY_STORE_CLIENT_ID,required:!0},{id:f.a.PLAY_STORE_APP_PACKAGE_NAME,required:!0},{id:f.a.PLAY_STORE_BUCKET_NAME,required:!0}],actions:{onExit:[e.a.CreateDataConnection]}},l=[i,j,k]},p1wI:function(a,b,c){"use strict";var d=c("oAaa");c.d(b,"a",function(){return d.a});var e=c("e5Z9");c.d(b,"b",function(){return e.a});var f=c("92bx");c.d(b,"c",function(){return f.a})},phkg:function(a,b,c){"use strict";var d=c("0qsp"),e=c("rR/e"),f=c("YDvS");const DataConnectionDrawerNotice=()=>{const{state:a,dispatch:b}=Object(e.a)(),{notice:c,step:g}=a,h=d.useRef(null);d.useEffect(()=>{c&&c.step&&c.step<g&&b({type:"SET_NOTICE",payload:void 0})},[g,c,b]),d.useEffect(()=>{c&&h.current&&h.current.scrollIntoView({behavior:"smooth",block:"start"})},[c]);const shouldRender=a=>a.step===g|| void 0===a.step;return c&&shouldRender(c)?d.createElement("div",{ref:h},d.createElement(f.a,{css:{marginBottom:"large"},type:"error"},c.description)):null};b.a=DataConnectionDrawerNotice},qQpw:function(a,b,c){"use strict";c.d(b,"a",function(){return d});const d=String.fromCodePoint(174)},qvCP:function(a,b,c){"use strict";c.d(b,"a",function(){return RoleContent});var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("Vavk"),h=c("K+RN"),i=c("nPYo"),j=c("HsXN"),k=c("wz/5");const l=Object(g.a)({heading:{id:"udap.dataConnector.drawer.permission.aws_s3.role.heading",defaultMessage:"Role name"},beforeContent:{id:"udap.dataConnector.drawer.permission.aws_s3.role.beforeContent",defaultMessage:"On the {page} page, assign the created permission policy then select {action} to proceed."},afterContent:{id:"udap.dataConnector.drawer.permission.aws_s3.role.afterContent",defaultMessage:"Copy this name into the {field} and create the role."}}),boldText=a=>f.createElement(i.a.span,{css:{fontWeight:"bold"}},a),RoleContent=a=>{let{testId:b}=a;const c=f.createElement(h.a,l.heading),d=f.createElement(i.a.div,{css:{stack:"y",gap:"xsmall"}},f.createElement(h.a,e()({},l.beforeContent,{values:{page:boldText("Polices"),action:boldText("Next")}})));return f.createElement(k.a,{"data-testid":b,content:j.b,heading:c,beforeContent:d,afterContent:f.createElement(h.a,e()({},l.afterContent,{values:{field:boldText("Role name field")}}))})}},qx3r:function(a,b,c){"use strict";c.d(b,"b",function(){return getValuesFromDataConnection}),c.d(b,"a",function(){return getDataConnectionInputFromDrawerState});var d=c("8OBj"),e=c.n(d),f=c("i3qh"),g=c.n(f),h=c("FCV6"),i=c.n(h),j=c("7PNT");const isAwsS3Config=a=>null!=a&&"bucket_name"in a&&"path"in a&&"region"in a&&"source_data_format"in a,isGooglePlayStoreConfig=a=>null!=a&&"app_package_name"in a&&"bucket_name"in a,getDataConnectionConfig=a=>{switch(a.authentication_platform){case"aws_s3":return a.aws_s3_config;case"google_play_store":return a.google_play_store_config;default:return}},getValuesFromAwsS3Config=a=>{const{bucket_name:b,path:c,region:d,source_data_format:e}=a;return{[j.a.AWS_S3_BUCKET]:null!=b?b:void 0,[j.a.AWS_S3_PREFIX]:null!=c?c:void 0,[j.a.AWS_S3_REGION]:null!=d?d:void 0,[j.a.DATA_TEMPLATE]:null!=e?e:void 0}},getValuesFromGooglePlayStoreConfig=a=>{const{bucket_name:b,app_package_name:c}=a;return{[j.a.PLAY_STORE_APP_PACKAGE_NAME]:null!=c?c:void 0,[j.a.PLAY_STORE_BUCKET_NAME]:null!=b?b:void 0}},getValuesFromDataConnectionConfig=a=>{const b=getDataConnectionConfig(a);switch(a.authentication_platform){case"aws_s3":return isAwsS3Config(b)?getValuesFromAwsS3Config(b):{};case"google_play_store":return isGooglePlayStoreConfig(b)?getValuesFromGooglePlayStoreConfig(b):{};default:return{}}},getValuesFromDataConnection=a=>{const{name:b}=a;return Object.assign({},b&&{[j.a.DATA_CONNECTION_NAME]:b},getValuesFromDataConnectionConfig(a))},getConfiguredFields=a=>{const fieldsFromStep=a=>a.fields.map(a=>a.id);return(null==a?void 0:a.map(fieldsFromStep).flat())||[]},getAwsS3ConfigFromFieldValues=a=>{const b=a[j.a.AWS_S3_BUCKET],c=a[j.a.AWS_S3_PREFIX],d=a[j.a.AWS_S3_REGION],e=a[j.a.DATA_TEMPLATE],f=Object.assign({},b&&{bucket_name:b},c&&{path:c},d&&{region:d},e&&{source_data_format:e});return g()(f)?void 0:f},getGooglePlayStoreConfigFromFieldValues=a=>{const b=a[j.a.PLAY_STORE_APP_PACKAGE_NAME],c=a[j.a.PLAY_STORE_BUCKET_NAME],d=Object.assign({},b&&{app_package_name:b},c&&{bucket_name:c});return g()(d)?void 0:d},getPlatformConfig=(a,b)=>{switch(a){case"aws_s3":return getAwsS3ConfigFromFieldValues(b);case"google_play_store":return getGooglePlayStoreConfigFromFieldValues(b);default:return}},setPlatformConfig=(a,b,c)=>{switch(a){case"aws_s3":b.aws_s3_config=c;break;case"google_play_store":b.google_play_store_config=c}return b},getDataConnectionConfigInput=a=>{let b={};const{configuration:c,platform:d,values:f}=a,g=getConfiguredFields(c),h=i()(f,g),j=getPlatformConfig(d,h);if(j){const k=getPlatformConfig(d,f),l=Object.assign(e()({},k),j);b=setPlatformConfig(d,b,l)}return b},isUpdateInput=a=>"id"in a,getDataConnectionInputFromDrawerState=a=>{const b={},{authenticationId:c,configuration:d,dataConnectionId:e,metadata:f,platform:h,values:k}=a,l=getConfiguredFields(d),m=i()(k,l),n=m[j.a.DATA_CONNECTION_NAME],o=getDataConnectionConfigInput(a),p=Object.assign(b,e?{id:e}:{authentication_id:c,authentication_platform:h},f&&{metadata:f},n&&{name:n,description:n},o);return isUpdateInput(p)&&!g()(o)&&(p.status="data_connection_status_active"),p}},"rR/e":function(a,b,c){"use strict";c.d(b,"a",function(){return useDataConnectionDrawerContext});var d=c("0qsp"),e=c("t5He");const notInitialized=a=>{const{state:b,dispatch:c}=a;return null===b||null===c};function useDataConnectionDrawerContext(){const a=d.useContext(e.a);if(notInitialized(a))throw new Error("useDataConnectionDrawerContext must be used within a DataConnectionDrawerProvider");return a}},sFjQ:function(a,b,c){"use strict";var d=c("0qsp"),e=c("nPYo"),f=c("dJ5Y"),g=c("Nsy1");c("+/1c");const CopyPasteableTextArea=a=>{let{text:b,"data-testid":c="udap.connectors.drawer.copyableContent"}=a;return d.createElement(e.a.div,{"data-testid":c,css:{paddingY:"xsmall"}},d.createElement(e.a.div,{css:{position:"relative",backgroundColor:"offset",borderRadius:"10px",border:`1px solid ${f.a.color.border}`,maxHeight:"125px",lineHeight:1.25,overflow:"hidden",alignX:"end",stack:"x",alignY:"stretch",width:"fill",maxWidth:"fill"}},d.createElement(e.a.div,{css:{margin:"small",overflow:"hidden",width:"fill",maxWidth:"fill"}},d.createElement(e.a.pre,{"data-testid":`${c}.pre`,css:{margin:"xsmall",padding:"space.0",whiteSpace:"pre",textOverflow:"ellipsis"}},b)),d.createElement(e.a.div,{css:{margin:"small"}},d.createElement(g.a,{text:b}))))};b.a=CopyPasteableTextArea},siLG:function(a,b,c){"use strict";c.d(b,"a",function(){return useCreateDataConnectionMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation CreateDataConnectionMutation($input:OpenapiPostAjaxDataManagementDataConnectionsInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"7aa05116a1"){ajaxDataManagementDataConnections(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["authentication_id" "authentication_platform" "aws_s3_config.bucket_name" "aws_s3_config.path" "aws_s3_config.region" "aws_s3_config.source_data_format" "created" "description" "file_last_sync.filename" "file_last_sync.synced_at" "last_synced_at" "id" "livemode" "merchant" "metadata" "name" "status"]fragments:[]nodeLookupMap:[{nodes:["authentication_id" "authentication_platform" "created" "description" "last_synced_at" "id" "livemode" "merchant" "metadata" "name" "status"]parentPath:"ROOT"}{nodes:["bucket_name" "path" "region" "source_data_format"]parentPath:"aws_s3_config"}{nodes:["filename" "synced_at"]parentPath:"file_last_sync"}]predicates:{})@rest(type:"OpenapiDataConnectionStripeType" method:"POST" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections" queryName:"ajaxDataManagementDataConnections" bodyBuilder:$bodyBuilder){authentication_id authentication_platform aws_s3_config@type(name:"OpenapiDataConnectionApiResourceAwss3ConfigField"){bucket_name path region source_data_format}created description file_last_sync@type(name:"OpenapiDataConnectionApiResourceFileBasedLastSyncField"){filename synced_at}last_synced_at id livemode merchant metadata name status}}
          `,g=f,h={};function useCreateDataConnectionMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},"ss+H":function(a,b,c){"use strict";c.d(b,"a",function(){return GooglePlayStorePermissionsSection});var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("Vavk"),h=c("K+RN"),i=c("xGRT"),j=c("nPYo"),k=c("FfI9"),l=c("xHh/"),m=c("sFjQ"),n=c("HsXN");const o=Object(g.a)({description:{id:"udap.dataConnector.drawer.permission.google_play_store.description",defaultMessage:"Complete these steps in order to configure accurate permissions for this connector."},stepOneTitle:{id:"udap.dataConnector.drawer.permission.google_play_store.stepOneTitle",defaultMessage:"Ensure the APIs are enabled"},stepOneDescA:{id:"udap.dataConnector.drawer.permission.google_play_store.stepOneDescA",defaultMessage:"Go to your {link} dashboard. Select the project for your application."},stepOneDescB:{id:"udap.dataConnector.drawer.permission.google_play_store.stepOneDescB",defaultMessage:"Navigate to {action}. If the list on this page contains the Cloud Storage API and the Google Play Android Developer API, skip to next step."},stepOneDescC:{id:"udap.dataConnector.drawer.permission.google_play_store.stepOneDescC",defaultMessage:"If not, click on {action}. Search for Play Store, click on the result and enable Cloud Storage API and Google Play Android Developer API."},stepTwoTitle:{id:"udap.dataConnector.drawer.permission.google_play_store.stepTwoTitle",defaultMessage:"Create a Service Account"},stepTwoDescA:{id:"udap.dataConnector.drawer.permission.google_play_store.stepTwoDescA",defaultMessage:"Navigate to {action1}. Click on {action2}."},stepTwoDescB:{id:"udap.dataConnector.drawer.permission.google_play_store.stepTwoDescB",defaultMessage:"In step 1, fill in a name and description. Click on {action1}."},stepTwoDescC:{id:"udap.dataConnector.drawer.permission.google_play_store.stepTwoDescC",defaultMessage:"In step 2, select {action1} as the role. Click on {action2}. Fill in a suitable name and description."},stepTwoDescD:{id:"udap.dataConnector.drawer.permission.google_play_store.stepTwoDescD",defaultMessage:"Navigate to {action1}, copy this code block and then click on {action2}. Replace the “cloud-storage-uri” with your intended bucket name. Click on {action3}."},stepTwoDescE:{id:"udap.dataConnector.drawer.permission.google_play_store.stepTwoDescE",defaultMessage:"Click on {action1}"},stepThreeTitle:{id:"udap.dataConnector.drawer.permission.google_play_store.stepThreeTitle",defaultMessage:"Generate keys for the Service Account"},stepThreeDescA:{id:"udap.dataConnector.drawer.permission.google_play_store.stepThreeDescA",defaultMessage:"After creating the Service Account, you will be redirected to the Credentials page. Click on the Service Account you just created."},stepThreeDescB:{id:"udap.dataConnector.drawer.permission.google_play_store.stepThreeDescB",defaultMessage:"Navigate to {action1}. Click on {action2}. Select {action3} and click on {action4}."},stepThreeDescC:{id:"udap.dataConnector.drawer.permission.google_play_store.stepThreeDescC",defaultMessage:"A private key will be saved to your computer. Store this key securely, you will need to upload this on Stripe in the next screen."},stepFourTitle:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourTitle",defaultMessage:"Add the Service Account on Play Console"},stepFourDescA:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescA",defaultMessage:"Go to your {link} dashboard."},stepFourDescB:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescB",defaultMessage:"Navigate to {action1}. If you’ve already linked your Google Cloud Project skip to next step."},stepFourDescC:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescC",defaultMessage:"If not, click {action1}. Select {action2}, choose your project and click on {action3}. You will be redirected to the API access page."},stepFourDescD:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescD",defaultMessage:"In APIs section, ensure that the Google Play Android Developer API is turned {action1}. If not, click on {action2}."},stepFourDescE:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescE",defaultMessage:"Scroll down to Credentials section. Click on {action1} for the service account you just created."},stepFourDescF:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescF",defaultMessage:"Navigate to Account Permissions tab, and check the following:"},stepFourDescFOne:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescFOne",defaultMessage:"View app information and download bulk reports (read-only)"},stepFourDescFTwo:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescFTwo",defaultMessage:"View financial data, orders, and cancellation survey responses"},stepFourDescFThree:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescFThree",defaultMessage:"Manage orders and subscriptions"},stepFourDescG:{id:"udap.dataConnector.drawer.permission.google_play_store.stepFourDescG",defaultMessage:"Uncheck other permissions. Click on {action1}."}}),p="https://console.cloud.google.com/",q="https://play.google.com/console/",boldText=a=>f.createElement(j.a.span,{css:{fontWeight:"bold"}},a),r=[{title:o.stepOneTitle,body:[f.createElement(h.a,e()({},o.stepOneDescA,{values:{link:f.createElement(k.a,{href:p,target:"_blank"},"Google Cloud Console")}})),f.createElement(h.a,e()({},o.stepOneDescB,{values:{action:boldText("APIs & Services > Enabled APIs and services")}})),f.createElement(h.a,e()({},o.stepOneDescC,{values:{action:boldText("ENABLE APIS AND SERVICES")}}))]},{title:o.stepTwoTitle,body:[f.createElement(h.a,e()({},o.stepTwoDescA,{values:{action1:boldText("APIs & Services > Credentials"),action2:boldText("CREATE CREDENTIALS > Service account")}})),f.createElement(h.a,e()({},o.stepTwoDescB,{values:{action1:boldText("CREATE AND CONTINUE")}})),f.createElement(h.a,e()({},o.stepTwoDescC,{values:{action1:boldText("Storage Object Viewer"),action2:boldText("ADD IAM CONDITION")}})),f.createElement(m.a,{text:n.f}),f.createElement(h.a,e()({},o.stepTwoDescD,{values:{action1:boldText("CONDITION EDITOR"),action2:boldText("SAVE"),action3:boldText("SAVE")}})),f.createElement(h.a,e()({},o.stepTwoDescE,{values:{action1:boldText("DONE")}}))]},{title:o.stepThreeTitle,body:[f.createElement(h.a,o.stepThreeDescA),f.createElement(h.a,e()({},o.stepThreeDescB,{values:{action1:boldText("KEYS"),action2:boldText("ADD KEY > Create new key"),action3:boldText("JSON"),action4:boldText("CREATE")}})),f.createElement(h.a,o.stepThreeDescC)]},{title:o.stepFourTitle,body:[f.createElement(h.a,e()({},o.stepFourDescA,{values:{link:f.createElement(k.a,{href:q,target:"_blank"},"Play Console")}})),f.createElement(h.a,e()({},o.stepFourDescB,{values:{action1:boldText("Setup > API access")}})),f.createElement(h.a,e()({},o.stepFourDescC,{values:{action1:boldText("Choose a project to link"),action2:boldText("Link an existing Google Cloud project"),action3:boldText("SAVE")}})),f.createElement(h.a,e()({},o.stepFourDescD,{values:{action1:boldText("ON"),action2:boldText("Turn on")}})),f.createElement(h.a,e()({},o.stepFourDescE,{values:{action1:boldText("Manage Play Console permissions")}})),f.createElement(l.a,{body:o.stepFourDescF,list:[o.stepFourDescFOne,o.stepFourDescFTwo,o.stepFourDescFThree],listStyleType:"disc",inline:!0}),f.createElement(h.a,e()({},o.stepFourDescG,{values:{action1:boldText("Invite User")}}))]}],GooglePlayStorePermissionsSection=()=>{const a=Object(i.a)();return f.createElement(j.a.div,{css:{stack:"y",gap:"medium",lineHeight:"20px"}},f.createElement(h.a,o.description),r.map((b,c)=>{let{title:d,body:e}=b;return f.createElement(j.a.div,{key:c},f.createElement(j.a.div,{css:{font:"heading.small"}},`${c+1}. ${a.formatMessage(d)}`),f.createElement(j.a.div,{css:{margin:"small",marginLeft:"medium",stack:"y",gap:"medium"}},e.map(a=>a)))}))}},t5He:function(a,b,c){"use strict";var d=c("LG4H"),e=c("4/db");c.d(b,"a",function(){return e.a}),b.b=d.a},tCiI:function(a,b,c){"use strict";c.d(b,"b",function(){return g}),c.d(b,"a",function(){return useGetAllDataConnectionsQuery});var d=c("qCo4"),e=c("bPOr");const f=e.a`
            query GetAllDataConnectionsQuery($input:OpenapiGetAjaxDataManagementDataConnectionsInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"1420ab9675"){ajaxDataManagementDataConnections(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["data.authentication_id" "data.authentication_platform" "data.aws_s3_config.bucket_name" "data.aws_s3_config.path" "data.aws_s3_config.region" "data.aws_s3_config.source_data_format" "data.created" "data.description" "data.file_last_sync.synced_at" "data.file_last_sync.filename" "data.last_synced_at" "data.id" "data.livemode" "data.merchant" "data.metadata" "data.name" "data.status" "data.error" "has_more"]fragments:[]nodeLookupMap:[{nodes:["authentication_id" "authentication_platform" "created" "description" "last_synced_at" "id" "livemode" "merchant" "metadata" "name" "status" "error"]parentPath:"data"}{nodes:["bucket_name" "path" "region" "source_data_format"]parentPath:"data.aws_s3_config"}{nodes:["synced_at" "filename"]parentPath:"data.file_last_sync"}{nodes:["has_more"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiGetAjaxDataManagementDataConnections" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections" queryName:"ajaxDataManagementDataConnections"){data@type(name:"OpenapiDataConnectionStripeType"){authentication_id authentication_platform aws_s3_config@type(name:"OpenapiDataConnectionApiResourceAwss3ConfigField"){bucket_name path region source_data_format}created description file_last_sync@type(name:"OpenapiDataConnectionApiResourceFileBasedLastSyncField"){synced_at filename}last_synced_at id livemode merchant metadata name status error}has_more}}
          `,g=f,h={};function useGetAllDataConnectionsQuery(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},tS6Y:function(a,b,c){"use strict";c.d(b,"a",function(){return k});var d=c("Vavk"),e=c("wlYy"),f=c("7PNT"),g=c("qQpw");const h=Object(d.a)({editAuthenticationDrawerSubtitleAppStore:{id:"udap.dataConnector.appStoreConnect.editAuthentication.drawer.subtitle.appStore",defaultMessage:"Set up Stripe Connector for {platform}"},buttonLabelBack:{id:"udap.dataConnector.appStoreConnect.button.label.previous",defaultMessage:"Back"},editAuthenticationDrawerTitleAuthentication:{id:"udap.dataConnector.appStoreConnect.editAuthentication.drawer.title.authentication",defaultMessage:"Authentication"},buttonLabelAuthenticate:{id:"udap.dataConnector.appStoreConnect.button.label.authenticate",defaultMessage:"Authenticate"},appStoreAuthDescHeading:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDesc.heading",defaultMessage:"Generate an API key"},appStoreAuthDescBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDesc.body",defaultMessage:"In your App Store Connect dashboard, navigate to {action1}. Click on {action2} to generate a new API key. Add a {action3}, and select {action4} under the access menu."},appStoreAuthDescBodyAction1:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDesc.body.action1",defaultMessage:"Users and Access > Keys"},appStoreAuthDescBodyAction2:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDesc.body.action2",defaultMessage:"Add (+)"},appStoreAuthDescBodyAction3:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDesc.body.action3",defaultMessage:"name"},appStoreAuthDescBodyAction4:{id:"udap.dataConnector.appStoreConnect.appStoreAuthDesc.body.action4",defaultMessage:"Finance role"},appStoreAuthCredsHeading:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.heading",defaultMessage:"Enter credentials"},appStoreAuthCredsPrivateKeyLabel:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.privateKey.label",defaultMessage:"Private Key"},appStoreAuthCredsPrivateKeyBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.privateKey.body",defaultMessage:"Hover on the newly generated API key, click on {action}."},appStoreAuthCredsPrivateKeyAction:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.privateKey.action",defaultMessage:"Download API Key"},appStoreAuthCredsKeyIdLabel:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.keyId.label",defaultMessage:"Key ID"},appStoreAuthCredsKeyIdBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.keyId.body",defaultMessage:"Key ID is visible in the third column of the Active keys table."},appStoreAuthCredsIssuerIdLabel:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.issuerId.label",defaultMessage:"Issuer ID"},appStoreAuthCredsIssuerIdBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.issuerId.body",defaultMessage:"The Issuer ID is visible just above the Active keys table."},appStoreAuthCredsVendorNumberLabel:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.vendorNumber.label",defaultMessage:"Vendor number"},appStoreAuthCredsVendorNumberBody:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.vendorNumber.body",defaultMessage:"Go back to App Store Connect dashboard page, navigate to {action}. The Vendor number is in the top-left-corner under the Legal entity name."},appStoreAuthCredsVendorNumberAction:{id:"udap.dataConnector.appStoreConnect.appStoreAuthCreds.vendorNumber.action",defaultMessage:"Payments and Financial Reports"},authNote:{id:"udap.dataConnector.appStoreConnect.editAuthNote",defaultMessage:"Note:"},authNoteOne:{id:"udap.dataConnector.appStoreConnect.editAuthNoteOne",defaultMessage:"Stripe will fetch all data for the last 12 months."},authNoteOneDuration:{id:"udap.dataConnector.appStoreConnect.editAuthNoteOneDuration",defaultMessage:"90 days"},authNoteTwo:{id:"udap.dataConnector.appStoreConnect.editAuthNoteTwo",defaultMessage:"Subsequently, data is fetched once daily."}}),i=e.c.APPLE_APP_STORE,j={header:{title:h.editAuthenticationDrawerTitleAuthentication,subtitle:a=>a.formatMessage(h.editAuthenticationDrawerSubtitleAppStore,{platform:`Apple App Store${g.a}`})},footer:{primaryLabel:h.buttonLabelAuthenticate,secondaryLabel:h.buttonLabelBack},body:[{component:e.b.ContentSection,props:{heading:h.appStoreAuthDescHeading,body:[h.appStoreAuthDescBody,[["action1",h.appStoreAuthDescBodyAction1],["action2",h.appStoreAuthDescBodyAction2],["action3",h.appStoreAuthDescBodyAction3],["action4",h.appStoreAuthDescBodyAction4]]]}},{component:e.b.ContentSection,props:{heading:h.appStoreAuthCredsHeading}},{component:e.b.ContentSection,props:{label:h.appStoreAuthCredsPrivateKeyLabel,body:[h.appStoreAuthCredsPrivateKeyBody,[["action",h.appStoreAuthCredsPrivateKeyAction]]],inline:!0}},{component:e.b.FormFieldsSection,props:{fields:[f.a.APP_STORE_PRIVATE_KEY]}},{component:e.b.ContentSection,props:{label:h.appStoreAuthCredsKeyIdLabel,body:h.appStoreAuthCredsKeyIdBody,inline:!0}},{component:e.b.FormFieldsSection,props:{fields:[f.a.APP_STORE_KEY_ID]}},{component:e.b.ContentSection,props:{label:h.appStoreAuthCredsIssuerIdLabel,body:h.appStoreAuthCredsIssuerIdBody,inline:!0}},{component:e.b.FormFieldsSection,props:{fields:[f.a.APP_STORE_ISSUER_ID]}},{component:e.b.ContentSection,props:{inline:!0,label:h.appStoreAuthCredsVendorNumberLabel,body:[h.appStoreAuthCredsVendorNumberBody,[["action",h.appStoreAuthCredsVendorNumberAction]]]}},{component:e.b.FormFieldsSection,props:{fields:[f.a.APP_STORE_VENDOR_NUMBER]}},{component:e.b.Divider},{component:e.b.ContentSection,props:{label:h.authNote,list:[[h.authNoteOne,[["duration",h.authNoteOneDuration]]],h.authNoteTwo]}},{component:e.b.LegalDisclaimerSection,props:{platform:i,step:"auth"}}],fields:[{id:f.a.APP_STORE_PRIVATE_KEY,required:!0},{id:f.a.APP_STORE_PRIVATE_KEY_FILENAME,required:!0},{id:f.a.APP_STORE_KEY_ID,required:!0},{id:f.a.APP_STORE_ISSUER_ID,required:!0},{id:f.a.APP_STORE_VENDOR_NUMBER,required:!0}],actions:{onExit:[e.a.UpdateDataConnection]}},k=[j]},tdYj:function(a,b,c){"use strict";c.d(b,"a",function(){return useGetAwsS3RoleQuery});var d=c("qCo4"),e=c("bPOr");const f=e.a`
            query GetAwsS3RoleQuery($input:OpenapiGetAjaxDataManagementDataConnectionsAwsS3RoleInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"50d73404af"){role:ajaxDataManagementDataConnectionsAwsS3Role(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["role"]fragments:[]nodeLookupMap:[{nodes:["role"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiDataConnectionAwsS3Role" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/data_management/data_connections/aws_s3_role" queryName:"role"){name:role}}
          `,g=f,h={expectedErrors:[],variables:{v1Context:{betaHeaders:{udap_dc_beta:"v1"}}},fetchPolicy:"cache-and-network"};function useGetAwsS3RoleQuery(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a,{variables:Object.assign({},h.variables,a.variables)}))}const i={};f.permissions=i},teAa:function(a,b,c){"use strict";c.d(b,"a",function(){return useUpdateConnector});var d=c("ju5j"),e=c("SOov"),f=c("2gaA"),g=c("qx3r");const h="Could not retrieve query.",handleSpecificErrorMessages=(a,b)=>"apple_app_store"===b.state.platform||"google_play_store"===b.state.platform?a:"Something went wrong. Click on 'Done' again.",handleError=(a,b)=>{const{state:c,dispatch:d}=b;return d({type:"SET_NOTICE",payload:{type:"critical",description:handleSpecificErrorMessages(a.message,b),step:c.step}}),!1},updateAuthentication=async(a,b)=>{var c;const d=Object(f.b)(a.state),e={variables:{input:d,v1Context:{betaHeaders:{udap_dc_beta:"v1"}}}},{data:g,error:h}=await b(e);if(h||!(null!=g&&null!==(c=g.putAjaxDataManagementAuthenticationsId)&& void 0!==c&&c.id))throw h;return g.putAjaxDataManagementAuthenticationsId.id},updateDataConnection=async(a,b)=>{var c;const d=Object(g.a)(a.state),e={variables:{input:d,v1Context:{betaHeaders:{udap_dc_beta:"v1"}}}},{data:f,error:i}=await b(e);if(i||!(null!=f&&null!==(c=f.putAjaxDataManagementDataConnectionsId)&& void 0!==c&&c.id))throw new Error(h);return f.putAjaxDataManagementDataConnectionsId.id},useUpdateConnector=()=>{const[a]=Object(e.a)(),[b]=Object(d.a)();return async c=>{try{const d=await Promise.all([updateDataConnection(c,a),updateAuthentication(c,b)]);if(!d.every(a=>!!a))throw new Error("An unexpected error occurred.");return!0}catch(e){return handleError(e,c)}}}},"u+e6":function(a,b,c){"use strict";c.d(b,"a",function(){return k});var d=c("Vavk"),e=c("wlYy"),f=c("7PNT"),g=c("qQpw");const h=Object(d.a)({editDataConnectionNameDrawerTitleRequirements:{id:"udap.dataConnector.appStoreConnect.editDataConnectionName.drawer.title.requirements",defaultMessage:"Edit name"},editDataConnectionNameDrawerSubtitleAppStore:{id:"udap.dataConnector.appStoreConnect.editDataConnectionName.drawer.subtitle.appStore",defaultMessage:"Set up Stripe Connector for {platform}"},buttonLabelBack:{id:"udap.dataConnector.appStoreConnect.button.label.previous",defaultMessage:"Back"},saveChanges:{id:"udap.dataConnector.appStoreConnect.button.label.saveChanges",defaultMessage:"Save changes"}}),i=e.c.APPLE_APP_STORE,j={header:{title:h.editDataConnectionNameDrawerTitleRequirements,subtitle:a=>a.formatMessage(h.editDataConnectionNameDrawerSubtitleAppStore,{platform:`Apple App Store${g.a}`})},footer:{primaryLabel:h.saveChanges,secondaryLabel:h.buttonLabelBack},body:[{component:e.b.PlatformIconsCard,props:{platform:i}},{component:e.b.FormFieldsSection,props:{fields:[f.a.DATA_CONNECTION_NAME]}}],fields:[{id:f.a.DATA_CONNECTION_NAME,required:!0}],actions:{onExit:[e.a.ValidateDataConnectionName,e.a.UpdateDataConnection]}},k=[j]},uZ4b:function(a,b,c){"use strict";var d=c("0qsp"),e=c("K+RN"),f=c("7Hnw"),g=c("pA0n");const ActionButton=a=>{let{type:b,disabled:c=!1,label:g,onPress:h}=a;return d.createElement(f.a,{type:b,disabled:c,onPress:h},d.createElement(e.a,g))},DataConnectionDrawerFooter=a=>{let{footer:b,primaryDisabled:c,secondaryDisabled:e,handlePrimary:f,handleSecondary:h}=a;const i=b.primaryButtonType||"primary";return d.createElement(g.c,{primaryAction:d.createElement(ActionButton,{type:i,label:b.primaryLabel,disabled:c,onPress:f}),secondaryAction:!e&&d.createElement(ActionButton,{type:"secondary",label:b.secondaryLabel,onPress:h})})};b.a=DataConnectionDrawerFooter},"v/vJ":function(a,b,c){"use strict";var d=c("QjSg");c.d(b,"a",function(){return d.a});var e=c("gJSr");c.d(b,"b",function(){return e.a});var f=c("D9qh");c.d(b,"c",function(){return f.a});var g=c("9gDP");c.d(b,"d",function(){return g.a});var h=c("A1M3");c.d(b,"e",function(){return h.a})},wIG7:function(a,b,c){"use strict";c.d(b,"a",function(){return h});var d=c("8OBj"),e=c.n(d),f=c("0qsp");const g=f.forwardRef(function(a,b){return f.createElement("svg",e()(e()({},a),{},{ref:b}),f.createElement("rect",{width:"32",height:"32",fill:"#045AD0"}),f.createElement("path",{fill:"white",d:"M8.70605 23.501L14.0879 8H17.9014L23.2939 23.501H19.8779L18.7285 19.7412H13.2607L12.1113 23.501H8.70605ZM15.9033 11.0938L14.002 17.3135H17.9873L16.0967 11.0938H15.9033Z"}))});g.defaultProps={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};const h={category:"brand",colorable:!1,name:"appleappstore",svg:g}},wbB0:function(a,b,c){"use strict";var d=c("8OBj"),e=c.n(d),f=c("0qsp"),g=c("Vavk"),h=c("xGRT"),i=c("AZzO"),j=c("zw7C");const k="^(\\d{4}-\\d{4}-\\d{4})$",l=Object(g.a)({label:{id:"udap.dataConnector.dataConnection.field.awsAccountId.label",defaultMessage:"Account ID"},placeholder:{id:"udap.dataConnector.dataConnection.field.awsAccountId.placeholder",defaultMessage:"5555-5555-5555"},required:{id:"udap.dataConnector.dataConnection.field.dataConnectionName.validation.required",defaultMessage:"{field} is required"},requiredFormat:{id:"udap.dataConnector.dataConnection.field.awsAccountId.validation.requiredFormat",defaultMessage:"{field} does not match the expected format."}}),m={},n={},tokensOfState=a=>{const{value:b,start:c,end:d}=a;return[...b.substring(0,c).split(""),m,...b.substring(c,d).split(""),n,...b.substring(d).split("")]},resultOfToken=(a,b)=>{switch(b){case 4:case 8:return["-",a];default:if(b>11)return[];return[a]}},formatNumber=a=>{const b=a.filter(a=>"object"==typeof a||a.match(/\d/)),c=b.reduce((a,b)=>"object"==typeof b?e()(e()({},a),{},{result:[...a.result,b]}):{result:[...a.result,...resultOfToken(b,a.digits)],digits:a.digits+1},{result:[],digits:0}).result;return{value:c.filter(a=>"string"==typeof a).join(""),start:c.indexOf(m),end:c.indexOf(n)-1}},AwsAccountIdField=a=>{let{field:b,onChange:c,onBlur:d}=a;const e=Object(h.a)(),g=f.useRef(!1),m=f.useRef(null),[n,o]=f.useState(b.value),p=f.useMemo(()=>[{pattern:"^.",message:e.formatMessage(l.required,{field:e.formatMessage(l.label)})},{pattern:k,message:e.formatMessage(l.requiredFormat,{field:e.formatMessage(l.label)})}],[e]);f.useEffect(()=>{const a=setTimeout(()=>d(p,n),1e3);if(g.current){if(b.value===n)return()=>clearTimeout(a)}else g.current=!0},[b.value,d,p,n]);const handleChange=a=>{if(!m.current)return;const b=tokensOfState({value:a.target.value,start:m.current.selectionStart,end:m.current.selectionEnd}),{value:d,start:e,end:f}=formatNumber(b),g=d.slice(0,14);o(g),m.current.setSelectionRange(e,f),c(g)},handleBlur=()=>d(p,n);return f.createElement(j.a,null,f.createElement(i.c,{ref:m,css:{marginBottom:"xlarge"},required:!0,label:e.formatMessage(l.label),placeholder:e.formatMessage(l.placeholder),value:n||"",error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur}))};b.a=AwsAccountIdField},wlYy:function(a,b,c){"use strict";c.d(b,"c",function(){return d}),c.d(b,"b",function(){return e}),c.d(b,"a",function(){return f});let d;!function(a){a.APPLE_APP_STORE="apple_app_store",a.AWS_S3="aws_s3",a.GOOGLE_PLAY_STORE="google_play_store",a.PAYPAL="paypal",a.ADYEN="adyen"}(d||(d={}));let e;!function(a){a.ContentSection="content-section",a.CopyPasteableTextArea="copy-pasteable-text-area",a.Divider="divider",a.FilePreviewSection="file-preview-section",a.FormFieldsSection="form-fields-section",a.LegalDisclaimerSection="legal-disclaimer-section",a.PermissionsSection="permissions-section",a.PlatformIconsCard="platform-icons-card"}(e||(e={}));let f;!function(a){a.CreateDataConnection="create-data-connection",a.CreateFilePreview="create-file-preview",a.UpdateDataConnection="update-data-connection",a.ValidateDataConnectionName="validate-data-connection-name"}(f||(f={}))},"wz/5":function(a,b,c){"use strict";var d=c("0qsp"),e=c("nPYo"),f=c("PAOL");const PolicyContent=a=>{let{content:b,heading:c,beforeContent:g,afterContent:h,"data-testid":i="udap.connectors.drawer.policyContent"}=a;return d.createElement(e.a.div,{"data-testid":i,css:{stack:"y",gap:"xsmall",marginBottom:"small"}},c&&d.createElement(e.a.div,{css:{font:"heading.small"}},c),d.createElement(e.a.div,{css:{stack:"y",gap:"small"}},g&&d.createElement(e.a.span,{css:{font:"label.medium"}},g),d.createElement(f.a,{text:b}),h&&d.createElement(e.a.span,{css:{font:"label.medium"}},h)))};b.a=PolicyContent},"xHh/":function(a,b,c){"use strict";var d=c("AhHR");b.a=d.a},xUCD:function(a,b,c){"use strict";var d=c("8OBj"),e=c.n(d),f=c("/q1G"),g=c.n(f),h=c("7PNT"),i=c("WY/Y");const reducer=(a,b)=>{switch(b.type){case"NEXT_STEP":return e()(e()({},a),{},{step:a.step+1});case"PREV_STEP":return e()(e()({},a),{},{step:a.step-1});case"SET_AUTHENTICATION_ID":return e()(e()({},a),{},{authenticationId:b.payload});case"SET_CONFIGURATION":const c={};return b.payload&&b.payload.forEach(a=>a.fields.forEach(a=>{c[a.id]=null})),e()(e()({},a),{},{configuration:b.payload,values:c});case"SET_ERROR":return e()(e()({},a),{},{errors:e()(e()({},a.errors),{},{[b.payload.id]:b.payload.message})});case"SET_FILE_PREVIEW":return e()(e()({},a),{},{filePreview:b.payload});case"SET_LOADING":return e()(e()({},a),{},{isLoading:b.payload});case"SET_NOTICE":return e()(e()({},a),{},{notice:b.payload});case"SET_OPEN":return!1===b.payload&&(a.notice=void 0),e()(e()({},a),{},{isOpen:b.payload});case"SET_OVERRIDES":return g()(a,b.payload);case"SET_PLATFORM":return e()(e()({},a),{},{platform:b.payload});case"SET_STATE":return e()({},b.payload);case"SET_VALUE":const d=e()(e()({},a),{},{values:e()(e()({},a.values),{},{[b.payload.id]:b.payload.value})});if([h.a.AWS_ACCOUNT_ID,h.a.AWS_S3_BUCKET,h.a.AWS_S3_REGION,h.a.AWS_S3_PREFIX].includes(b.payload.id)&&(d.filePreview=void 0),b.payload.id===h.a.APP_STORE_KEY_ID&&(d.values.app_store_private_key_filename=`AuthKey_${b.payload.value}.p8`),b.payload.id===h.a.APP_STORE_PRIVATE_KEY&&d.values.app_store_key_id&&(d.values.app_store_private_key_filename=`AuthKey_${d.values.app_store_key_id}.p8`),b.payload.id===h.a.PLAY_STORE_CREDENTIALS_STRING){if("string"==typeof b.payload.value&&b.payload.value.length)try{const{project_id:f,private_key:j,private_key_id:k,client_email:l,client_id:m}=Object(i.q)(b.payload.value);d.values.play_store_project_id=f,d.values.play_store_private_key=j,d.values.play_store_private_key_id=k,d.values.play_store_client_email=l,d.values.play_store_client_id=m}catch(n){}else d.values.play_store_project_id=null,d.values.play_store_private_key=null,d.values.play_store_private_key_id=null,d.values.play_store_client_email=null,d.values.play_store_client_id=null}return d;default:throw new Error(`Unhandled action type: ${JSON.stringify(b,null,2)}`)}};b.a=reducer},xfnT:function(a,b,c){"use strict";var d=c("0qsp"),e=c("Vavk"),f=c("xGRT"),g=c("AZzO"),h=c("zw7C");const i=Object(e.a)({label:{id:"udap.dataConnector.dataConnection.field.appleAppStoreIssuerId.label",defaultMessage:"Issuer ID"},placeholder:{id:"udap.dataConnector.dataConnection.field.appleAppStoreIssuerId.placeholder",defaultMessage:"Paste private key"},required:{id:"udap.dataConnector.dataConnection.field.appleAppStoreIssuerId.validation.required",defaultMessage:"{field} is required"}}),AppleAppStoreIssuerIdField=a=>{let{field:b,onChange:c,onBlur:e}=a;const j=Object(f.a)(),[k,l]=d.useState(b.value),m=d.useMemo(()=>[{pattern:"^.",message:j.formatMessage(i.required,{field:j.formatMessage(i.label)})}],[j]);d.useEffect(()=>{const a=setTimeout(()=>e(m,k),1e3);if(b.value===k)return()=>clearTimeout(a)},[b.value,e,m,k]);const handleChange=a=>{l(a.target.value),c(a.target.value)},handleBlur=()=>{e(m,k)};return d.createElement(h.a,null,d.createElement(g.c,{required:!0,css:{marginBottom:"xlarge"},value:k||"",label:j.formatMessage(i.label),hiddenElements:["label"],placeholder:j.formatMessage(i.placeholder),error:b.error,invalid:!!b.error,onChange:handleChange,onBlur:handleBlur}))};b.a=AppleAppStoreIssuerIdField},xmgQ:function(a,b,c){"use strict";var d=c("8OBj"),e=c.n(d),f=c("QbI9"),g=c.n(f),h=c("0qsp"),i=c("Vavk"),j=c("xGRT"),k=c("K+RN"),l=c("ZgPq"),m=c("nPYo"),n=c("a/jI"),o=c("qiw5"),p=c("YDvS"),q=c("At0j"),r=c("D3In");const s=Object(i.a)({label:{id:"udap.dataConnector.dataConnection.field.dataTemplate.label",defaultMessage:"Data template"},description:{id:"udap.dataConnector.dataConnection.field.dataTemplate.description",defaultMessage:"Select the data template to associate with this connection."},placeholder:{id:"udap.dataConnector.dataConnection.field.dataTemplate.placeholder",defaultMessage:"Search…"},error:{id:"udap.dataConnector.dataConnection.field.dataTemplate.error",defaultMessage:"Error!"},notFound:{id:"udap.dataConnector.dataConnection.field.dataTemplate.notFound",defaultMessage:"No results found"}}),t=["CONFIGURATION_STATUS_ACTIVE"],getSearchableText=a=>a.value,DataTemplateSelect=a=>{let{dataTemplates:b,field:c,onChange:d,onBlur:e}=a;const f=Object(j.a)(),[i,r]=h.useState(c.value),[t,u]=h.useState(i?b.find(a=>a.key===c.value):null);h.useEffect(()=>{u(b.find(a=>a.key===i))},[b,i]);const v=Object(q.i)(h.useCallback(Object(q.h)(getSearchableText,b),[b])),w=Object(l.b)(),x=Object(l.b)(),y=Object(l.b)(),renderItem=a=>h.createElement(h.Fragment,null,a.entry.value),renderEmpty=()=>h.createElement(h.Fragment,null,h.createElement(q.e,null,h.createElement(k.a,s.notFound))),renderError=()=>h.createElement(m.a.div,{css:{padding:"small"}},h.createElement(m.a.span,{css:{color:"error"}},h.createElement(k.a,s.error))),getButtonLabel=a=>`${a.value}`,getFormValue=a=>`${a.value}`,z=h.useCallback(a=>{u(a),d(null==a?void 0:a.key),e([],null==a?void 0:a.key)},[d,e]);return h.useEffect(()=>{r(null==t?void 0:t.key)},[t]),h.createElement(m.a.div,{css:{marginBottom:"xlarge",stack:"y",gap:"xsmall",zIndex:0}},h.createElement(m.a.div,{css:{stack:"y",gap:"space.0"}},h.createElement(n.a,{id:y,css:{width:"fit"}},h.createElement(k.a,s.label)),h.createElement(o.c,{css:{color:"subdued",fontSize:"label.small"},id:w},h.createElement(k.a,s.description))),h.createElement(m.a.div,null,h.createElement(q.d,g()({},v,{inputPlaceholder:f.formatMessage(s.placeholder),getSearchableText:getSearchableText,onChange:z,value:t,width:"maximized",renderItem:renderItem,renderEmpty:renderEmpty,renderError:renderError,getButtonLabel:getButtonLabel,getFormValue:getFormValue}))),c.error&&h.createElement(p.a,{type:"error",id:x},c.error))},DataTemplateField=a=>{var b;const{data:c,loading:d}=Object(r.a)({fetchPolicy:"cache-and-network",pollInterval:1e4,variables:{input:{statuses:t}}}),f=h.useMemo(()=>{var a;if(d)return[{key:"",value:"Loading..."}];const b=(null==c?void 0:null===(a=c.list)|| void 0===a?void 0:a.source_data_formats)||[],e=b.map(a=>({key:a.id,value:a.name}));return e},[d,null==c?void 0:null===(b=c.list)|| void 0===b?void 0:b.source_data_formats]);return h.createElement(DataTemplateSelect,e()(e()({},a),{},{dataTemplates:f}))};b.a=DataTemplateField},ySIj:function(a,b,c){"use strict";var d=c("8OBj"),e=c.n(d),f=c("QbI9"),g=c.n(f),h=c("0qsp"),i=c("nPYo"),j=c("HOsA"),k=c("hjOL"),l=c("Wu+W");const getIconProps=a=>{switch(a){case!0:return{icon:k.a,css:{fill:"onFeedback.success"}};case!1:return{icon:l.a,css:{fill:"onFeedback.critical"}};default:return{icon:k.a,css:{fill:"onFeedback.neutral.subdued"}}}},getTextProps=a=>!0===a?{textColor:"text"}:{textColor:"subdued"},CheckGroupItem=a=>{let{valid:b,label:c,type:d}=a;const[f,k]=h.useState(void 0);return(h.useEffect(()=>{b.then(a=>k(a))},[b]),"error"!==d|| !1===f)?h.createElement(i.a.div,{css:{stack:"x",alignY:"center",gap:"space.150"}},h.createElement(j.c,g()({},getIconProps(f),{size:"xsmall"})),h.createElement(i.a.span,{css:e()({font:"body.small"},getTextProps(f))},c)):h.createElement(h.Fragment,null)},CheckGroup=a=>{let{items:b,children:c}=a;return h.createElement(i.a.div,{css:{stack:"y",gap:"small"}},b&&b.map((a,b)=>h.createElement(CheckGroupItem,g()({key:b},a))),c)};b.a=CheckGroup}}])
//# sourceMappingURL=https://sourcemaps.corp.stripe.com/dashboard-fe-statics-srv/dashboard.I-Cx-01.7258d635fc.min.js.map