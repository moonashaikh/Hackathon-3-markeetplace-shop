(window["__load"]=window["__load"]||[]).push([["app_drawer~sandbox_scheduler"],{"2ulG":function(a,b,c){"use strict";var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("wO8l"),h=c("HyUj"),i=c("bHWS"),j=c("U/5g"),k=c("b/fh"),l=c("5kNV"),m=c("T6JN"),n=c("i37l"),o=c("RVZe"),p=c("KMTT"),q=c("xGRT"),r=c("K+RN"),s=c("Macp"),t=c("XCqV"),u=c("rPDH"),v=c("biIe"),w=c("QugM"),x=c("6Rp3"),y=c("RWq0"),z=c("o/AW"),A=c("ipJW"),B=c("09jD"),C=c("Gp6x"),D=c("Al4q"),E=c("KqhH");const{useContext:F,useState:G}=f,H=8,AppDrawerOverflowMenu=a=>{let{activeApp:b,inDeveloperMode:c,isTestApp:d,setIsDisablePreviewModalOpen:e,color:h,offset:i}=a;const j=Object(q.a)(),{id:k}=Object(B.x)(),o=!d&&""!==b.owner&&k===b.owner,s=f.createElement(g.ButtonLink,{"aria-label":j.formatMessage(E.a.more),label:f.createElement(p.CompactTooltip,{context:f.createElement(m.default,{color:h,icon:n.a,style:{position:"relative",top:i}}),label:f.createElement(r.a,E.a.more),position:"below"})});if(c)return f.createElement(l.e,{"data-testid":"previewmode-actions",items:[f.createElement(l.c,{href:t.d.settingsPreview,target:"_blank"},f.createElement(r.a,E.a.settingsPreview)),f.createElement(l.c,{onClick:()=>e(!0)},f.createElement(r.a,E.a.disablePreview))]},s);const u=`https://support.stripe.com/contact/email?q=${b.name}`;return f.createElement(l.e,{items:[f.createElement(l.c,{href:t.d.getAppSettings(b.extension_id)},f.createElement(r.a,E.a.settings)),...o?[f.createElement(l.c,{"data-testid":"tailor-app-details-link",href:t.d.getAppDetail(b.extension_id)},f.createElement(r.a,E.a.details))]:[],f.createElement(l.c,{"data-testid":"report-app-link",href:u,target:"_blank"},f.createElement(r.a,E.a.report))]},s)},AppDrawerCloseButton=a=>{let{onClick:b,color:c,offset:d}=a;const e=Object(q.a)();return f.createElement(g.ButtonLink,{className:"db-TailorAppDrawerClose","aria-label":e.formatMessage(E.a.close),label:f.createElement(p.CompactTooltip,{context:f.createElement(m.default,{icon:o.a,color:c,style:{position:"relative",top:d}}),label:f.createElement(r.a,E.a.close),position:"below"}),onClick:b})},TailorAppDrawerHeader=a=>{let{activeApp:b,onClose:c}=a;const d=Object(s.f)((null==b?void 0:b.extension_id)||""),[l,m]=G(!1),n=(null==b?void 0:b.channel_name)===z.c.TESTING,{brandContext:o}=F(y.a),q=d&&!(null!=o&&o.brandIcon)&&!(null!=o&&o.brandColor),t=null!=o&&o.brandColor?Object(C.a)(null==o?void 0:o.brandColor):-1,B=t<0,I=B?"gray800":"white",J=`rgba(${B?"0,0,0,.05":"255,255,255,.25"})`,K=[];return q&&K.push(f.createElement(h.default,{key:"drawer-app-indicator-brand-warning","data-testid":"drawer-app-indicator-brand-warning"},f.createElement(i.Caption,null,f.createElement(r.a,e()({},E.a.warningMissingBrand,{values:{context_view:f.createElement(i.CaptionAltMono,null,"ContextView"),brand_color:f.createElement(j.default,{label:"brandColor"}),brand_icon:f.createElement(j.default,{label:"brandIcon"})}}))),f.createElement(g.ButtonLink,{icon:A.a,label:f.createElement(r.a,E.a.warningMissingBrandCTA),iconPosition:"right",size:"small",href:"https://stripe.com/docs/stripe-apps/ui-toolkit/components/contextview",target:"_blank"}))),f.createElement(f.Fragment,null,d&&(null==b?void 0:b.extension_id)&&f.createElement(v.a,{warnings:K},f.createElement(r.a,E.a.previewNotice)),f.createElement(h.default,{"data-testid":"drawer-app-indicator",className:"db-DrawerAppIndicator",padding:{vertical:8,horizontal:u.b},background:b?"gray50":null,divider:b?{side:"bottom"}:null,flex:{alignItems:"center"},style:{backgroundColor:(null==o?void 0:o.brandColor)||void 0}},b&&f.createElement(h.default,{margin:{right:H}},f.createElement(x.a,{imgSrc:(null==o?void 0:o.brandIcon)||b.icon,title:b.name,hidden:!0})),f.createElement(h.default,{flex:{justifyContent:b?"space-between":"flex-end",alignItems:"center"},style:{overflow:"hidden",flexGrow:1}},b&&f.createElement(f.Fragment,null,f.createElement(h.default,{style:{overflow:"hidden"}},f.createElement(i.BodyAlt,{color:I},f.createElement(k.default,{title:b.name},b.name))),n&&f.createElement(p.TooltipContainer,{contentPadding:12,style:{flexGrow:2},position:"below",context:f.createElement(h.default,{margin:{left:H}},f.createElement(j.default,{"data-testid":"apps-test-channel-badge",label:f.createElement("span",{style:{color:I}},f.createElement(r.a,E.a.testAppLabel)),style:{backgroundColor:J}})),tooltipContents:f.createElement(r.a,e()({},E.a.testAppDescription,{values:{app_name:b.name}}))})),f.createElement(D.default,{direction:"horizontal",spacing:{horizontal:12},style:{marginLeft:H}},b&&f.createElement(AppDrawerOverflowMenu,{color:I,activeApp:b,inDeveloperMode:d,isTestApp:n,setIsDisablePreviewModalOpen:m,offset:3}),f.createElement(AppDrawerCloseButton,{onClick:c,color:I,offset:3})))),d&&f.createElement(w.a,{open:l,setOpen:m}))};b.a=TailorAppDrawerHeader},"6Rp3":function(a,b,c){"use strict";var d=c("0qsp"),e=c("Q9PI");const TailorAppIcon=a=>{let{imgSrc:b,title:c,hidden:f=!1,iconRef:g,size:h="small",style:i}=a;const[j,k]=d.useState(!1);return b&&!j?d.createElement("img",{className:Object(e.a)("db-TailorAppDock-imgIcon",{"db-TailorAppDock-icon--large":"large"===h,"db-TailorAppDock-icon--extra-small":"extra-small"===h}),src:b,ref:g,"aria-label":c,"aria-hidden":f,onError:()=>k(!0),style:i}):d.createElement("div",{className:Object(e.a)("db-TailorAppDock-textIcon",{"db-TailorAppDock-icon--large":"large"===h,"db-TailorAppDock-icon--extra-small":"extra-small"===h}),ref:g,"aria-label":c,"aria-hidden":f,style:i},c[0])};b.a=TailorAppIcon},EyaR:function(a,b,c){"use strict";var d=c("0qsp"),e=c("HyUj"),f=c("wO8l"),g=c("TMhk"),h=c("kfQY"),i=c("KMTT"),j=c("RVZe"),k=c("Macp"),l=c("gqQ3"),m=c("K+RN"),n=c("bHZi"),o=c("n8yP");const DisablePreviewModeModal=a=>{let{open:b,setOpen:c}=a;const[i,j]=d.useState(!1),p=Object(k.h)(),[q]=Object(n.a)({update(a){a.writeQuery({query:o.b,data:{ajaxAppsDevmode:{__typename:"OpenapiTailorDashboardGetDevMode",id:"",enabled:!1,devmode:null}}})}}),disablePreviewMode=async()=>{var a;j(!0);const b=await q({variables:{}});j(!1);const d=null===(a=b.data)|| void 0===a?void 0:a.deleteAjaxTailorDevmode;if(!0!==d.deleted)throw new Error("Could not disable app preview.");p(),c(!1)};return d.createElement(h.a,{shown:!!b,onWashClick:c,onEscape:c},d.createElement(g.h,null,d.createElement(g.f,{title:d.createElement(m.a,l.a.confirmDisableModalTitle)}),d.createElement(g.c,null,d.createElement(e.default,{padding:20},d.createElement(m.a,l.a.confirmDisablePrompt))),d.createElement(g.e,{end:d.createElement(f.ButtonGroup,null,d.createElement(f.default,{onClick:a=>c(!1),label:d.createElement(m.a,l.a.cancelDisableButton)}),d.createElement(f.default,{color:"blue",pending:i,onClick:disablePreviewMode,label:d.createElement(m.a,l.a.confirmDisableButton),"data-testid":"confirm-disable-button"}))})))}},Gp6x:function(a,b,c){"use strict";c.d(b,"a",function(){return getLightnessSign});var d=c("dSqc"),e=c("Q04h");const f={iec:{slope:12.92,srgb:.04045,linear:.0031308},wcag:{slope:12.92,srgb:.03928,linear:.00304},preciseIec:{slope:12.92,srgb:.0404482362771082,linear:.00313066844250063},preciseWcag:{slope:12.9232102,srgb:.0392857,linear:.00303993}};function toHcl(a){return Object(d.a)(a)}function toRgb(a){return Object(e.c)(a)}const sRgbToLinearRgb=(a,b)=>{const{slope:c,srgb:d}=f[a];return b<=d?b/c:((b+.055)/1.055)**2.4},relativeLuminance=(a,b)=>{const c=toRgb(b),d=sRgbToLinearRgb(a,c.r/255),e=sRgbToLinearRgb(a,c.g/255),f=sRgbToLinearRgb(a,c.b/255);return .2126*d+.7152*e+.0722*f},wcagRelativeLuminance=a=>relativeLuminance("wcag",a),wcagContrastRatio=(a,b)=>{const c=wcagRelativeLuminance(a),d=wcagRelativeLuminance(b),e=Math.min(c,d),f=Math.max(c,d);return(f+.05)/(e+.05)},g={AALarge:3,AASmall:4.5,AAALarge:4.5,AAASmall:7},h=1,i=-1,contrastRatioValidator=({fontSize:a,weight:b="regular",level:c="AA"})=>(d,e)=>{const f=wcagContrastRatio(d,e),{AALarge:h,AASmall:i,AAALarge:j,AAASmall:k}=g,l="AAA"===c,m="medium"===b||"bold"===b||"number"==typeof b&&b>=500,n=m?14:18;let o=l?k:i;return a>=n&&(o=l?j:h),f>=o},j=toHcl("#ffffff"),k=toHcl("#000000"),l=contrastRatioValidator({fontSize:14,weight:500});function getLightnessSign(a,b=h,c=l){const d=b===h?j:k;if(c(a,d))return b;const e=b===h?k:j;return c(a,e)?b===h?i:h:wcagContrastRatio(a,j)>=wcagContrastRatio(a,k)?h:i}},Jfgz:function(a,b,c){"use strict";var d=c("0qsp"),e=c("HyUj"),f=c("wO8l"),g=c("TMhk"),h=c("kfQY"),i=c("Vlin"),j=c("rPDH"),k=c("bHZi"),l=c("K+RN"),m=c("gqQ3"),n=c("n8yP");const DisablePreviewModeModal=a=>{let{open:b,setOpen:c}=a;const{setActiveAppID:o}=Object(i.a)(),[p,{loading:q}]=Object(k.a)({update(a){a.writeQuery({query:n.b,data:{__typename:"Query",ajaxAppsDevmode:{__typename:"OpenapiTailorDashboardGetDevMode",id:"",enabled:!1,devmode:null}}})}}),disablePreviewMode=async()=>{var a;const b=await p({variables:{}}),d=null===(a=b.data)|| void 0===a?void 0:a.deleteAjaxTailorDevmode;!0!==d.deleted&&Object(j.f)("Could not disable app preview.",j.a.AppLifecycle),o("",{drawer_event_source:"disable_preview_mode"}),c(!1)};return d.createElement(h.a,{shown:!!b,onWashClick:c,onEscape:c},d.createElement(g.h,null,d.createElement(g.f,{title:d.createElement(l.a,m.a.confirmDisableModalTitle)}),d.createElement(g.c,null,d.createElement(e.default,{padding:20},d.createElement(l.a,m.a.confirmDisablePrompt))),d.createElement(g.e,{end:d.createElement(f.ButtonGroup,null,d.createElement(f.default,{onClick:a=>c(!1),label:d.createElement(l.a,m.a.cancelDisableButton)}),d.createElement(f.default,{color:"blue",pending:q,onClick:disablePreviewMode,label:d.createElement(l.a,m.a.confirmDisableButton),"data-testid":"confirm-disable-button"}))})))};b.a=DisablePreviewModeModal},KqhH:function(a,b,c){"use strict";var d=c("Vavk");const e=Object(d.a)({settings:{id:"tailor.dashboardAppDrawer.settings",defaultMessage:"View app settings"},details:{id:"tailor.dashboardAppDrawer.details",defaultMessage:"View app details"},close:{id:"tailor.dashboardAppDrawer.close",defaultMessage:"Close"},more:{id:"tailor.dashboardAppDrawer.more",defaultMessage:"More"},settingsPreview:{id:"tailor.dashboardAppDrawer.settingsPreview",defaultMessage:"Preview app settings"},previewNotice:{id:"tailor.dashboardAppDrawer.previewNotice",defaultMessage:"Only you can see this app"},disablePreview:{id:"tailor.previewMode.disablePreview",defaultMessage:"Turn off app preview"},report:{id:"tailor.dashboardAppDrawer.report",defaultMessage:"Report app"},warningMissingBrand:{id:"tailor.dashboardAppDrawer.warning.missingBrand",defaultMessage:"{context_view}: Add {brand_color} or {brand_icon} props to complete your branding setup"},warningMissingBrandCTA:{id:"tailor.dashboardAppDrawer.warning.missingBrandCTA",defaultMessage:"Learn more"},testAppLabel:{id:"tailor.dashboardAppDrawer.testAppLabel",defaultMessage:"Test app"},testAppDescription:{id:"tailor.dashboardAppDrawer.testAppDescription",defaultMessage:"You are testing an unreleased version of {app_name}."}});b.a=e},QugM:function(a,b,c){"use strict";c("EyaR");var d=c("Jfgz");c.d(b,"a",function(){return d.a}),c("gqQ3")},bHZi:function(a,b,c){"use strict";c.d(b,"a",function(){return useDisableDevmodeMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation DisableDevmodeMutation($input:OpenapiDeleteAjaxTailorDevmodeInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"ed8f33d871"){deleteAjaxTailorDevmode(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["deleted"]fragments:[]nodeLookupMap:[{nodes:["deleted"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiTailorDashboardDeletedDevMode" method:"DELETE" pathBuilder:$pathBuilder runtimePath:"/ajax/tailor/devmode" queryName:"deleteAjaxTailorDevmode" bodyBuilder:$bodyBuilder){deleted}}
          `,g=f,h={onError(a){throw a}};function useDisableDevmodeMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},biIe:function(a,b,c){"use strict";var d=c("0qsp"),e=c("gEql"),f=c("T6JN"),g=c("HyUj"),h=c("U/5g"),i=c("KMTT");const TailorPreviewModeNotice=a=>{let{children:b,warnings:c,centerContents:j}=a;return d.createElement("div",{className:"db-PreviewModeNotice","data-testid":"drawer-app-devmode-notice",style:j?{display:"flex",justifyContent:"center"}:void 0},d.createElement(g.default,{flex:{direction:"row",alignItems:"center"}},d.createElement(f.default,{icon:e.a,color:"yellow500",size:12,style:{paddingRight:4}}),b),Boolean(null==c?void 0:c.length)&&d.createElement(i.TooltipContainer,{contentPadding:12,context:d.createElement(h.default,{icon:"info",label:null==c?void 0:c.length,color:"yellow",iconPosition:"left"}),tooltipContents:c,position:{context:"bottom",layer:"topright"},allowMouseOverContents:!0,variableWidth:!0}))};b.a=TailorPreviewModeNotice},gqQ3:function(a,b,c){"use strict";var d=c("Vavk");const e=Object(d.a)({disableButton:{id:"tailor.previewMode.disableButton",defaultMessage:"Turn off app preview"},confirmDisableModalTitle:{id:"tailor.previewMode.disableModalTitle",defaultMessage:"Turn off app preview"},confirmDisablePrompt:{id:"tailor.previewMode.confirmationText",defaultMessage:"Are you sure you want to turn off the app preview?"},cancelDisableButton:{id:"tailor.previewMode.cancelDisableButton",defaultMessage:"Cancel"},confirmDisableButton:{id:"tailor.previewMode.confirmDisableButton",defaultMessage:"Continue"}});b.a=e},np0m:function(a,b,c){"use strict";c.d(b,"a",function(){return AppToastLayer});var d=c("5WME"),e=c("0qsp"),f=c("PUDz"),g=c("uIbx"),h=c("k8WL"),i=c("d6zn"),j=c("rPDH");const useUnmountEffect=a=>e.useEffect(()=>a,[]);function iconFromType(a){switch(a){case"success":return"checkCircle";case"caution":return"warning";default:return}}function colorFromType(a){return"success"===a?"green":"white"}const ToastContainer=a=>{let{toastKey:b,inDrawer:c}=a;const{toasts:f,dismissAll:k}=Object(h.b)();return(useUnmountEffect(k),0===f.length)?null:e.createElement(g.a,{key:b,css:{position:"fixed",bottom:j.b,left:c?`calc(100vw - ${i.c} - var(--Chrome-appDock-width))`:"space.0",right:c?"var(--Chrome-appDock-width)":"space.0",zIndex:j.e,paddingX:j.b,pointerEvents:"none",stack:"y",alignX:"center",distribute:"space-between"}},f.map(a=>{const b=a.onAction;return e.createElement(d.c,{icon:iconFromType(a.type),color:colorFromType(a.type),key:a.id,pending:"pending"===a.type,actionLabel:a.action,onClick:b},a.message)}))},AppToastLayer=a=>{let{target:b,toastKey:c,inDrawer:d}=a;return b?f.createPortal(e.createElement(ToastContainer,{toastKey:c,inDrawer:d}),b):e.createElement(ToastContainer,{toastKey:c,inDrawer:d})}},"utb/":function(a,b,c){"use strict";var d=c("0qsp");const e=Object(d.createContext)(!1);b.a=e},wDh2:function(a,b,c){"use strict";c.d(b,"a",function(){return deleteOAuthState}),c.d(b,"c",function(){return getOAuthState}),c.d(b,"b",function(){return enforceTTL}),c.d(b,"d",function(){return useCreateOAuthState});var d=c("8OBj"),e=c.n(d),f=c("0qsp"),g=c("HdkF"),h=c("QWxZ"),i=c("B1iv"),j=c("2/fZ"),k=c("+NkR"),l=c("Macp"),m=c("xdDM");const{useCallback:n}=f,encodeOAuthState=a=>encodeURIComponent(btoa(JSON.stringify(a))),decodeOAuthState=function(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:"";if(!a)return{};try{return JSON.parse(atob(decodeURIComponent(a)))}catch(b){return{}}},expired=(a,b)=>{var c,d;return Date.now()-((null===(c=b[a])|| void 0===c?void 0:null===(d=c.stripe)|| void 0===d?void 0:d.timestamp)||0)>m.a},deleteOAuthState=async a=>{const b=Array.isArray(a)?a:[a];if(!(b.length<1))try{const c=Object(m.b)()||"",d=decodeOAuthState(c);b.forEach(a=>{delete d[a]}),Object.keys(d).length>0?await Object(m.d)(encodeOAuthState(d)):Object(m.c)()}catch(e){}},getOAuthState=a=>{const b={state:"",decoded:{}};try{var c;const d=Object(m.b)()||"",e=decodeOAuthState(d);if(!e[a])return b;if(expired(a,e))return deleteOAuthState(a),b;return{state:(null===(c=e[a].stripe)|| void 0===c?void 0:c.uuid)||"",decoded:e[a]}}catch(f){return b}},enforceTTL=async()=>{const a=Object(m.b)()||"",b=decodeOAuthState(a),c=Object.keys(b).filter(a=>expired(a,b));await deleteOAuthState(c)},toBase64URL=a=>a.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),createOAuthState=async a=>{var b,c,d,f;let{state:j,appId:k,path:l}=a;const n=Object(m.b)()||"",o=decodeOAuthState(n),p=(null===(b=o[k])|| void 0===b?void 0:null===(c=b.stripe)|| void 0===c?void 0:c.uuid)||Object(g.a)(),q=(null===(d=o[k])|| void 0===d?void 0:null===(f=d.stripe)|| void 0===f?void 0:f.verifier)||toBase64URL(h.Buffer.from(Object(g.a)()).toString("base64")),r=encodeOAuthState(e()(e()({},o),{},{[k]:{stripe:{uuid:p,path:l,appId:k,timestamp:Date.now(),verifier:q},app:j}}));let s=!1;try{s=await Object(m.d)(r)}catch(t){}if(!s)throw new Error("Unable to create OAuth state: localStorage is unavailable on the device.");const u=Object(i.createHash)("sha256");u.update(q);const v=toBase64URL(u.digest().toString("base64"));return{state:p,challenge:v}},useCreateOAuthState=a=>{const b=Object(j.a)(),c=Object(k.a)(),d=b.location.pathname,e=Object(l.f)(a);return n(b=>(c.action("tailor.oauth.create_state",{app_id:a,is_developer_mode:e}),createOAuthState({state:b,appId:a,path:d})),[a,d,c,e])}},xdDM:function(a,b,c){"use strict";c.d(b,"a",function(){return e}),c.d(b,"b",function(){return storageGet}),c.d(b,"d",function(){return storageSet}),c.d(b,"c",function(){return storageRemove});var d=c("eIK7");const e=36e5,f="apps_oauth_state",g=new d.d,storageGet=()=>g.get(f),storageSet=a=>g.set(f,a),storageRemove=()=>g.remove(f)}}])
//# sourceMappingURL=https://sourcemaps.corp.stripe.com/dashboard-fe-statics-srv/dashboard.app_drawer~sandbox_scheduler.69efb86ea5.min.js.map