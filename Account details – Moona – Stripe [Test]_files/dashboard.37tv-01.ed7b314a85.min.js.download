(window["__load"]=window["__load"]||[]).push([["37tv-01"],{"9y4u":function(a,b,c){"use strict";c.d(b,"a",function(){return ViewDocsLink});var d=c("0qsp"),e=c.n(d),f=c("Wfl3"),g=c("FfI9"),h=c("nPYo"),i=c("01k4"),j=c("Vavk"),k=c("K+RN"),l=c("09jD"),m=c("lDYq"),n=c("VYrL"),o=c("dq68"),p=c("YkSB"),q=c("SQrt");const r=Object(j.a)({apiKeysViewDocsCTA:{id:"dashboardOnboarding.recommendationsApiKeysModule.apiKeysViewDocsCTA",defaultMessage:"View docs"},apiKeysPublishableKey:{id:"dashboardOnboarding.recommendationsApiKeysModule.apiKeysPublishableKey",defaultMessage:"Publishable key"},apiKeysSecretKey:{id:"dashboardOnboarding.recommendationsApiKeysModule.apiKeysSecretKey",defaultMessage:"Secret key"}}),getKey=(a,b,c)=>a.find(a=>a.type===b&&a.livemode===c),toApiKey=a=>({id:a.id||"",name:a.name,note:a.note,secret:a.secret,livemode:a.livemode||!1,created:a.created||0,expires:a.expires||0,use_count:a.use_count,last_used:a.last_used,type:a.type,permissions:a.permissions||[],connect_permissions:a.connect_permissions||[],hidden:a.hidden||!1,hide_on_next_view:a.hide_on_next_view||!1,secret_redacted:a.secret_redacted||"",longer_format:a.longer_format||!1,ip_whitelist:a.ip_whitelist,public_key:a.public_key,key_id:a.key_id,stripe_app_id:a.stripe_app_id,thirdparty_integration_name:a.thirdparty_integration_name,thirdparty_integration_url:a.thirdparty_integration_url}),ViewDocsLink=()=>{const a=Object(f.a)();return e.a.createElement(g.a,{href:"https://docs.stripe.com/",target:"_blank",onPress:()=>a.action("onboarding_api_keys_module_view_docs_link_clicked")},e.a.createElement(k.a,r.apiKeysViewDocsCTA))},APIKeysModule=()=>{var a,b;const c=Object(l.t)(),d=Object(p.a)({}),f=d.refetch,{capturedIntents:g}=Object(q.a)(),j=!!g.length,s=(null===(a=d.data)|| void 0===a?void 0:null===(b=a.ajaxDevelopersApikeys)|| void 0===b?void 0:b.data.map(toApiKey))||[],t=getKey(s,"publishable",c),u=getKey(s,"secret",c);return e.a.createElement(h.a.div,{css:{paddingTop:"small",stack:"y",gap:"space.150",distribute:"space-between"}},e.a.createElement(h.a.div,{css:{stack:"x",distribute:"space-between",minTileWidth:"1/2",width:"fill"}},e.a.createElement(h.a.div,{css:{font:"body.small"}},e.a.createElement(k.a,r.apiKeysPublishableKey)),e.a.createElement(h.a.div,{css:{alignSelfX:"end",maxWidth:"fill"}},t?e.a.createElement(n.a,{text:(null==t?void 0:t.secret)||"",isSecretKey:!1,isLiveKey:c,truncate:!0}):e.a.createElement(i.a,null))),e.a.createElement(h.a.div,{css:{stack:"x",distribute:"space-between",minTileWidth:"1/2",width:"fill"}},e.a.createElement(h.a.p,{css:{font:"body.small"}},e.a.createElement(k.a,r.apiKeysSecretKey)),e.a.createElement(h.a.div,{css:{alignSelfX:"end",maxWidth:"fill"}},u?e.a.createElement(o.a,{apiKey:u,onChange:f},a=>e.a.createElement(m.a,{model:u,keyReveal:a,renderer:"dashboard_onboarding_api_keys_module"})):e.a.createElement(i.a,null))),j&&e.a.createElement(ViewDocsLink,null))};b.b=APIKeysModule},D5rs:function(a,b,c){"use strict";c.d(b,"a",function(){return useCopyKeyUpdateKeyNoteServiceMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation CopyKeyUpdateKeyNoteServiceMutation($input:OpenapiPostAjaxSettingsApikeysNewTokenNoteInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"7ff51348eb"){result:ajaxSettingsApikeysNewTokenNote(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:[]fragments:[]nodeLookupMap:[]predicates:{})@rest(type:"OpenapiEmptyManage" method:"POST" pathBuilder:$pathBuilder runtimePath:"/ajax/settings/apikeys_new/:token/note" queryName:"result" bodyBuilder:$bodyBuilder){__typename}}
          `,g=f,h={onError(a){throw a}};function useCopyKeyUpdateKeyNoteServiceMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},GcQN:function(a,b,c){"use strict";var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("wO8l"),h=c("bHWS"),i=c("TMhk"),j=c("Vavk"),k=c("K+RN"),l=c("plqV"),m=c("ou4r"),n=c("Al4q"),o=c("1YLw"),p=c("fisF");const q=Object(j.a)({headerLivemode:{id:"settings.api.RevealKeyDialog.headerLivemode",defaultMessage:"Reveal live key"},headerTestmode:{id:"settings.api.RevealKeyDialog.headerTestmode",defaultMessage:"Reveal test key"},confirm:{id:"settings.api.RevealKeyDialog.revealKeyConfirm",defaultMessage:"Are you sure you want to reveal your key?"},revealKeyWarning:{id:"settings.api.RevealKeyDialog.revealKeyWarning.md",defaultMessage:"This key can only be revealed once to keep your account secure. If you lose it, you must [roll the key](<RollKeyLink>) or create another one."},cancel:{id:"settings.api.RevealKeyDialog.cancel",defaultMessage:"Cancel"},reveal:{id:"settings.api.RevealKeyDialog.reveal",defaultMessage:"Reveal"}});class RevealKey extends f.Component{getHeader(){const{livemode:a}=this.props;return a?f.createElement(k.a,q.headerLivemode):f.createElement(k.a,q.headerTestmode)}renderConfirm(){const{pending:a,onClose:b,onReveal:c}=this.props;return f.createElement(i.h,{width:"medium"},f.createElement(i.f,null,this.getHeader()),f.createElement(i.c,{padding:20,background:"offset"},f.createElement(n.default,{spacing:12},f.createElement(h.Body,null,f.createElement(l.a,e()({},q.revealKeyWarning,{values:{RollKeyLink:a=>f.createElement(p.c,{display:"inline-flex",href:Object(o.b)("site","docs/keys#rolling-keys"),target:"_blank",label:a})}}))),f.createElement(h.BodyAlt,null,f.createElement(k.a,q.confirm)))),f.createElement(i.e,{end:f.createElement(g.ButtonGroup,null,f.createElement(p.b,{label:f.createElement(k.a,q.cancel),onClick:b}),f.createElement(p.b,{onClick:c,color:"red",label:f.createElement(k.a,q.reveal),pending:a}))}))}renderRevealed(a){const{token:b,onClose:c,onSaveNote:d}=this.props;return f.createElement(m.a,{header:this.getHeader(),onClose:c,onSaveNote:d,secret:a,token:b})}render(){const{secret:a}=this.props;return a?this.renderRevealed(a):this.renderConfirm()}}b.a=RevealKey},"M+cC":function(a,b,c){"use strict";c.d(b,"a",function(){return useKeyRevealWrapperRevealSecretKeyServiceMutation});var d=c("GhF0"),e=c("bPOr");const f=e.a`
            mutation KeyRevealWrapperRevealSecretKeyServiceMutation($input:OpenapiPostAjaxSettingsApikeysNewSecretTokenRevealInput$v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"c5e32bee17"){result:ajaxSettingsApikeysNewSecretTokenReveal(input:$input v1Context:$v1Context)@params(expand:[]includeOnly:["hidden" "note" "secret"]fragments:[]nodeLookupMap:[{nodes:["hidden" "note" "secret"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiApiKeysManage" method:"POST" pathBuilder:$pathBuilder runtimePath:"/ajax/settings/apikeys_new/secret/:token/reveal" queryName:"result" bodyBuilder:$bodyBuilder){hidden note secret}}
          `,g=f,h={onError(a){throw a}};function useKeyRevealWrapperRevealSecretKeyServiceMutation(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},VYrL:function(a,b,c){"use strict";var d=c("TfDI"),e=c.n(d),f=c("0qsp"),g=c("HyUj"),h=c("bHWS"),i=c("KMTT"),j=c("3P7Z"),k=c("Vavk"),l=c("K+RN"),m=c("Yj1E"),n=c("+epa"),o=c("T6JN"),p=c("TB5T"),q=c("Al4q"),r=c("lbsd"),s=c("nPYo");const t=1e3,u=Object(k.a)({clickToCopy:{id:"copyPasteableApiKey.clickToCopy",defaultMessage:"Click to copy"},copied:{id:"copyPasteableApiKey.copied",defaultMessage:"Copied"}});class CopyPasteableApiKey extends f.Component{constructor(){super(...arguments),e()(this,"state",{copied:!1}),e()(this,"handleCopy",()=>{const{isSecretKey:a,isLiveKey:b,onCopy:c,text:d}=this.props;Object(j.a)(d||""),this.setState({copied:!0},()=>{setTimeout(()=>this.setState({copied:!1}),t)}),this.props.globals.analytics.action(`dashboard.copyPasteableApiKey.${b?"live":"test"}.${a?"copySecret":"copyPublishable"}.click`),c&&c()})}getApiKey(){const{text:a,intl:b,truncate:c}=this.props;return f.createElement(r.a,{"aria-label":b.formatMessage(u.clickToCopy),css:{color:"action.secondary",overflow:"hidden"},onPress:this.handleCopy},f.createElement(g.default,{className:"db-CopyPasteableApiKey",padding:2,style:c?{width:"auto",overflow:"hidden",textOverflow:"ellipsis"}:null},f.createElement(h.BodyMono,{color:"inherit",wrap:!c},a)))}getTooltipContents(){const{copied:a}=this.state,b=a?f.createElement(l.a,u.copied):f.createElement(l.a,u.clickToCopy),c=a?f.createElement(o.default,{icon:"checkmark",color:"green",size:12}):f.createElement(o.default,{icon:"clipboard",color:"white",size:12});return f.createElement(g.default,{padding:4},f.createElement(p.a,{reference:h.BodyAltTextProps},f.createElement(q.default,{direction:"horizontal",spacing:4},c,b)))}render(){const{tooltipPosition:a}=this.props,b=this.getTooltipContents(),c=this.getApiKey();return f.createElement(s.a.div,{className:"CopyPasteableApiKeyContainer"},f.createElement(i.CompactTooltip,{context:c,label:b,position:a||"right",variableWidth:!0}))}}b.a=Object(m.a)(Object(n.b)(CopyPasteableApiKey))},YkSB:function(a,b,c){"use strict";c.d(b,"a",function(){return useRetrieveDevelopersApiKeysQuery});var d=c("bPOr"),e=c("qCo4");const f=d.a`
            query RetrieveDevelopersApiKeysQuery($v1Context:V1ContextInput!)@tag(id:"gql")@hash(id:"d36802e68d"){ajaxDevelopersApikeys(v1Context:$v1Context)@params(expand:[]includeOnly:["data"]fragments:[]nodeLookupMap:[{nodes:["data"]parentPath:"ROOT"}]predicates:{})@rest(type:"OpenapiApiKeysList" method:"GET" pathBuilder:$pathBuilder runtimePath:"/ajax/developers/apikeys" queryName:"ajaxDevelopersApikeys"){data}}
          `,g=f,h={fetchPolicy:"cache-and-network"};function useRetrieveDevelopersApiKeysQuery(a){return Object(e.a)(g,Object.assign({},h,a))}const i={};f.permissions=i},dq68:function(a,b,c){"use strict";var d=c("0qsp"),e=c("kfQY"),f=c("GcQN"),g=c("cnxD"),h=c("M+cC");const{useState:i,useCallback:j}=d,KeyRevealWrapper=a=>{const defaultRenderer=a=>{let{revealSecretKeyService:b,apiKey:c,onChange:e,onClose:g,onReveal:h}=a;const i=c.id,j=b.isCompleted?b.value.secret:null;return d.createElement(f.a,{token:i,secret:j,pending:b.isLoading,onClose:g,onReveal:h,onSaveNote:e,livemode:c.livemode})},{renderRevealer:b=defaultRenderer,onChange:c,apiKey:k,children:l}=a,[m,n]=i(!1),o=Object(g.c)(h.a,{componentName:"KeyRevealWrapper",owner:"dashboard_discovery",serviceName:"revealSecretKeyService"}),p=j(()=>{const a=o.isCompleted?o.value.secret:null;n(!1),a&&c()},[c,n,o]),q=j(()=>{const{id:a}=k;o.action({token:a},{ifLoading:"unsafeNoop"}).then(a=>{a.isErrored&&(n(!1),a.error.message&&a.error.message.includes("key does not exist")&&c())})},[o,k,n,c]),r=j(()=>{const{hide_on_next_view:a}=k;if(a){n(!0);return}q()},[n,k,q]),renderChild=()=>k.hidden?l({state:"hidden",note:k.note}):k.secret?l({state:"revealed",secret:k.secret,note:k.note,revealKey:r}):k.key_id?l({state:"revealed",key_id:k.key_id,note:k.note,revealKey:r}):o.isErrored?l({state:"errored",revealKey:r}):o.isLoading?l({state:"loading"}):o.isCompleted?o.value.hidden||!o.value.secret?l({state:"hidden",note:o.value.note}):l({state:"revealed",secret:o.value.secret,note:o.value.note,revealKey:r}):l({state:"revealable",revealKey:r});return d.createElement(d.Fragment,null,renderChild(),d.createElement(e.a,{shown:m,onEscape:p,onWashClick:p},b({revealSecretKeyService:o,apiKey:k,onChange:c,onClose:p,onReveal:q})))};b.a=KeyRevealWrapper},lDYq:function(a,b,c){"use strict";var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("plqV"),h=c("K+RN"),i=c("HyUj"),j=c("Al4q"),k=c("T6JN"),l=c("4Nc9"),m=c("bHWS"),n=c("KMTT"),o=c("+epa"),p=c("VYrL"),q=c("wZji"),r=c("fisF"),s=c("Olvt"),t=c("nPYo"),u=c("n2FO"),v=c("lbsd"),w=c("Ib3m");const x=s.b.global({".SecretKeyWrapper div.Box-root":{minWidth:0}});class ApiKeySecret extends f.Component{renderVisibleKey(a,b,c){const{model:d}=this.props,{livemode:h}=d;return f.createElement(t.a.div,{className:"SecretKeyWrapper",uses:[x],css:{minWidth:"space.0"}},f.createElement(j.default,{direction:"horizontal"},c?f.createElement(j.default,{direction:"horizontal",alignItems:"baseline",spacing:8},f.createElement(m.BodyMono,null,`•`.repeat(12)),f.createElement(n.TooltipContainer,{context:f.createElement(k.default,{icon:"info",hoverable:!0,color:"gray",size:12}),tooltipContents:f.createElement(m.Body,null,f.createElement(g.a,e()({},q.b.hiddenKey,{values:{ApiKeyLink:a=>f.createElement(r.c,{display:"inline-flex",href:Object(w.a)({name:"APIKEYS"}),label:a})}}))),allowMouseOverContents:!0,position:{context:"top",layer:"bottomright"}})):f.createElement(o.a,null,b=>f.createElement(p.a,{text:a,isSecretKey:!0,isLiveKey:h,onCopy(){b.analytics.action("copied_key")},tooltipPosition:"above",truncate:!0})),b&&f.createElement(i.default,{padding:{left:12}},f.createElement(n.TooltipContainer,{position:{context:"right",layer:"bottomleft"},context:f.createElement(k.default,{icon:"note",size:12,hoverable:!0,color:"gray"}),tooltipContents:f.createElement(m.Body,null,b),contentPadding:{all:12},allowMouseOverContents:!0}))))}renderRevealableKey(){const{model:a,renderer:b,keyReveal:c}=this.props,{livemode:d}=a,e=d?`${b}_review_live_key_token_click`:`${b}_review_test_key_token_click`;return f.createElement(u.a,{trigger:f.createElement(v.a,{"data-db-analytics-name":e,css:{color:"action.secondary"},className:"db-ApiKeySecret-Action",onPress:()=>(null==c?void 0:c.revealKey)&&c.revealKey()},f.createElement("p",{className:"db-ApiKeySecret-dots"},`•`.repeat(12)),f.createElement(k.default,{icon:"review"})),placement:"top",type:"label"},f.createElement(i.default,{padding:4},a.livemode?f.createElement(h.a,q.b.liveButtonLabel):f.createElement(h.a,q.b.testButtonLabel)))}render(){const{model:a,keyReveal:b}=this.props;return a.hidden?this.renderVisibleKey(a.secret_redacted,a.note,!0):"loading"===b.state?f.createElement(l.default,null):"revealable"===b.state?this.renderRevealableKey():"revealed"===b.state?this.renderVisibleKey(b.secret,b.note):"hidden"===b.state?this.renderVisibleKey(a.secret_redacted,b.note,!0):null}}b.a=ApiKeySecret},ou4r:function(a,b,c){"use strict";var d=c("QbI9"),e=c.n(d),f=c("0qsp"),g=c("TMhk"),h=c("bHWS"),i=c("T6JN"),j=c("LIXv"),k=c("2+7o"),l=c("TB5T"),m=c("Al4q"),n=c("1YLw"),o=c("Vavk"),p=c("xGRT"),q=c("K+RN"),r=c("HyUj"),s=c("KMTT"),t=c("3P7Z"),u=c("RZcX"),v=c("9bP1"),w=c("cnxD"),x=c("D5rs"),y=c("fisF");const z=Object(o.a)({copyKeyWarning:{id:"settings.api.CopyKey.copyKeyWarning",defaultMessage:"Save and store this new key to a secure place, such as a password manager or secret store. You won’t be able to see it again."},keepingKeysSafeLink:{id:"settings.api.CopyKey.keepingKeysSafeLink",defaultMessage:"Learn more about keeping your keys safe"},close:{id:"settings.api.CopyKey.close",defaultMessage:"Done"},saveNote:{id:"settings.api.CopyKey.saveNote",defaultMessage:"Save"},keyNote:{id:"settings.api.CopyKey.keyNote",defaultMessage:"Add a note"},safeKey:{id:"settings.api.CopyKey.safeKey",defaultMessage:"Keep your key safe"},keyNoteDescription:{id:"settings.api.CopyKey.keyNoteDescription",defaultMessage:"Describe this key and the location where it’s stored."},noteInsecure:{id:"settings.api.CopyKey.noteInsecure",defaultMessage:"For security, note may not contain API key"},clickToCopy:{id:"settings.api.CopyKey.clickToCopy",defaultMessage:"Copy to clipboard"},copied:{id:"settings.api.CopyKey.copied",defaultMessage:"Copied"}}),A=1e3,isNoteInsecure=(a,b)=>{const c=b.split("_")[2];return/rk_live/.test(a)||/sk_live/.test(a)|| -1!==a.indexOf(c)},{useState:B,useCallback:C}=f,CopyKey=a=>{const{onSaveNote:b,onClose:c,token:d,secret:o,header:D}=a,[E,F]=B(""),[G,H]=B(!1),[I,J]=B(!1),K=Object(p.a)(),L=Object(w.c)(x.a,{componentName:"CopyKey",owner:"dashboard_discovery",serviceName:"updateKeyNoteService"}),M=C(()=>{Object(t.a)(o||""),J(()=>(setTimeout(()=>J(!1),A),!0))},[J,o]),N=C(a=>{const b=isNoteInsecure(a,o);F(a),H(b)},[F,H,o]),O=C(()=>{!isNoteInsecure(E,o)&&L.action({token:d,note:E},{ifLoading:"unsafeNoop"}).then(a=>{a.isCompleted&&(b(),c())})},[E,c,b,o,d,L]),renderNoteInsecureError=()=>G?f.createElement(q.a,z.noteInsecure):null,getTooltipContents=()=>{const a=I?f.createElement(q.a,z.copied):f.createElement(q.a,z.clickToCopy),b=I?f.createElement(i.default,{icon:"checkmark",color:"green",size:12}):f.createElement(i.default,{icon:"clipboard",color:"white",size:12});return f.createElement(r.default,{padding:4},f.createElement(l.a,{reference:h.BodyAltTextProps},f.createElement(m.default,{direction:"horizontal",spacing:4},b,a)))};return f.createElement(g.h,{width:"medium"},f.createElement(g.f,null,D),f.createElement(g.c,null,f.createElement(j.g,{layout:"stacked",divider:!1},f.createElement(j.a,null,f.createElement(j.f,{name:"key",label:f.createElement(q.a,z.safeKey)},f.createElement(m.default,{spacing:12},f.createElement(q.a,z.copyKeyWarning),f.createElement(y.c,{href:Object(n.b)("site","/docs/keys#safe-keys"),icon:"external",iconPosition:"right",target:"_blank",label:f.createElement(q.a,z.keepingKeysSafeLink)}))),f.createElement(j.f,null,f.createElement(v.a,null,(a,b)=>f.createElement(u.e,e()({},a,{radius:"all",shadow:{focused:"keyboard"===b}}),f.createElement(s.CompactTooltip,{context:f.createElement(y.m,{onClick:M},f.createElement(r.default,{divider:{color:"light",width:1,side:"all"},padding:12,background:"white",style:{borderRadius:"4px",maxWidth:"400px"}},f.createElement(h.BodyMono,null,o))),label:getTooltipContents(),position:"above",variableWidth:!0}))))),f.createElement(j.a,null,f.createElement(j.f,{label:f.createElement(q.a,z.keyNote),divider:!1},f.createElement(j.d,{error:renderNoteInsecureError()},f.createElement(k.e,{id:"ShowNewKey-note",onChange:N,placeholder:K.formatMessage(z.keyNoteDescription),value:E,width:"maximized"})))))),f.createElement(g.e,{end:E?f.createElement(y.b,{label:f.createElement(q.a,z.saveNote),onClick:O,color:"blue"}):f.createElement(y.b,{label:f.createElement(q.a,z.close),className:"close_key_modal",onClick:c})}))};b.a=CopyKey}}])
//# sourceMappingURL=https://sourcemaps.corp.stripe.com/dashboard-fe-statics-srv/dashboard.37tv-01.ed7b314a85.min.js.map